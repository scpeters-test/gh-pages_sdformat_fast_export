{"rendered": {"description": {"raw": "I noticed a weird issue in Converter when converting across multiple versions (ie. 1.4 -> 1.5 -> 1.6). It can manifest as multiple `use_parent_model_frame` elements being added, which was fixed in pull request #573. (I actually forgot about that PR, but just merged it into this one). I've since noticed another manifestation while trying to update gazebo11 to use citadel dependencies. It seems that when converting a sdf 1.4 world file that has gravity defined in the `//world/physics/gravity` element with a non-default value, it does not get moved to the `//world/gravity` element. It will instead have gravity elements under both physics and world, but with different values. I've updated an existing test in `INTEGRATION_converter` to use non-default values of gravity and to test conversion from 1.4 in addition to 1.5.\r\n\r\nThe fix is to change the scope of an `xmlDoc` variable so that the `*.convert` files are not appended to each other during conversion.", "markup": "markdown", "html": "<p>I noticed a weird issue in Converter when converting across multiple versions (ie. 1.4 -&gt; 1.5 -&gt; 1.6). It can manifest as multiple <code>use_parent_model_frame</code> elements being added, which was fixed in <a href=\"#!/osrf/sdformat/pull-requests/573/prevent-duplicate-use_parent_model_frame\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #573</a>. (I actually forgot about that PR, but just merged it into this one). I've since noticed another manifestation while trying to update gazebo11 to use citadel dependencies. It seems that when converting a sdf 1.4 world file that has gravity defined in the <code>//world/physics/gravity</code> element with a non-default value, it does not get moved to the <code>//world/gravity</code> element. It will instead have gravity elements under both physics and world, but with different values. I've updated an existing test in <code>INTEGRATION_converter</code> to use non-default values of gravity and to test conversion from 1.4 in addition to 1.5.</p>\n<p>The fix is to change the scope of an <code>xmlDoc</code> variable so that the <code>*.convert</code> files are not appended to each other during conversion.</p>", "type": "rendered"}, "title": {"raw": "Converter: fix bug when converting across multiple versions", "markup": "markdown", "html": "<p>Converter: fix bug when converting across multiple versions</p>", "type": "rendered"}}, "type": "pullrequest", "description": "I noticed a weird issue in Converter when converting across multiple versions (ie. 1.4 -> 1.5 -> 1.6). It can manifest as multiple `use_parent_model_frame` elements being added, which was fixed in pull request #573. (I actually forgot about that PR, but just merged it into this one). I've since noticed another manifestation while trying to update gazebo11 to use citadel dependencies. It seems that when converting a sdf 1.4 world file that has gravity defined in the `//world/physics/gravity` element with a non-default value, it does not get moved to the `//world/gravity` element. It will instead have gravity elements under both physics and world, but with different values. I've updated an existing test in `INTEGRATION_converter` to use non-default values of gravity and to test conversion from 1.4 in addition to 1.5.\r\n\r\nThe fix is to change the scope of an `xmlDoc` variable so that the `*.convert` files are not appended to each other during conversion.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/pullrequests/584/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/diffstat/osrf/sdformat:7f6c48034029%0De0ef3c9a7f4e?from_pullrequest_id=584"}, "commits": {"href": "data/repositories/osrf/sdformat/pullrequests/584/commits.json"}, "self": {"href": "data/repositories/osrf/sdformat/pullrequests/584.json"}, "comments": {"href": "data/repositories/osrf/sdformat/pullrequests/584/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/pullrequests/584/merge"}, "html": {"href": "#!/osrf/sdformat/pull-requests/584"}, "activity": {"href": "data/repositories/osrf/sdformat/pullrequests/584/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/diff/osrf/sdformat:7f6c48034029%0De0ef3c9a7f4e?from_pullrequest_id=584"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/pullrequests/584/approve"}, "statuses": {"href": "data/repositories/osrf/sdformat/pullrequests/584/statuses_page=1.json"}}, "title": "Converter: fix bug when converting across multiple versions", "close_source_branch": true, "reviewers": [{"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}], "id": 584, "destination": {"commit": {"hash": "e0ef3c9a7f4e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/e0ef3c9a7f4e.json"}, "html": {"href": "#!/osrf/sdformat/commits/e0ef3c9a7f4e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf8"}}, "created_on": "2019-10-24T00:49:50.808468+00:00", "summary": {"raw": "I noticed a weird issue in Converter when converting across multiple versions (ie. 1.4 -> 1.5 -> 1.6). It can manifest as multiple `use_parent_model_frame` elements being added, which was fixed in pull request #573. (I actually forgot about that PR, but just merged it into this one). I've since noticed another manifestation while trying to update gazebo11 to use citadel dependencies. It seems that when converting a sdf 1.4 world file that has gravity defined in the `//world/physics/gravity` element with a non-default value, it does not get moved to the `//world/gravity` element. It will instead have gravity elements under both physics and world, but with different values. I've updated an existing test in `INTEGRATION_converter` to use non-default values of gravity and to test conversion from 1.4 in addition to 1.5.\r\n\r\nThe fix is to change the scope of an `xmlDoc` variable so that the `*.convert` files are not appended to each other during conversion.", "markup": "markdown", "html": "<p>I noticed a weird issue in Converter when converting across multiple versions (ie. 1.4 -&gt; 1.5 -&gt; 1.6). It can manifest as multiple <code>use_parent_model_frame</code> elements being added, which was fixed in <a href=\"#!/osrf/sdformat/pull-requests/573/prevent-duplicate-use_parent_model_frame\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #573</a>. (I actually forgot about that PR, but just merged it into this one). I've since noticed another manifestation while trying to update gazebo11 to use citadel dependencies. It seems that when converting a sdf 1.4 world file that has gravity defined in the <code>//world/physics/gravity</code> element with a non-default value, it does not get moved to the <code>//world/gravity</code> element. It will instead have gravity elements under both physics and world, but with different values. I've updated an existing test in <code>INTEGRATION_converter</code> to use non-default values of gravity and to test conversion from 1.4 in addition to 1.5.</p>\n<p>The fix is to change the scope of an <code>xmlDoc</code> variable so that the <code>*.convert</code> files are not appended to each other during conversion.</p>", "type": "rendered"}, "source": {"commit": {"hash": "7791fffe9fc1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/7791fffe9fc1.json"}, "html": {"href": "#!/osrf/sdformat/commits/7791fffe9fc1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "fix_convert_multiple_versions"}}, "comment_count": 4, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2019-11-06T20:10:17.699753+00:00", "type": "participant", "approved": false, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "REVIEWER", "participated_on": "2019-10-25T22:17:00.008205+00:00", "type": "participant", "approved": true, "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}}, {"role": "PARTICIPANT", "participated_on": "2019-11-04T18:12:07.717678+00:00", "type": "participant", "approved": true, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}], "reason": "", "updated_on": "2019-11-06T20:47:12.910789+00:00", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "merge_commit": {"hash": "7f6c48034029", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/7f6c48034029.json"}, "html": {"href": "#!/osrf/sdformat/commits/7f6c48034029"}}}, "closed_by": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}