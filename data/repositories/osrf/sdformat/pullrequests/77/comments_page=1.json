{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/897601.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-897601"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "Fixed a few URDF deprecation warnings, and added link_directories for URDF in c8502db. ", "markup": "markdown", "html": "<p>Fixed a few URDF deprecation warnings, and added link_directories for URDF in <a href=\"#!/osrf/sdformat/commits/c8502db\" rel=\"nofollow\" class=\"ap-connect-link\">c8502db</a>. </p>", "type": "rendered"}, "created_on": "2013-12-03T17:28:15.289572+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2013-12-03T17:28:15.297832+00:00", "type": "pullrequest_comment", "id": 897601}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/899144.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-899144"}}, "parent": {"id": 897601, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/897601.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-897601"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "Thanks, merged.\n\nI was using liburdfdom packages from DARTSim PPA. In this case a warning not related to this PR appears:\n```\nCMake Warning (dev) at test/CMakeLists.txt:15 (link_directories):\n  This command specifies the relative path\n\n    lib\n\n  as a link directory.\n\n  Policy CMP0015 is not set: link_directories() treats paths relative to the\n  source dir.  Run \"cmake --help-policy CMP0015\" for policy details.  Use the\n  cmake_policy command to set the policy and suppress this warning.\nThis warning is for project developers.  Use -Wno-dev to suppress it.\n```\n\nIt comes from a bug in the pkgconfig file in console_bridge. I will patch it in debian-science repository where the pkgconfig file lives.", "markup": "markdown", "html": "<p>Thanks, merged.</p>\n<p>I was using liburdfdom packages from DARTSim PPA. In this case a warning not related to this PR appears:</p>\n<div class=\"codehilite\"><pre><span></span>CMake Warning (dev) at test/CMakeLists.txt:15 (link_directories):\n  This command specifies the relative path\n\n    lib\n\n  as a link directory.\n\n  Policy CMP0015 is not set: link_directories() treats paths relative to the\n  source dir.  Run &quot;cmake --help-policy CMP0015&quot; for policy details.  Use the\n  cmake_policy command to set the policy and suppress this warning.\nThis warning is for project developers.  Use -Wno-dev to suppress it.\n</pre></div>\n\n\n<p>It comes from a bug in the pkgconfig file in console_bridge. I will patch it in debian-science repository where the pkgconfig file lives.</p>", "type": "rendered"}, "created_on": "2013-12-03T21:58:12.357514+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-12-03T21:58:12.366624+00:00", "type": "pullrequest_comment", "id": 899144}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/906657.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-906657"}}, "parent": {"id": 899144, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/899144.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-899144"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "For the records, [pull request](https://github.com/ros/console_bridge/pull/11) in console_bridge repository.", "markup": "markdown", "html": "<p>For the records, <a data-is-external-link=\"true\" href=\"https://github.com/ros/console_bridge/pull/11\" rel=\"nofollow\">pull request</a> in console_bridge repository.</p>", "type": "rendered"}, "created_on": "2013-12-05T02:01:32.660725+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-12-05T02:01:32.669876+00:00", "type": "pullrequest_comment", "id": 906657}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/912581.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-912581"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "It would be nice to add some of these flags to README, like we have in gazebo.", "markup": "markdown", "html": "<p>It would be nice to add some of these flags to README, like we have in gazebo.</p>", "type": "rendered"}, "created_on": "2013-12-06T00:08:39.040436+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-12-06T00:08:39.050650+00:00", "type": "pullrequest_comment", "id": 912581}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/912602.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-912602"}}, "parent": {"id": 912581, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/912581.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-912581"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "Good idea. I would prefer to use a different pull request to document all them when all are merged. Issue #40.", "markup": "markdown", "html": "<p>Good idea. I would prefer to use a different pull request to document all them when all are merged. Issue <a href=\"#!/osrf/sdformat/issues/40/document-building-cmake-arguments-in\" rel=\"nofollow\" title=\"Document building cmake arguments in README file\" class=\"ap-connect-link\"><s>#40</s></a>.</p>", "type": "rendered"}, "created_on": "2013-12-06T00:15:24.334839+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-12-06T00:15:24.342957+00:00", "type": "pullrequest_comment", "id": 912602}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/912633.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-912633"}}, "parent": {"id": 912602, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/912602.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-912602"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "Thanks", "markup": "markdown", "html": "<p>Thanks</p>", "type": "rendered"}, "created_on": "2013-12-06T00:20:09.646027+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-12-06T00:20:09.653887+00:00", "type": "pullrequest_comment", "id": 912633}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/912977.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-912977"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "I'm unable to build find the external urdfdom package when using this option in a catkin workspace. Not a normal scenario for building sdformat, I know, but I'm just mentioning it. Using the [package.xml from branch package_xml](#!/osrf/sdformat/src/package_xml/package.xml)\n~~~\n$ . /opt/ros/groovy/setup.bash\n$ pkg-config --modversion --cflags urdfdom_headers\n0.2.3\n-I/opt/ros/groovy/include\n$ catkin_make_isolated --cmake-args -DUSE_EXTERNAL_URDF=True\n...\n-- checking for module 'urdfdom'\n--   package 'urdfdom' not found\n-- \n-- \tURDF library not found. Please install it to use with USE_EXTERNAL_URDF or set this flag to false to use internal URDF code\n-- ----------------------------------------\n\n-- BUILD ERRORS: These must be resolved before compiling.\n-- \tURDF library not found. Please install it to use with USE_EXTERNAL_URDF or set this flag to false to use internal URDF code\n-- END BUILD ERRORS\n\nCMake Error at CMakeLists.txt:184 (message):\n  Errors encountered in build.  Please see the BUILD ERRORS above.\n~~~\nEDIT: it works for me with a normal cmake build, but I'm getting seg-faults in the tests involving urdf parsing. Still exploring.", "markup": "markdown", "html": "<p>I'm unable to build find the external urdfdom package when using this option in a catkin workspace. Not a normal scenario for building sdformat, I know, but I'm just mentioning it. Using the <a data-is-external-link=\"true\" href=\"#!/osrf/sdformat/src/package_xml/package.xml\" rel=\"nofollow\">package.xml from branch package_xml</a></p>\n<div class=\"codehilite\"><pre><span></span>$ . /opt/ros/groovy/setup.bash\n$ pkg-config --modversion --cflags urdfdom_headers\n<span class=\"m\">0</span>.2.3\n-I/opt/ros/groovy/include\n$ catkin_make_isolated --cmake-args -DUSE_EXTERNAL_URDF<span class=\"o\">=</span>True\n...\n-- checking <span class=\"k\">for</span> module <span class=\"s1\">&#39;urdfdom&#39;</span>\n--   package <span class=\"s1\">&#39;urdfdom&#39;</span> not found\n-- \n--  URDF library not found. Please install it to use with USE_EXTERNAL_URDF or <span class=\"nb\">set</span> this flag to <span class=\"nb\">false</span> to use internal URDF code\n-- ----------------------------------------\n\n-- BUILD ERRORS: These must be resolved before compiling.\n--  URDF library not found. Please install it to use with USE_EXTERNAL_URDF or <span class=\"nb\">set</span> this flag to <span class=\"nb\">false</span> to use internal URDF code\n-- END BUILD ERRORS\n\nCMake Error at CMakeLists.txt:184 <span class=\"o\">(</span>message<span class=\"o\">)</span>:\n  Errors encountered in build.  Please see the BUILD ERRORS above.\n</pre></div>\n\n\n<p>EDIT: it works for me with a normal cmake build, but I'm getting seg-faults in the tests involving urdf parsing. Still exploring.</p>", "type": "rendered"}, "created_on": "2013-12-06T02:18:30.306397+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-12-06T02:22:30.584006+00:00", "type": "pullrequest_comment", "id": 912977}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/917342.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-917342"}}, "parent": {"id": 912977, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/912977.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-912977"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "This was a spurious error on my part. I can't reproduce it. I still get seg-faults in the tests though.", "markup": "markdown", "html": "<p>This was a spurious error on my part. I can't reproduce it. I still get seg-faults in the tests though.</p>", "type": "rendered"}, "created_on": "2013-12-06T21:03:04.583163+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-12-06T21:03:04.591529+00:00", "type": "pullrequest_comment", "id": 917342}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/917359.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-917359"}}, "parent": {"id": 917342, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/917342.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-917342"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "Could the segfault be related somehow to issue #35?", "markup": "markdown", "html": "<p>Could the segfault be related somehow to issue <a href=\"#!/osrf/sdformat/issues/35/integration-tests-segfault-without-an\" rel=\"nofollow\" title=\"Integration tests segfault without an installed copy of sdformat\" class=\"ap-connect-link\"><s>#35</s></a>?</p>", "type": "rendered"}, "created_on": "2013-12-06T21:06:47.765932+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-12-06T21:06:47.775100+00:00", "type": "pullrequest_comment", "id": 917359}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/917343.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-917343"}}, "parent": {"id": 912977, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/912977.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-912977"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "Interesting. Does it work if you make a symlink from pc files (usually under ```/usr/lib/*/pkgconfig/```) to  ```/opt/ros/hydro/lib/pkgconfig/```?", "markup": "markdown", "html": "<p>Interesting. Does it work if you make a symlink from pc files (usually under <code>/usr/lib/*/pkgconfig/</code>) to  <code>/opt/ros/hydro/lib/pkgconfig/</code>?</p>", "type": "rendered"}, "created_on": "2013-12-06T21:03:30.514788+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-12-06T21:03:30.523137+00:00", "type": "pullrequest_comment", "id": 917343}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/917356.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-917356"}}, "parent": {"id": 917343, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/917343.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-917343"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "Never mind, the pkg-config issue was a Steve problem. I cleared the build directory and then it worked fine.", "markup": "markdown", "html": "<p>Never mind, the pkg-config issue was a Steve problem. I cleared the build directory and then it worked fine.</p>", "type": "rendered"}, "created_on": "2013-12-06T21:06:04.870265+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-12-06T21:06:04.929317+00:00", "type": "pullrequest_comment", "id": 917356}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/917387.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-917387"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "I'm getting seg-faults of `INTEGRATION_fixed_joint_reduction` and `PERFORMANCE_parser_urdf` when I run `make test` with `USE_EXTERNAL_URDF=True`. In each case, I get a double free detected by glibc and a backtrace / memory map ([see here for INTEGRATION_fixed_joint_reduction](https://dl.dropboxusercontent.com/u/96660379/sdformat_pull_request_77_backtrace.txt)).\n\nThe gdb backtrace implicates the following lines:\n~~~\n#9  0x00007ffff7b2d0d6 in ReduceVisualToParent (_link=..., _groupName=..., _visual=...)\n    at /home/scpeters/ws/sdformat/src/sdformat/src/parser_urdf.cc:362\n#10 0x00007ffff7b313aa in ReduceVisualsToParent (_link=...) at /home/scpeters/ws/sdformat/src/sdformat/src/parser_urdf.cc:871\n#11 0x00007ffff7b2d5fd in ReduceFixedJoints (_root=0x872b90, _link=...)\n    at /home/scpeters/ws/sdformat/src/sdformat/src/parser_urdf.cc:389\n~~~\n[parser_urdf.cc:362](#!/osrf/sdformat/src/a5fb88dbc2ac106fa5c7ff2a57cfdf3f29d3106f/src/parser_urdf.cc?at=use_external_urdf_flag#cl-362)\n\nEDIT: I believe it is not related to #35 since the backtrace is different.", "markup": "markdown", "html": "<p>I'm getting seg-faults of <code>INTEGRATION_fixed_joint_reduction</code> and <code>PERFORMANCE_parser_urdf</code> when I run <code>make test</code> with <code>USE_EXTERNAL_URDF=True</code>. In each case, I get a double free detected by glibc and a backtrace / memory map (<a data-is-external-link=\"true\" href=\"https://dl.dropboxusercontent.com/u/96660379/sdformat_pull_request_77_backtrace.txt\" rel=\"nofollow\">see here for INTEGRATION_fixed_joint_reduction</a>).</p>\n<p>The gdb backtrace implicates the following lines:</p>\n<div class=\"codehilite\"><pre><span></span>#9  0x00007ffff7b2d0d6 in ReduceVisualToParent (_link=..., _groupName=..., _visual=...)\n    at /home/scpeters/ws/sdformat/src/sdformat/src/parser_urdf.cc:362\n#10 0x00007ffff7b313aa in ReduceVisualsToParent (_link=...) at /home/scpeters/ws/sdformat/src/sdformat/src/parser_urdf.cc:871\n#11 0x00007ffff7b2d5fd in ReduceFixedJoints (_root=0x872b90, _link=...)\n    at /home/scpeters/ws/sdformat/src/sdformat/src/parser_urdf.cc:389\n</pre></div>\n\n\n<p><a data-is-external-link=\"true\" href=\"#!/osrf/sdformat/src/a5fb88dbc2ac106fa5c7ff2a57cfdf3f29d3106f/src/parser_urdf.cc?at=use_external_urdf_flag#cl-362\" rel=\"nofollow\">parser_urdf.cc:362</a></p>\n<p>EDIT: I believe it is not related to <a href=\"#!/osrf/sdformat/issues/35/integration-tests-segfault-without-an\" rel=\"nofollow\" title=\"Integration tests segfault without an installed copy of sdformat\" class=\"ap-connect-link\"><s>#35</s></a> since the backtrace is different.</p>", "type": "rendered"}, "created_on": "2013-12-06T21:13:11.284780+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-12-09T23:34:55.565334+00:00", "type": "pullrequest_comment", "id": 917387}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/926757.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-926757"}}, "parent": {"id": 917387, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/917387.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-917387"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "It has to do with the changes at line 303 of parser_urdf.cc.  From urdf_model/link.h:\n\n\n```\n#!c++\n\n  /// if more than one visual element is specified, all visual elements are placed in this array (the visual member will be NULL)\n  std::vector<boost::shared_ptr<Visual> > visual_array;\n\n```\n\nI think what's happening is that there is only one visual element, so we should be using the \"visual\" member instead of the \"visual_array\" member.  I made the following change and the unit tests now pass:\n\n\n```\n#!c++\n\n#if USE_EXTERNAL_URDF\n  boost::shared_ptr<std::vector<UrdfVisualPtr> > viss;\n  if (_link->visual) {\n    viss.reset(new std::vector<UrdfVisualPtr> );\n    viss->push_back(_link->visual);\n  }\n  else {\n    viss = boost::shared_ptr<std::vector<UrdfVisualPtr> >(&_link->visual_array);\n  }\n#else\n  boost::shared_ptr<std::vector<UrdfVisualPtr> > viss\n    = _link->getVisuals(_groupName);\n#endif\n\n```", "markup": "markdown", "html": "<p>It has to do with the changes at line 303 of parser_urdf.cc.  From urdf_model/link.h:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"c1\">/// if more than one visual element is specified, all visual elements are placed in this array (the visual member will be NULL)</span>\n  <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">vector</span><span class=\"o\">&lt;</span><span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">Visual</span><span class=\"o\">&gt;</span> <span class=\"o\">&gt;</span> <span class=\"n\">visual_array</span><span class=\"p\">;</span>\n</pre></div>\n\n\n<p>I think what's happening is that there is only one visual element, so we should be using the \"visual\" member instead of the \"visual_array\" member.  I made the following change and the unit tests now pass:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"cp\">#if USE_EXTERNAL_URDF</span>\n  <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">vector</span><span class=\"o\">&lt;</span><span class=\"n\">UrdfVisualPtr</span><span class=\"o\">&gt;</span> <span class=\"o\">&gt;</span> <span class=\"n\">viss</span><span class=\"p\">;</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">_link</span><span class=\"o\">-&gt;</span><span class=\"n\">visual</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"n\">viss</span><span class=\"p\">.</span><span class=\"n\">reset</span><span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">vector</span><span class=\"o\">&lt;</span><span class=\"n\">UrdfVisualPtr</span><span class=\"o\">&gt;</span> <span class=\"p\">);</span>\n    <span class=\"n\">viss</span><span class=\"o\">-&gt;</span><span class=\"n\">push_back</span><span class=\"p\">(</span><span class=\"n\">_link</span><span class=\"o\">-&gt;</span><span class=\"n\">visual</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n  <span class=\"k\">else</span> <span class=\"p\">{</span>\n    <span class=\"n\">viss</span> <span class=\"o\">=</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">vector</span><span class=\"o\">&lt;</span><span class=\"n\">UrdfVisualPtr</span><span class=\"o\">&gt;</span> <span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">_link</span><span class=\"o\">-&gt;</span><span class=\"n\">visual_array</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n<span class=\"cp\">#else</span>\n  <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">vector</span><span class=\"o\">&lt;</span><span class=\"n\">UrdfVisualPtr</span><span class=\"o\">&gt;</span> <span class=\"o\">&gt;</span> <span class=\"n\">viss</span>\n    <span class=\"o\">=</span> <span class=\"n\">_link</span><span class=\"o\">-&gt;</span><span class=\"n\">getVisuals</span><span class=\"p\">(</span><span class=\"n\">_groupName</span><span class=\"p\">);</span>\n<span class=\"cp\">#endif</span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-12-10T02:11:57.353335+00:00", "user": {"display_name": "Rich Mattes", "uuid": "{1ef6f3dd-b8db-412b-94e9-e430e7aafd23}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ef6f3dd-b8db-412b-94e9-e430e7aafd23%7D"}, "html": {"href": "https://bitbucket.org/%7B1ef6f3dd-b8db-412b-94e9-e430e7aafd23%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d431baafeedf5d8921cb50a3c9902e16d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRM-0.png"}}, "nickname": "richmattes", "type": "user", "account_id": "557058:a38935e3-9a08-40d9-917a-ff19973e58df"}, "updated_on": "2013-12-10T02:11:57.465447+00:00", "type": "pullrequest_comment", "id": 926757}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/932848.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-932848"}}, "parent": {"id": 926757, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/926757.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-926757"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "Thanks @rmattes I've added your patch in 4aaaef9 in branch use_external_urdf_flag_scpeters, though I may just merge it in to this branch.\n\nEDIT: I merged it in myself in 56cfb41.", "markup": "markdown", "html": "<p>Thanks @rmattes I've added your patch in <a href=\"#!/osrf/sdformat/commits/4aaaef9\" rel=\"nofollow\" class=\"ap-connect-link\">4aaaef9</a> in branch use_external_urdf_flag_scpeters, though I may just merge it in to this branch.</p>\n<p>EDIT: I merged it in myself in <a href=\"#!/osrf/sdformat/commits/56cfb41\" rel=\"nofollow\" class=\"ap-connect-link\">56cfb41</a>.</p>", "type": "rendered"}, "created_on": "2013-12-10T23:37:26.674021+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-12-10T23:39:44.526375+00:00", "type": "pullrequest_comment", "id": 932848}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/933115.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-933115"}}, "parent": {"id": 932848, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77/comments/932848.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77/_/diff#comment-932848"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 77, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/77.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/77"}}, "title": "Support to use external URDF"}, "content": {"raw": "Thanks @rmattes for the patch and @scpeters for the spotting and merging.\n\nI would say that situation respect our internal copy of urdfdom is somewhat dangerous. I'm working to have urdfdom library ready in Debian as soon as possible.\n\nI'm not a fan of having this kind of duplicate code paths handle by the preprocessor in presence of different versions of the library, issue #42 should temporary mitigate some of these problems.", "markup": "markdown", "html": "<p>Thanks @rmattes for the patch and @scpeters for the spotting and merging.</p>\n<p>I would say that situation respect our internal copy of urdfdom is somewhat dangerous. I'm working to have urdfdom library ready in Debian as soon as possible.</p>\n<p>I'm not a fan of having this kind of duplicate code paths handle by the preprocessor in presence of different versions of the library, issue <a href=\"#!/osrf/sdformat/issues/42/update-the-internal-copy-of-urdf-to-get-in\" rel=\"nofollow\" title=\"Update the internal copy of urdf to get in sync with upstream\" class=\"ap-connect-link\"><s>#42</s></a> should temporary mitigate some of these problems.</p>", "type": "rendered"}, "created_on": "2013-12-11T00:48:48.438005+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-12-11T00:48:48.457557+00:00", "type": "pullrequest_comment", "id": 933115}], "page": 1, "size": 15}