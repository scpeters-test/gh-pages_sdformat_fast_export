{"rendered": {"description": {"raw": "This branch allows SDFormat6 to build and test on Windows. There are only two changes that are required in this repo:\r\n\r\n1. We should not copy the `ignition-math4.dll` into the test directories. Instead, that `.dll` should be visible from the `PATH` variable. This practice has already been successfully adopted by `ign-common`, `ign-msgs`, and `ign-transport`. However, this will require additional changes to the `configure.bat` file of `sdformat` as well as the `release-tools` script, which is why this PR is marked as WIP. Nevertheless, removing the code that tries to copy the `.dll` is immediately necessary, because the `${IGNITION-MATH_LIBRARIES}` variable now contains a target name instead of a library path, so that part of the script results in a configuration error if it's left alone.\r\n\r\n2. On Windows, elevated privileges are needed in order to create symlinks. Our CI doesn't catch this because it's apparently running with elevated privileges, but users should not have to run in Administrative mode in order for the tests to succeed, so I've simply disabled those tests for MSVC. In `ign-common` we [added a cmake option](https://bitbucket.org/ignitionrobotics/ign-common/src/1fec1f9c5969567b54d2d0234d429035a1b47888/CMakeLists.txt?at=default&fileviewer=file-view-default#CMakeLists.txt-25) to toggle those tests. If we care enough about testing the creation of symlinks on Windows, I can add that option to sdformat as well, but it doesn't strike me as very important.\r\n\r\nThe windows CI changes require [release-tools PR 593](https://bitbucket.org/osrf/release-tools/pull-requests/593/sdformat-windows-build-use-vs2017-and-ign/diff), which should be merged at the same time as this one.", "markup": "markdown", "html": "<p>This branch allows SDFormat6 to build and test on Windows. There are only two changes that are required in this repo:</p>\n<ol>\n<li>\n<p>We should not copy the <code>ignition-math4.dll</code> into the test directories. Instead, that <code>.dll</code> should be visible from the <code>PATH</code> variable. This practice has already been successfully adopted by <code>ign-common</code>, <code>ign-msgs</code>, and <code>ign-transport</code>. However, this will require additional changes to the <code>configure.bat</code> file of <code>sdformat</code> as well as the <code>release-tools</code> script, which is why this PR is marked as WIP. Nevertheless, removing the code that tries to copy the <code>.dll</code> is immediately necessary, because the <code>${IGNITION-MATH_LIBRARIES}</code> variable now contains a target name instead of a library path, so that part of the script results in a configuration error if it's left alone.</p>\n</li>\n<li>\n<p>On Windows, elevated privileges are needed in order to create symlinks. Our CI doesn't catch this because it's apparently running with elevated privileges, but users should not have to run in Administrative mode in order for the tests to succeed, so I've simply disabled those tests for MSVC. In <code>ign-common</code> we <a data-is-external-link=\"true\" href=\"https://bitbucket.org/ignitionrobotics/ign-common/src/1fec1f9c5969567b54d2d0234d429035a1b47888/CMakeLists.txt?at=default&amp;fileviewer=file-view-default#CMakeLists.txt-25\" rel=\"nofollow\">added a cmake option</a> to toggle those tests. If we care enough about testing the creation of symlinks on Windows, I can add that option to sdformat as well, but it doesn't strike me as very important.</p>\n</li>\n</ol>\n<p>The windows CI changes require <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/release-tools/pull-requests/593/sdformat-windows-build-use-vs2017-and-ign/diff\" rel=\"nofollow\">release-tools PR 593</a>, which should be merged at the same time as this one.</p>", "type": "rendered"}, "title": {"raw": "Fix Windows support for SDFormat6", "markup": "markdown", "html": "<p>Fix Windows support for SDFormat6</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This branch allows SDFormat6 to build and test on Windows. There are only two changes that are required in this repo:\r\n\r\n1. We should not copy the `ignition-math4.dll` into the test directories. Instead, that `.dll` should be visible from the `PATH` variable. This practice has already been successfully adopted by `ign-common`, `ign-msgs`, and `ign-transport`. However, this will require additional changes to the `configure.bat` file of `sdformat` as well as the `release-tools` script, which is why this PR is marked as WIP. Nevertheless, removing the code that tries to copy the `.dll` is immediately necessary, because the `${IGNITION-MATH_LIBRARIES}` variable now contains a target name instead of a library path, so that part of the script results in a configuration error if it's left alone.\r\n\r\n2. On Windows, elevated privileges are needed in order to create symlinks. Our CI doesn't catch this because it's apparently running with elevated privileges, but users should not have to run in Administrative mode in order for the tests to succeed, so I've simply disabled those tests for MSVC. In `ign-common` we [added a cmake option](https://bitbucket.org/ignitionrobotics/ign-common/src/1fec1f9c5969567b54d2d0234d429035a1b47888/CMakeLists.txt?at=default&fileviewer=file-view-default#CMakeLists.txt-25) to toggle those tests. If we care enough about testing the creation of symlinks on Windows, I can add that option to sdformat as well, but it doesn't strike me as very important.\r\n\r\nThe windows CI changes require [release-tools PR 593](https://bitbucket.org/osrf/release-tools/pull-requests/593/sdformat-windows-build-use-vs2017-and-ign/diff), which should be merged at the same time as this one.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/pullrequests/401/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/diffstat/osrf/sdformat:c3b29c9e5637%0D5a9a33e262cd?from_pullrequest_id=401"}, "commits": {"href": "data/repositories/osrf/sdformat/pullrequests/401/commits.json"}, "self": {"href": "data/repositories/osrf/sdformat/pullrequests/401.json"}, "comments": {"href": "data/repositories/osrf/sdformat/pullrequests/401/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/pullrequests/401/merge"}, "html": {"href": "#!/osrf/sdformat/pull-requests/401"}, "activity": {"href": "data/repositories/osrf/sdformat/pullrequests/401/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/diff/osrf/sdformat:c3b29c9e5637%0D5a9a33e262cd?from_pullrequest_id=401"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/pullrequests/401/approve"}, "statuses": {"href": "data/repositories/osrf/sdformat/pullrequests/401/statuses_page=1.json"}}, "title": "Fix Windows support for SDFormat6", "close_source_branch": true, "reviewers": [], "id": 401, "destination": {"commit": {"hash": "5a9a33e262cd", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/5a9a33e262cd.json"}, "html": {"href": "#!/osrf/sdformat/commits/5a9a33e262cd"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6"}}, "created_on": "2018-01-25T00:01:51.112198+00:00", "summary": {"raw": "This branch allows SDFormat6 to build and test on Windows. There are only two changes that are required in this repo:\r\n\r\n1. We should not copy the `ignition-math4.dll` into the test directories. Instead, that `.dll` should be visible from the `PATH` variable. This practice has already been successfully adopted by `ign-common`, `ign-msgs`, and `ign-transport`. However, this will require additional changes to the `configure.bat` file of `sdformat` as well as the `release-tools` script, which is why this PR is marked as WIP. Nevertheless, removing the code that tries to copy the `.dll` is immediately necessary, because the `${IGNITION-MATH_LIBRARIES}` variable now contains a target name instead of a library path, so that part of the script results in a configuration error if it's left alone.\r\n\r\n2. On Windows, elevated privileges are needed in order to create symlinks. Our CI doesn't catch this because it's apparently running with elevated privileges, but users should not have to run in Administrative mode in order for the tests to succeed, so I've simply disabled those tests for MSVC. In `ign-common` we [added a cmake option](https://bitbucket.org/ignitionrobotics/ign-common/src/1fec1f9c5969567b54d2d0234d429035a1b47888/CMakeLists.txt?at=default&fileviewer=file-view-default#CMakeLists.txt-25) to toggle those tests. If we care enough about testing the creation of symlinks on Windows, I can add that option to sdformat as well, but it doesn't strike me as very important.\r\n\r\nThe windows CI changes require [release-tools PR 593](https://bitbucket.org/osrf/release-tools/pull-requests/593/sdformat-windows-build-use-vs2017-and-ign/diff), which should be merged at the same time as this one.", "markup": "markdown", "html": "<p>This branch allows SDFormat6 to build and test on Windows. There are only two changes that are required in this repo:</p>\n<ol>\n<li>\n<p>We should not copy the <code>ignition-math4.dll</code> into the test directories. Instead, that <code>.dll</code> should be visible from the <code>PATH</code> variable. This practice has already been successfully adopted by <code>ign-common</code>, <code>ign-msgs</code>, and <code>ign-transport</code>. However, this will require additional changes to the <code>configure.bat</code> file of <code>sdformat</code> as well as the <code>release-tools</code> script, which is why this PR is marked as WIP. Nevertheless, removing the code that tries to copy the <code>.dll</code> is immediately necessary, because the <code>${IGNITION-MATH_LIBRARIES}</code> variable now contains a target name instead of a library path, so that part of the script results in a configuration error if it's left alone.</p>\n</li>\n<li>\n<p>On Windows, elevated privileges are needed in order to create symlinks. Our CI doesn't catch this because it's apparently running with elevated privileges, but users should not have to run in Administrative mode in order for the tests to succeed, so I've simply disabled those tests for MSVC. In <code>ign-common</code> we <a data-is-external-link=\"true\" href=\"https://bitbucket.org/ignitionrobotics/ign-common/src/1fec1f9c5969567b54d2d0234d429035a1b47888/CMakeLists.txt?at=default&amp;fileviewer=file-view-default#CMakeLists.txt-25\" rel=\"nofollow\">added a cmake option</a> to toggle those tests. If we care enough about testing the creation of symlinks on Windows, I can add that option to sdformat as well, but it doesn't strike me as very important.</p>\n</li>\n</ol>\n<p>The windows CI changes require <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/release-tools/pull-requests/593/sdformat-windows-build-use-vs2017-and-ign/diff\" rel=\"nofollow\">release-tools PR 593</a>, which should be merged at the same time as this one.</p>", "type": "rendered"}, "source": {"commit": {"hash": "7bcfccb0dcdd", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/7bcfccb0dcdd.json"}, "html": {"href": "#!/osrf/sdformat/commits/7bcfccb0dcdd"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6-windows_fixes"}}, "comment_count": 13, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2018-01-30T00:17:00.056343+00:00", "type": "participant", "approved": false, "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}}, {"role": "PARTICIPANT", "participated_on": "2018-05-25T08:17:38.408632+00:00", "type": "participant", "approved": true, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2018-02-06T01:04:31.986767+00:00", "type": "participant", "approved": false, "user": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}}, {"role": "PARTICIPANT", "participated_on": "2018-02-06T01:23:02.995617+00:00", "type": "participant", "approved": false, "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}}, {"role": "PARTICIPANT", "participated_on": "2018-05-25T14:49:38.715897+00:00", "type": "participant", "approved": true, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}], "reason": "", "updated_on": "2018-05-25T17:44:15.977652+00:00", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "merge_commit": {"hash": "c3b29c9e5637", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/c3b29c9e5637.json"}, "html": {"href": "#!/osrf/sdformat/commits/c3b29c9e5637"}}}, "closed_by": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}