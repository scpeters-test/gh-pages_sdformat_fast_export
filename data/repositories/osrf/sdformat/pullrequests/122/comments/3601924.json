{"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/122/comments/3601924.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/122/_/diff#comment-3601924"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 122, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/122.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/122"}}, "title": "Update internal urdfdom to 0.3.0 version"}, "content": {"raw": "I was reviewing what is generating the difference in collision tags generation. I would say that it has nothing to do with the Reduced functions we patch in the latest commits but with the `CreateCollisions` and `CreateVisuals` functions. When using 0.3.0 the [#else from the preprocessor checking](#!/osrf/sdformat/src/43ce84e3a7e5942cf1094ea952cfaccff1aa2a63/src/parser_urdf.cc?at=update_urdfdom_0.3_jrivero#cl-2365) is running a simplifier version of code which does not have the concept of group. That makes the code to call less times the CreateCollision function, so I understand that should be expected to have less collision tags on 0.3.0.\n\nSome logs from `.sdformat/sdformat.log`:\n\nVersion 0.2.10\n```\n    2 Dbg [parser_urdf.cc:2184] [left_palm] has no parent joint \n    3 Dbg [parser_urdf.cc:2230] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    4 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other] \n    5 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    6 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    7 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    8 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    9 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm] new link name [left_palm]\n   10 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_1] new link name [left_palm]\n   11 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_2] new link name [left_palm]\n   12 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_3] new link name [left_palm]\n   13 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_4] new link name [left_palm]\n   14 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_5] new link name [left_palm]\n   15 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_6] new link name [left_palm]\n```\n\nVersion 0.3.0\n\n```\n   2 Dbg [parser_urdf.cc:2258] [left_palm] has no parent joint\n   3 Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link      [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collisio     n for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link nam     e [left_palm] new link name [left_palm]\n   4 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_1] new link name [left_palm]\n   5 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_2] new link name [left_palm]\n   6 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_3] new link name [left_palm]\n   7 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_4] new link name [left_palm]\n   8 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_5] new link name [left_palm]\n   9 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_6] new link name [left_palm]\n```\n\nThe point @scpeters is: how is this affecting functionality?", "markup": "markdown", "html": "<p>I was reviewing what is generating the difference in collision tags generation. I would say that it has nothing to do with the Reduced functions we patch in the latest commits but with the <code>CreateCollisions</code> and <code>CreateVisuals</code> functions. When using 0.3.0 the <a data-is-external-link=\"true\" href=\"#!/osrf/sdformat/src/43ce84e3a7e5942cf1094ea952cfaccff1aa2a63/src/parser_urdf.cc?at=update_urdfdom_0.3_jrivero#cl-2365\" rel=\"nofollow\">#else from the preprocessor checking</a> is running a simplifier version of code which does not have the concept of group. That makes the code to call less times the CreateCollision function, so I understand that should be expected to have less collision tags on 0.3.0.</p>\n<p>Some logs from <code>.sdformat/sdformat.log</code>:</p>\n<p>Version 0.2.10</p>\n<div class=\"codehilite\"><pre><span></span>    2 Dbg [parser_urdf.cc:2184] [left_palm] has no parent joint \n    3 Dbg [parser_urdf.cc:2230] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    4 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other] \n    5 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    6 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    7 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    8 Dbg [parser_urdf.cc:2271] adding collisions from collision group [other]\n    9 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm] new link name [left_palm]\n   10 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_1] new link name [left_palm]\n   11 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_2] new link name [left_palm]\n   12 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_3] new link name [left_palm]\n   13 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_4] new link name [left_palm]\n   14 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_5] new link name [left_palm]\n   15 Dbg [parser_urdf.cc:2314] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2588] original link name [left_palm_6] new link name [left_palm]\n</pre></div>\n\n\n<p>Version 0.3.0</p>\n<div class=\"codehilite\"><pre><span></span>   2 Dbg [parser_urdf.cc:2258] [left_palm] has no parent joint\n   3 Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link      [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collisio     n for link [left_palm]Dbg [parser_urdf.cc:2372] creating default collision for link [left_palm]Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link nam     e [left_palm] new link name [left_palm]\n   4 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_1] new link name [left_palm]\n   5 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_2] new link name [left_palm]\n   6 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_3] new link name [left_palm]\n   7 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_4] new link name [left_palm]\n   8 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_5] new link name [left_palm]\n   9 Dbg [parser_urdf.cc:2484] creating default visual for link [left_palm]Dbg [parser_urdf.cc:2718] original link name [left_palm_6] new link name [left_palm]\n</pre></div>\n\n\n<p>The point @scpeters is: how is this affecting functionality?</p>", "type": "rendered"}, "created_on": "2014-10-24T23:08:29.225623+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2014-10-24T23:08:29.238421+00:00", "type": "pullrequest_comment", "id": 3601924}