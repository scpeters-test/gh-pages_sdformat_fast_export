{"rendered": {"description": {"raw": "The problem affects latin locales (at least es\\_\\* and pt\\_\\*) and maybe others where decimal numbers are represented using comma instead of a dot. It only happens when converting values,  related to glibc which is the one that handles locales.\r\n\r\nThe fix was easy. The test is not so easy. First, we would need a system with a latin locale already generated. The current implementation should skip the test if no latin locale is present. Second, to get the error and make gtest to fail we should parse the log file to get the output of sdferr. There is no other way of getting the return value from `Param::SetFromString` and unit testing it won't help since no conversion operation is done through glibc.\r\n\r\nTo see the test failing, remove the std::setlocale line introduced in this pull request, generate a latin locale and see the test output.\r\n", "markup": "markdown", "html": "<p>The problem affects latin locales (at least es_* and pt_*) and maybe others where decimal numbers are represented using comma instead of a dot. It only happens when converting values,  related to glibc which is the one that handles locales.</p>\n<p>The fix was easy. The test is not so easy. First, we would need a system with a latin locale already generated. The current implementation should skip the test if no latin locale is present. Second, to get the error and make gtest to fail we should parse the log file to get the output of sdferr. There is no other way of getting the return value from <code>Param::SetFromString</code> and unit testing it won't help since no conversion operation is done through glibc.</p>\n<p>To see the test failing, remove the std::setlocale line introduced in this pull request, generate a latin locale and see the test output.</p>", "type": "rendered"}, "title": {"raw": "Fix problems with latin locales and decimal numbers (issue #60)", "markup": "markdown", "html": "<p>Fix problems with latin locales and decimal numbers (issue <a href=\"#!/osrf/sdformat/issues/60/error-when-starting-gazebo-if-lc_numeric\" rel=\"nofollow\" title=\"Error when starting gazebo if LC_NUMERIC in not set to C.\" class=\"ap-connect-link\"><s>#60</s></a>)</p>", "type": "rendered"}}, "type": "pullrequest", "description": "The problem affects latin locales (at least es\\_\\* and pt\\_\\*) and maybe others where decimal numbers are represented using comma instead of a dot. It only happens when converting values,  related to glibc which is the one that handles locales.\r\n\r\nThe fix was easy. The test is not so easy. First, we would need a system with a latin locale already generated. The current implementation should skip the test if no latin locale is present. Second, to get the error and make gtest to fail we should parse the log file to get the output of sdferr. There is no other way of getting the return value from `Param::SetFromString` and unit testing it won't help since no conversion operation is done through glibc.\r\n\r\nTo see the test failing, remove the std::setlocale line introduced in this pull request, generate a latin locale and see the test output.\r\n", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/pullrequests/147/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/diffstat/osrf/sdformat:eda92f1e170d%0D253eeabfe49d?from_pullrequest_id=147"}, "commits": {"href": "data/repositories/osrf/sdformat/pullrequests/147/commits.json"}, "self": {"href": "data/repositories/osrf/sdformat/pullrequests/147.json"}, "comments": {"href": "data/repositories/osrf/sdformat/pullrequests/147/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/pullrequests/147/merge"}, "html": {"href": "#!/osrf/sdformat/pull-requests/147"}, "activity": {"href": "data/repositories/osrf/sdformat/pullrequests/147/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/diff/osrf/sdformat:eda92f1e170d%0D253eeabfe49d?from_pullrequest_id=147"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/pullrequests/147/approve"}, "statuses": {"href": "data/repositories/osrf/sdformat/pullrequests/147/statuses_page=1.json"}}, "title": "Fix problems with latin locales and decimal numbers (issue #60)", "close_source_branch": true, "reviewers": [{"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}], "id": 147, "destination": {"commit": {"hash": "253eeabfe49d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/253eeabfe49d.json"}, "html": {"href": "#!/osrf/sdformat/commits/253eeabfe49d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "default"}}, "created_on": "2015-02-28T01:42:14.569620+00:00", "summary": {"raw": "The problem affects latin locales (at least es\\_\\* and pt\\_\\*) and maybe others where decimal numbers are represented using comma instead of a dot. It only happens when converting values,  related to glibc which is the one that handles locales.\r\n\r\nThe fix was easy. The test is not so easy. First, we would need a system with a latin locale already generated. The current implementation should skip the test if no latin locale is present. Second, to get the error and make gtest to fail we should parse the log file to get the output of sdferr. There is no other way of getting the return value from `Param::SetFromString` and unit testing it won't help since no conversion operation is done through glibc.\r\n\r\nTo see the test failing, remove the std::setlocale line introduced in this pull request, generate a latin locale and see the test output.\r\n", "markup": "markdown", "html": "<p>The problem affects latin locales (at least es_* and pt_*) and maybe others where decimal numbers are represented using comma instead of a dot. It only happens when converting values,  related to glibc which is the one that handles locales.</p>\n<p>The fix was easy. The test is not so easy. First, we would need a system with a latin locale already generated. The current implementation should skip the test if no latin locale is present. Second, to get the error and make gtest to fail we should parse the log file to get the output of sdferr. There is no other way of getting the return value from <code>Param::SetFromString</code> and unit testing it won't help since no conversion operation is done through glibc.</p>\n<p>To see the test failing, remove the std::setlocale line introduced in this pull request, generate a latin locale and see the test output.</p>", "type": "rendered"}, "source": {"commit": {"hash": "9add8fd62144", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/9add8fd62144.json"}, "html": {"href": "#!/osrf/sdformat/commits/9add8fd62144"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "numeric_test_2.0"}}, "comment_count": 12, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2015-03-02T23:35:31.955474+00:00", "type": "participant", "approved": false, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, {"role": "PARTICIPANT", "participated_on": "2015-03-02T20:04:28.397958+00:00", "type": "participant", "approved": true, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2015-03-03T15:36:36.705226+00:00", "type": "participant", "approved": true, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, {"role": "REVIEWER", "participated_on": "2015-03-02T02:35:12.999802+00:00", "type": "participant", "approved": false, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}], "reason": "", "updated_on": "2015-03-04T00:35:57.864960+00:00", "author": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "merge_commit": {"hash": "eda92f1e170d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/eda92f1e170d.json"}, "html": {"href": "#!/osrf/sdformat/commits/eda92f1e170d"}}}, "closed_by": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}