{"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/94/comments/1611992.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/94/_/diff#comment-1611992"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 94, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/94.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/94"}}, "title": "Fix make test before make install"}, "content": {"raw": "It appears that:\n\n * a conversion is failing just before the test from 1.4 -> 1.5\n * `sdf/1.5/joint.sdf` defines the xml such that `use_parent_model_frame` will be inserted if it's missing and set to `false`\n * `sdf/1.5/1_4.convert` defines that `use_parent_model_frame` will be inserted if it's missing and set to `true`\n * `sdf/1.4/joint.sdf` does not make any determination about `use_parent_model_frame`\n\n\n```\n#!sh\nRunning main() from gtest_main.cc\n[==========] Running 2 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 2 tests from JointAxisFrame\n[ RUN      ] JointAxisFrame.Version_1_4_missing\nWarning [parser.cc:345] Converting a deprecated source[data-string].\nWarning [Converter.cc:59]   Version[1.4] to Version[1.5]\n  Please use the gzsdf tool to update your SDF files.\n    $ gzsdf convert [sdf_file]\nError [Converter.cc:127] Unable to convert from SDF version 1.4 to 1.5\n/home/local/RESQUARED/andrew.somerville/projects/BESS/sandbox/sdformat/test/integration/joint_axis_frame.cc:62: Failure\nValue of: axis->Get<bool>(\"use_parent_model_frame\")\n  Actual: false\nExpected: true\n[  FAILED  ] JointAxisFrame.Version_1_4_missing (41 ms)\n[ RUN      ] JointAxisFrame.Version_1_5_missing\n[       OK ] JointAxisFrame.Version_1_5_missing (41 ms)\n[----------] 2 tests from JointAxisFrame (82 ms total)\n\n[----------] Global test environment tear-down\n[==========] 2 tests from 1 test case ran. (82 ms total)\n[  PASSED  ] 1 test.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] JointAxisFrame.Version_1_4_missing\n\n 1 FAILED TEST\n```\n\nRebuilding in debug to dive into the conversion failure.", "markup": "markdown", "html": "<p>It appears that:</p>\n<ul>\n<li>a conversion is failing just before the test from 1.4 -&gt; 1.5</li>\n<li><code>sdf/1.5/joint.sdf</code> defines the xml such that <code>use_parent_model_frame</code> will be inserted if it's missing and set to <code>false</code></li>\n<li><code>sdf/1.5/1_4.convert</code> defines that <code>use_parent_model_frame</code> will be inserted if it's missing and set to <code>true</code></li>\n<li><code>sdf/1.4/joint.sdf</code> does not make any determination about <code>use_parent_model_frame</code></li>\n</ul>\n<div class=\"codehilite language-sh\"><pre><span></span>Running main<span class=\"o\">()</span> from gtest_main.cc\n<span class=\"o\">[==========]</span> Running <span class=\"m\">2</span> tests from <span class=\"m\">1</span> <span class=\"nb\">test</span> <span class=\"k\">case</span>.\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> Global <span class=\"nb\">test</span> environment set-up.\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> <span class=\"m\">2</span> tests from JointAxisFrame\n<span class=\"o\">[</span> RUN      <span class=\"o\">]</span> JointAxisFrame.Version_1_4_missing\nWarning <span class=\"o\">[</span>parser.cc:345<span class=\"o\">]</span> Converting a deprecated source<span class=\"o\">[</span>data-string<span class=\"o\">]</span>.\nWarning <span class=\"o\">[</span>Converter.cc:59<span class=\"o\">]</span>   Version<span class=\"o\">[</span><span class=\"m\">1</span>.4<span class=\"o\">]</span> to Version<span class=\"o\">[</span><span class=\"m\">1</span>.5<span class=\"o\">]</span>\n  Please use the gzsdf tool to update your SDF files.\n    $ gzsdf convert <span class=\"o\">[</span>sdf_file<span class=\"o\">]</span>\nError <span class=\"o\">[</span>Converter.cc:127<span class=\"o\">]</span> Unable to convert from SDF version <span class=\"m\">1</span>.4 to <span class=\"m\">1</span>.5\n/home/local/RESQUARED/andrew.somerville/projects/BESS/sandbox/sdformat/test/integration/joint_axis_frame.cc:62: Failure\nValue of: axis-&gt;Get&lt;bool&gt;<span class=\"o\">(</span><span class=\"s2\">&quot;use_parent_model_frame&quot;</span><span class=\"o\">)</span>\n  Actual: <span class=\"nb\">false</span>\nExpected: <span class=\"nb\">true</span>\n<span class=\"o\">[</span>  FAILED  <span class=\"o\">]</span> JointAxisFrame.Version_1_4_missing <span class=\"o\">(</span><span class=\"m\">41</span> ms<span class=\"o\">)</span>\n<span class=\"o\">[</span> RUN      <span class=\"o\">]</span> JointAxisFrame.Version_1_5_missing\n<span class=\"o\">[</span>       OK <span class=\"o\">]</span> JointAxisFrame.Version_1_5_missing <span class=\"o\">(</span><span class=\"m\">41</span> ms<span class=\"o\">)</span>\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> <span class=\"m\">2</span> tests from JointAxisFrame <span class=\"o\">(</span><span class=\"m\">82</span> ms total<span class=\"o\">)</span>\n\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> Global <span class=\"nb\">test</span> environment tear-down\n<span class=\"o\">[==========]</span> <span class=\"m\">2</span> tests from <span class=\"m\">1</span> <span class=\"nb\">test</span> <span class=\"k\">case</span> ran. <span class=\"o\">(</span><span class=\"m\">82</span> ms total<span class=\"o\">)</span>\n<span class=\"o\">[</span>  PASSED  <span class=\"o\">]</span> <span class=\"m\">1</span> test.\n<span class=\"o\">[</span>  FAILED  <span class=\"o\">]</span> <span class=\"m\">1</span> test, listed below:\n<span class=\"o\">[</span>  FAILED  <span class=\"o\">]</span> JointAxisFrame.Version_1_4_missing\n\n <span class=\"m\">1</span> FAILED TEST\n</pre></div>\n\n\n<p>Rebuilding in debug to dive into the conversion failure.</p>", "type": "rendered"}, "created_on": "2014-04-08T20:00:02.623748+00:00", "user": {"display_name": "andy_somerville", "uuid": "{09fd5d4b-d90e-4416-9a6a-2e5cd638472c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B09fd5d4b-d90e-4416-9a6a-2e5cd638472c%7D"}, "html": {"href": "https://bitbucket.org/%7B09fd5d4b-d90e-4416-9a6a-2e5cd638472c%7D/"}, "avatar": {"href": "https://bitbucket.org/account/andy_somerville/avatar/"}}, "nickname": "andy_somerville", "type": "user", "account_id": null}, "updated_on": "2014-04-08T20:03:19.879768+00:00", "type": "pullrequest_comment", "id": 1611992}