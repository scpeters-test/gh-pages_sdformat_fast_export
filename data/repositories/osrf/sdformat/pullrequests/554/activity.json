{"pagelen": 50, "values": [{"update": {"description": "It is stated numerous times in the SDF Specification files that name attributes must be unique within a certain scope. This formalizes the requirement to state that if an element's name is given by the value of its name attribute, sibling elements of the same type must have unique names. This adds a check to this effect in `ign sdf --check` and adds several helper functions to the `sdf::Element` class to support the check.\r\n\r\n* `Element::CountNamedElements(std::string)` to aid in checking for unique names\r\n\r\n* `Element::HasUniqueChildNames()` that uses `CountNamedElements()` to determine if there are any duplicate name attribute values among child elements\r\n\r\n* `GetElementTypeNames()` that returns a set of the type names of all the child elements\r\n\r\nI placed the `recursiveSameTypeUniqueNames()` function inside `ign.cc`; it can be moved to the Element class if we want to make it a part of the public API.\r\n\r\nI noticed some issues in the SDF spec documentation too that could be cleaned up, but I haven't addressed in this pull request:\r\n\r\n* [sensor name attribute](http://sdformat.org/spec?ver=1.6&elem=sensor#sensor_name): \"This name must not match another model in the model.\" (model in the model -> sensor in the parent link)\r\n* [joint name attribute](http://sdformat.org/spec?ver=1.6&elem=joint#joint_name): \"A unique name for the joint within the scope of the model.\" (scope of the model -> scope of the parent link)\r\n\r\nEDIT: fixes #216", "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names", "destination": {"commit": {"hash": "b6e5ab2378f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/b6e5ab2378f1.json"}, "html": {"href": "#!/osrf/sdformat/commits/b6e5ab2378f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6"}}, "reason": "", "source": {"commit": {"hash": "6f670f01aceb", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/6f670f01aceb.json"}, "html": {"href": "#!/osrf/sdformat/commits/6f670f01aceb"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "count_named_elements6"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-08-30T21:12:03.806519+00:00"}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"update": {"description": "It is stated numerous times in the SDF Specification files that name attributes must be unique within a certain scope. This formalizes the requirement to state that if an element's name is given by the value of its name attribute, sibling elements of the same type must have unique names. This adds a check to this effect in `ign sdf --check` and adds several helper functions to the `sdf::Element` class to support the check.\r\n\r\n* `Element::CountNamedElements(std::string)` to aid in checking for unique names\r\n\r\n* `Element::HasUniqueChildNames()` that uses `CountNamedElements()` to determine if there are any duplicate name attribute values among child elements\r\n\r\n* `GetElementTypeNames()` that returns a set of the type names of all the child elements\r\n\r\nI placed the `recursiveSameTypeUniqueNames()` function inside `ign.cc`; it can be moved to the Element class if we want to make it a part of the public API.\r\n\r\nI noticed some issues in the SDF spec documentation too that could be cleaned up, but I haven't addressed in this pull request:\r\n\r\n* [sensor name attribute](http://sdformat.org/spec?ver=1.6&elem=sensor#sensor_name): \"This name must not match another model in the model.\" (model in the model -> sensor in the parent link)\r\n* [joint name attribute](http://sdformat.org/spec?ver=1.6&elem=joint#joint_name): \"A unique name for the joint within the scope of the model.\" (scope of the model -> scope of the parent link)\r\n\r\nEDIT: fixes #216", "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names", "destination": {"commit": {"hash": "b6e5ab2378f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/b6e5ab2378f1.json"}, "html": {"href": "#!/osrf/sdformat/commits/b6e5ab2378f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6"}}, "reason": "", "source": {"commit": {"hash": "6f670f01aceb", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/6f670f01aceb.json"}, "html": {"href": "#!/osrf/sdformat/commits/6f670f01aceb"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "count_named_elements6"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-08-30T21:11:08.053469+00:00"}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/115177428.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-115177428"}}, "parent": {"id": 115027896, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/115027896.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-115027896"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "probably not\n\nwe could create a new API with a different name if we ever ran into performance problems\n\nthanks; I'll merge now", "markup": "markdown", "html": "<p>probably not</p>\n<p>we could create a new API with a different name if we ever ran into performance problems</p>\n<p>thanks; I'll merge now</p>", "type": "rendered"}, "created_on": "2019-08-30T21:09:27.107391+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-30T21:09:27.115753+00:00", "type": "pullrequest_comment", "id": 115177428}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/115027896.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-115027896"}}, "parent": {"id": 114998980, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114998980.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114998980"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "Does it matter that much for the number of elements that exist in the typical use case?", "markup": "markdown", "html": "<p>Does it matter that much for the number of elements that exist in the typical use case?</p>", "type": "rendered"}, "created_on": "2019-08-29T21:01:26.285184+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-08-29T21:01:26.297256+00:00", "type": "pullrequest_comment", "id": 115027896}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114998980.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114998980"}}, "parent": {"id": 114989169, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114989169.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114989169"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "we use unordered_map in several ignition packages, though `std::map` is much more frequent\n\nI only brought this up because it's in the public API and is harder to change once it's been released", "markup": "markdown", "html": "<p>we use unordered_map in several ignition packages, though <code>std::map</code> is much more frequent</p>\n<p>I only brought this up because it's in the public API and is harder to change once it's been released</p>", "type": "rendered"}, "created_on": "2019-08-29T16:53:22.366229+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-29T16:53:22.385409+00:00", "type": "pullrequest_comment", "id": 114998980}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114989169.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114989169"}}, "parent": {"id": 114875950, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114875950.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114875950"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "Does `unordered_map` get used much elsewhere? Only minor concern with `unordered_map` is determinism...", "markup": "markdown", "html": "<p>Does <code>unordered_map</code> get used much elsewhere? Only minor concern with <code>unordered_map</code> is determinism...</p>", "type": "rendered"}, "created_on": "2019-08-29T15:44:57.360131+00:00", "user": {"display_name": "Eric Cousineau", "uuid": "{71c9fc05-02c8-45e1-adfa-13c8ac3399dc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D"}, "html": {"href": "https://bitbucket.org/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557057:f3a199b9-5784-4964-9644-6ef224bc7dc1/28a4d748-0fd4-4038-bf3d-55a77eb73ede/128"}}, "nickname": "eacousineau", "type": "user", "account_id": "557057:f3a199b9-5784-4964-9644-6ef224bc7dc1"}, "inline": {}, "updated_on": "2019-08-29T15:44:57.517366+00:00", "type": "pullrequest_comment", "id": 114989169}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114875950.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114875950"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "now that I think about it, should we be using an `unordered_map` here instead of a `map`?", "markup": "markdown", "html": "<p>now that I think about it, should we be using an <code>unordered_map</code> here instead of a <code>map</code>?</p>", "type": "rendered"}, "created_on": "2019-08-29T04:08:32.103841+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-29T04:08:32.111231+00:00", "type": "pullrequest_comment", "id": 114875950}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114865538.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114865538"}}, "parent": {"id": 114865218, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114865218.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114865218"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "e7d307d0517d", "markup": "markdown", "html": "<p><a href=\"#!/osrf/sdformat/commits/e7d307d0517d\" rel=\"nofollow\" class=\"ap-connect-link\">e7d307d0517d</a></p>", "type": "rendered"}, "created_on": "2019-08-29T00:24:13.364675+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-29T00:24:13.377538+00:00", "type": "pullrequest_comment", "id": 114865538}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"update": {"description": "It is stated numerous times in the SDF Specification files that name attributes must be unique within a certain scope. This formalizes the requirement to state that if an element's name is given by the value of its name attribute, sibling elements of the same type must have unique names. This adds a check to this effect in `ign sdf --check` and adds several helper functions to the `sdf::Element` class to support the check.\r\n\r\n* `Element::CountNamedElements(std::string)` to aid in checking for unique names\r\n\r\n* `Element::HasUniqueChildNames()` that uses `CountNamedElements()` to determine if there are any duplicate name attribute values among child elements\r\n\r\n* `GetElementTypeNames()` that returns a set of the type names of all the child elements\r\n\r\nI placed the `recursiveSameTypeUniqueNames()` function inside `ign.cc`; it can be moved to the Element class if we want to make it a part of the public API.\r\n\r\nI noticed some issues in the SDF spec documentation too that could be cleaned up, but I haven't addressed in this pull request:\r\n\r\n* [sensor name attribute](http://sdformat.org/spec?ver=1.6&elem=sensor#sensor_name): \"This name must not match another model in the model.\" (model in the model -> sensor in the parent link)\r\n* [joint name attribute](http://sdformat.org/spec?ver=1.6&elem=joint#joint_name): \"A unique name for the joint within the scope of the model.\" (scope of the model -> scope of the parent link)\r\n\r\nEDIT: fixes #216", "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names", "destination": {"commit": {"hash": "b6e5ab2378f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/b6e5ab2378f1.json"}, "html": {"href": "#!/osrf/sdformat/commits/b6e5ab2378f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6"}}, "reason": "", "source": {"commit": {"hash": "e7d307d0517d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/e7d307d0517d.json"}, "html": {"href": "#!/osrf/sdformat/commits/e7d307d0517d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "count_named_elements6"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-08-29T00:24:02.200107+00:00"}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"approval": {"date": "2019-08-29T00:23:48.059578+00:00", "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114865507.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114865507"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "Looks good! Left some minor comments.", "markup": "markdown", "html": "<p>Looks good! Left some minor comments.</p>", "type": "rendered"}, "created_on": "2019-08-29T00:23:42.209081+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-08-29T00:23:42.215310+00:00", "type": "pullrequest_comment", "id": 114865507}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114865285.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114865285"}}, "parent": {"id": 114864366, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114864366.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114864366"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "c5ba651a7567", "markup": "markdown", "html": "<p><a href=\"#!/osrf/sdformat/commits/c5ba651a7567\" rel=\"nofollow\" class=\"ap-connect-link\">c5ba651a7567</a></p>", "type": "rendered"}, "created_on": "2019-08-29T00:19:45.720897+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-29T00:19:45.728890+00:00", "type": "pullrequest_comment", "id": 114865285}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114865281.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114865281"}}, "parent": {"id": 114864405, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114864405.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114864405"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "c5ba651a7567", "markup": "markdown", "html": "<p><a href=\"#!/osrf/sdformat/commits/c5ba651a7567\" rel=\"nofollow\" class=\"ap-connect-link\">c5ba651a7567</a></p>", "type": "rendered"}, "created_on": "2019-08-29T00:19:41.521895+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-29T00:19:41.530006+00:00", "type": "pullrequest_comment", "id": 114865281}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"update": {"description": "It is stated numerous times in the SDF Specification files that name attributes must be unique within a certain scope. This formalizes the requirement to state that if an element's name is given by the value of its name attribute, sibling elements of the same type must have unique names. This adds a check to this effect in `ign sdf --check` and adds several helper functions to the `sdf::Element` class to support the check.\r\n\r\n* `Element::CountNamedElements(std::string)` to aid in checking for unique names\r\n\r\n* `Element::HasUniqueChildNames()` that uses `CountNamedElements()` to determine if there are any duplicate name attribute values among child elements\r\n\r\n* `GetElementTypeNames()` that returns a set of the type names of all the child elements\r\n\r\nI placed the `recursiveSameTypeUniqueNames()` function inside `ign.cc`; it can be moved to the Element class if we want to make it a part of the public API.\r\n\r\nI noticed some issues in the SDF spec documentation too that could be cleaned up, but I haven't addressed in this pull request:\r\n\r\n* [sensor name attribute](http://sdformat.org/spec?ver=1.6&elem=sensor#sensor_name): \"This name must not match another model in the model.\" (model in the model -> sensor in the parent link)\r\n* [joint name attribute](http://sdformat.org/spec?ver=1.6&elem=joint#joint_name): \"A unique name for the joint within the scope of the model.\" (scope of the model -> scope of the parent link)\r\n\r\nEDIT: fixes #216", "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names", "destination": {"commit": {"hash": "b6e5ab2378f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/b6e5ab2378f1.json"}, "html": {"href": "#!/osrf/sdformat/commits/b6e5ab2378f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6"}}, "reason": "", "source": {"commit": {"hash": "c5ba651a7567", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/c5ba651a7567.json"}, "html": {"href": "#!/osrf/sdformat/commits/c5ba651a7567"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "count_named_elements6"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-08-29T00:18:57.403230+00:00"}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114865218.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114865218"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "From the test, it looks like this will return true if the element type doesn't match any of the child elements. Could you mention that in the documentation?", "markup": "markdown", "html": "<p>From the test, it looks like this will return true if the element type doesn't match any of the child elements. Could you mention that in the documentation?</p>", "type": "rendered"}, "created_on": "2019-08-29T00:18:19.552481+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-08-29T00:18:19.560703+00:00", "type": "pullrequest_comment", "id": 114865218}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114864405.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114864405"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "nit: `std::set::insert` already checks if the element exists before inserting.", "markup": "markdown", "html": "<p>nit: <code>std::set::insert</code> already checks if the element exists before inserting.</p>", "type": "rendered"}, "created_on": "2019-08-29T00:03:37.457770+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-08-29T00:03:37.463856+00:00", "type": "pullrequest_comment", "id": 114864405}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114864366.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114864366"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "nit: unnecessary copy. Consider `const auto &iter`.", "markup": "markdown", "html": "<p>nit: unnecessary copy. Consider <code>const auto &amp;iter</code>.</p>", "type": "rendered"}, "created_on": "2019-08-29T00:02:44.967519+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-08-29T00:02:44.976525+00:00", "type": "pullrequest_comment", "id": 114864366}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/114168505.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-114168505"}}, "parent": {"id": 113587519, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113587519.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113587519"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "it's a public function; the name is a little funny, but its functionality is equivalent to `Element::GetFirstElement(const std::string &)`", "markup": "markdown", "html": "<p>it's a public function; the name is a little funny, but its functionality is equivalent to <code>Element::GetFirstElement(const std::string &amp;)</code></p>", "type": "rendered"}, "created_on": "2019-08-23T00:02:05.147710+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-23T00:02:05.157196+00:00", "type": "pullrequest_comment", "id": 114168505}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113587519.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113587519"}}, "parent": {"id": 113382568, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113382568.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113382568"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "Hm... That also smells kinda funny... The name `` `GetElementImpl`` seems like a private / implementation method - is it?", "markup": "markdown", "html": "<p>Hm... That also smells kinda funny... The name <code>`GetElementImpl</code> seems like a private / implementation method - is it?</p>", "type": "rendered"}, "created_on": "2019-08-19T15:16:47.623540+00:00", "user": {"display_name": "Eric Cousineau", "uuid": "{71c9fc05-02c8-45e1-adfa-13c8ac3399dc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D"}, "html": {"href": "https://bitbucket.org/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557057:f3a199b9-5784-4964-9644-6ef224bc7dc1/28a4d748-0fd4-4038-bf3d-55a77eb73ede/128"}}, "nickname": "eacousineau", "type": "user", "account_id": "557057:f3a199b9-5784-4964-9644-6ef224bc7dc1"}, "inline": {}, "updated_on": "2019-08-19T15:16:54.286423+00:00", "type": "pullrequest_comment", "id": 113587519}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113382568.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113382568"}}, "parent": {"id": 113380163, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113380163.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113380163"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "see 8b9249c854a2", "markup": "markdown", "html": "<p>see <a href=\"#!/osrf/sdformat/commits/8b9249c854a2\" rel=\"nofollow\" class=\"ap-connect-link\">8b9249c854a2</a></p>", "type": "rendered"}, "created_on": "2019-08-16T12:04:51.924309+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-16T12:04:51.941466+00:00", "type": "pullrequest_comment", "id": 113382568}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"update": {"description": "It is stated numerous times in the SDF Specification files that name attributes must be unique within a certain scope. This formalizes the requirement to state that if an element's name is given by the value of its name attribute, sibling elements of the same type must have unique names. This adds a check to this effect in `ign sdf --check` and adds several helper functions to the `sdf::Element` class to support the check.\r\n\r\n* `Element::CountNamedElements(std::string)` to aid in checking for unique names\r\n\r\n* `Element::HasUniqueChildNames()` that uses `CountNamedElements()` to determine if there are any duplicate name attribute values among child elements\r\n\r\n* `GetElementTypeNames()` that returns a set of the type names of all the child elements\r\n\r\nI placed the `recursiveSameTypeUniqueNames()` function inside `ign.cc`; it can be moved to the Element class if we want to make it a part of the public API.\r\n\r\nI noticed some issues in the SDF spec documentation too that could be cleaned up, but I haven't addressed in this pull request:\r\n\r\n* [sensor name attribute](http://sdformat.org/spec?ver=1.6&elem=sensor#sensor_name): \"This name must not match another model in the model.\" (model in the model -> sensor in the parent link)\r\n* [joint name attribute](http://sdformat.org/spec?ver=1.6&elem=joint#joint_name): \"A unique name for the joint within the scope of the model.\" (scope of the model -> scope of the parent link)\r\n\r\nEDIT: fixes #216", "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names", "destination": {"commit": {"hash": "b6e5ab2378f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/b6e5ab2378f1.json"}, "html": {"href": "#!/osrf/sdformat/commits/b6e5ab2378f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6"}}, "reason": "", "source": {"commit": {"hash": "8b9249c854a2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/8b9249c854a2.json"}, "html": {"href": "#!/osrf/sdformat/commits/8b9249c854a2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "count_named_elements6"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-08-16T12:04:31.829970+00:00"}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113380163.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113380163"}}, "parent": {"id": 113376755, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113376755.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113376755"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "actually, the `GetElementImpl` function should do it", "markup": "markdown", "html": "<p>actually, the <code>GetElementImpl</code> function should do it</p>", "type": "rendered"}, "created_on": "2019-08-16T11:45:10.296462+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-16T11:45:10.308742+00:00", "type": "pullrequest_comment", "id": 113380163}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113376755.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113376755"}}, "parent": {"id": 113144230, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113144230.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113144230"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "no, we don't have that API, though it would be nice to add it\n\nthe more commonly used `GetElement(_type)` is not `const`, and should more accurately be called `GetOrCreateElement(_type)`", "markup": "markdown", "html": "<p>no, we don't have that API, though it would be nice to add it</p>\n<p>the more commonly used <code>GetElement(_type)</code> is not <code>const</code>, and should more accurately be called <code>GetOrCreateElement(_type)</code></p>", "type": "rendered"}, "created_on": "2019-08-16T11:16:06.553206+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-16T11:16:06.566956+00:00", "type": "pullrequest_comment", "id": 113376755}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113376588.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113376588"}}, "parent": {"id": 113144051, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113144051.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113144051"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "we are using `std::optional` in ign-gazebo but haven't started using it yet in sdformat", "markup": "markdown", "html": "<p>we are using <code>std::optional</code> in ign-gazebo but haven't started using it yet in sdformat</p>", "type": "rendered"}, "created_on": "2019-08-16T11:14:55.747016+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-16T11:14:55.762227+00:00", "type": "pullrequest_comment", "id": 113376588}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113144287.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113144287"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "Reviewed at a high level, with some minor drive-by nits, looks good!", "markup": "markdown", "html": "<p>Reviewed at a high level, with some minor drive-by nits, looks good!</p>", "type": "rendered"}, "created_on": "2019-08-14T17:03:22.432020+00:00", "user": {"display_name": "Eric Cousineau", "uuid": "{71c9fc05-02c8-45e1-adfa-13c8ac3399dc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D"}, "html": {"href": "https://bitbucket.org/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557057:f3a199b9-5784-4964-9644-6ef224bc7dc1/28a4d748-0fd4-4038-bf3d-55a77eb73ede/128"}}, "nickname": "eacousineau", "type": "user", "account_id": "557057:f3a199b9-5784-4964-9644-6ef224bc7dc1"}, "updated_on": "2019-08-14T17:03:22.530000+00:00", "type": "pullrequest_comment", "id": 113144287}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"approval": {"date": "2019-08-14T17:03:06.038940+00:00", "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "user": {"display_name": "Eric Cousineau", "uuid": "{71c9fc05-02c8-45e1-adfa-13c8ac3399dc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D"}, "html": {"href": "https://bitbucket.org/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557057:f3a199b9-5784-4964-9644-6ef224bc7dc1/28a4d748-0fd4-4038-bf3d-55a77eb73ede/128"}}, "nickname": "eacousineau", "type": "user", "account_id": "557057:f3a199b9-5784-4964-9644-6ef224bc7dc1"}}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113144230.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113144230"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "nit This smells kind of funny. Is there no method for saying `GetFirstElement(_type)`?", "markup": "markdown", "html": "<p>nit This smells kind of funny. Is there no method for saying <code>GetFirstElement(_type)</code>?</p>", "type": "rendered"}, "created_on": "2019-08-14T17:02:56.276721+00:00", "user": {"display_name": "Eric Cousineau", "uuid": "{71c9fc05-02c8-45e1-adfa-13c8ac3399dc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D"}, "html": {"href": "https://bitbucket.org/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557057:f3a199b9-5784-4964-9644-6ef224bc7dc1/28a4d748-0fd4-4038-bf3d-55a77eb73ede/128"}}, "nickname": "eacousineau", "type": "user", "account_id": "557057:f3a199b9-5784-4964-9644-6ef224bc7dc1"}, "inline": {}, "updated_on": "2019-08-14T17:02:56.533837+00:00", "type": "pullrequest_comment", "id": 113144230}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113144051.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113144051"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "BTW Have y'all considered the usage of `optional<>` in future code? \\(is it already being used?\\)", "markup": "markdown", "html": "<p>BTW Have y'all considered the usage of <code>optional&lt;&gt;</code> in future code? (is it already being used?)</p>", "type": "rendered"}, "created_on": "2019-08-14T17:01:27.044364+00:00", "user": {"display_name": "Eric Cousineau", "uuid": "{71c9fc05-02c8-45e1-adfa-13c8ac3399dc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D"}, "html": {"href": "https://bitbucket.org/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557057:f3a199b9-5784-4964-9644-6ef224bc7dc1/28a4d748-0fd4-4038-bf3d-55a77eb73ede/128"}}, "nickname": "eacousineau", "type": "user", "account_id": "557057:f3a199b9-5784-4964-9644-6ef224bc7dc1"}, "inline": {}, "updated_on": "2019-08-14T17:01:27.148982+00:00", "type": "pullrequest_comment", "id": 113144051}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"update": {"description": "It is stated numerous times in the SDF Specification files that name attributes must be unique within a certain scope. This formalizes the requirement to state that if an element's name is given by the value of its name attribute, sibling elements of the same type must have unique names. This adds a check to this effect in `ign sdf --check` and adds several helper functions to the `sdf::Element` class to support the check.\r\n\r\n* `Element::CountNamedElements(std::string)` to aid in checking for unique names\r\n\r\n* `Element::HasUniqueChildNames()` that uses `CountNamedElements()` to determine if there are any duplicate name attribute values among child elements\r\n\r\n* `GetElementTypeNames()` that returns a set of the type names of all the child elements\r\n\r\nI placed the `recursiveSameTypeUniqueNames()` function inside `ign.cc`; it can be moved to the Element class if we want to make it a part of the public API.\r\n\r\nI noticed some issues in the SDF spec documentation too that could be cleaned up, but I haven't addressed in this pull request:\r\n\r\n* [sensor name attribute](http://sdformat.org/spec?ver=1.6&elem=sensor#sensor_name): \"This name must not match another model in the model.\" (model in the model -> sensor in the parent link)\r\n* [joint name attribute](http://sdformat.org/spec?ver=1.6&elem=joint#joint_name): \"A unique name for the joint within the scope of the model.\" (scope of the model -> scope of the parent link)\r\n\r\nEDIT: fixes #216", "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names", "destination": {"commit": {"hash": "b6e5ab2378f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/b6e5ab2378f1.json"}, "html": {"href": "#!/osrf/sdformat/commits/b6e5ab2378f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6"}}, "reason": "", "source": {"commit": {"hash": "634ad4858e5d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/634ad4858e5d.json"}, "html": {"href": "#!/osrf/sdformat/commits/634ad4858e5d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "count_named_elements6"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-08-14T00:05:22.643023+00:00"}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113014932.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113014932"}}, "parent": {"id": 113014226, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113014226.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113014226"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "yes, the sdf 1.7 spec will target `sdf7`. I wrote this pull request to address #216, which is that the existing parser does not check its own naming rules", "markup": "markdown", "html": "<p>yes, the sdf 1.7 spec will target <code>sdf7</code>. I wrote this pull request to address <a href=\"#!/osrf/sdformat/issues/216/check-the-sdf-elements-have-unique-names\" rel=\"nofollow\" title=\"Check the SDF elements have unique names when parsing\" class=\"ap-connect-link\">#216</a>, which is that the existing parser does not check its own naming rules</p>", "type": "rendered"}, "created_on": "2019-08-14T00:05:08.034454+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-08-14T00:05:08.044632+00:00", "type": "pullrequest_comment", "id": 113014932}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113014297.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113014297"}}, "parent": {"id": 113014226, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113014226.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113014226"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "From reading Asana, the reason is that `libsdformat-6` is used in the current version of OSRC Gazebo?", "markup": "markdown", "html": "<p>From reading Asana, the reason is that <code>libsdformat-6</code> is used in the current version of OSRC Gazebo?</p>", "type": "rendered"}, "created_on": "2019-08-13T23:54:02.044523+00:00", "user": {"display_name": "Eric Cousineau", "uuid": "{71c9fc05-02c8-45e1-adfa-13c8ac3399dc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D"}, "html": {"href": "https://bitbucket.org/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557057:f3a199b9-5784-4964-9644-6ef224bc7dc1/28a4d748-0fd4-4038-bf3d-55a77eb73ede/128"}}, "nickname": "eacousineau", "type": "user", "account_id": "557057:f3a199b9-5784-4964-9644-6ef224bc7dc1"}, "updated_on": "2019-08-13T23:54:02.189675+00:00", "type": "pullrequest_comment", "id": 113014297}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554/comments/113014226.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554/_/diff#comment-113014226"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}, "content": {"raw": "Er, sorry: Just so I have it straight in my head, is `libsdformat-7` what we're ultimately going to target? \\(to exapnd, `libsdformat-7 ==> OSRC Gazebo`, `libsdformat-8 ==> ignition-gazebo`\\)\n\nIf so, can I ask why this is targeting `sdf6`?", "markup": "markdown", "html": "<p>Er, sorry: Just so I have it straight in my head, is <code>libsdformat-7</code> what we're ultimately going to target? (to exapnd, <code>libsdformat-7 ==&gt; OSRC Gazebo</code>, <code>libsdformat-8 ==&gt; ignition-gazebo</code>)</p>\n<p>If so, can I ask why this is targeting <code>sdf6</code>?</p>", "type": "rendered"}, "created_on": "2019-08-13T23:52:45.399550+00:00", "user": {"display_name": "Eric Cousineau", "uuid": "{71c9fc05-02c8-45e1-adfa-13c8ac3399dc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D"}, "html": {"href": "https://bitbucket.org/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557057:f3a199b9-5784-4964-9644-6ef224bc7dc1/28a4d748-0fd4-4038-bf3d-55a77eb73ede/128"}}, "nickname": "eacousineau", "type": "user", "account_id": "557057:f3a199b9-5784-4964-9644-6ef224bc7dc1"}, "updated_on": "2019-08-13T23:52:45.655373+00:00", "type": "pullrequest_comment", "id": 113014226}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"update": {"description": "It is stated numerous times in the SDF Specification files that name attributes must be unique within a certain scope. This formalizes the requirement to state that if an element's name is given by the value of its name attribute, sibling elements of the same type must have unique names. This adds a check to this effect in `ign sdf --check` and adds several helper functions to the `sdf::Element` class to support the check.\r\n\r\n* `Element::CountNamedElements(std::string)` to aid in checking for unique names\r\n\r\n* `Element::HasUniqueChildNames()` that uses `CountNamedElements()` to determine if there are any duplicate name attribute values among child elements\r\n\r\n* `GetElementTypeNames()` that returns a set of the type names of all the child elements\r\n\r\nI placed the `recursiveSameTypeUniqueNames()` function inside `ign.cc`; it can be moved to the Element class if we want to make it a part of the public API.\r\n\r\nI noticed some issues in the SDF spec documentation too that could be cleaned up, but I haven't addressed in this pull request:\r\n\r\n* [sensor name attribute](http://sdformat.org/spec?ver=1.6&elem=sensor#sensor_name): \"This name must not match another model in the model.\" (model in the model -> sensor in the parent link)\r\n* [joint name attribute](http://sdformat.org/spec?ver=1.6&elem=joint#joint_name): \"A unique name for the joint within the scope of the model.\" (scope of the model -> scope of the parent link)", "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names", "destination": {"commit": {"hash": "b6e5ab2378f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/b6e5ab2378f1.json"}, "html": {"href": "#!/osrf/sdformat/commits/b6e5ab2378f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6"}}, "reason": "", "source": {"commit": {"hash": "634ad4858e5d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/634ad4858e5d.json"}, "html": {"href": "#!/osrf/sdformat/commits/634ad4858e5d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "count_named_elements6"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-08-13T01:31:36.605629+00:00"}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}, {"update": {"description": "It is stated numerous times in the SDF Specification files that name attributes must be unique within a certain scope. This formalizes the requirement to state that if an element's name is given by the value of its name attribute, sibling elements of the same type must have unique names. This adds a check to this effect in `ign sdf --check` and adds several helper functions to the `sdf::Element` class to support the check.\r\n\r\n* `Element::CountNamedElements(std::string)` to aid in checking for unique names\r\n\r\n* `Element::HasUniqueChildNames()` that uses `CountNamedElements()` to determine if there are any duplicate name attribute values among child elements\r\n\r\n* `GetElementTypeNames()` that returns a set of the type names of all the child elements\r\n\r\nI placed the `recursiveSameTypeUniqueNames()` function inside `ign.cc`; it can be moved to the Element class if we want to make it a part of the public API.\r\n\r\nI noticed some issues in the SDF spec documentation too that could be cleaned up, but I haven't addressed in this pull request:\r\n\r\n* [sensor name attribute](http://sdformat.org/spec?ver=1.6&elem=sensor#sensor_name): \"This name must not match another model in the model.\" (model in the model -> sensor in the parent link)\r\n* [joint name attribute](http://sdformat.org/spec?ver=1.6&elem=joint#joint_name): \"A unique name for the joint within the scope of the model.\" (scope of the model -> scope of the parent link)", "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names", "destination": {"commit": {"hash": "b6e5ab2378f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/b6e5ab2378f1.json"}, "html": {"href": "#!/osrf/sdformat/commits/b6e5ab2378f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "sdf6"}}, "reason": "", "source": {"commit": {"hash": "634ad4858e5d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/634ad4858e5d.json"}, "html": {"href": "#!/osrf/sdformat/commits/634ad4858e5d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "count_named_elements6"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-08-13T01:31:36.549345+00:00"}, "pull_request": {"type": "pullrequest", "id": 554, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/554.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/554"}}, "title": "Use \"ign sdf --check\" to check sibling elements of the same type for non-unique names"}}]}