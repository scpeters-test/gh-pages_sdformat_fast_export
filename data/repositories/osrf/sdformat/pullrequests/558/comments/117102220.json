{"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/558/comments/117102220.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/558/_/diff#comment-117102220"}}, "parent": {"id": 116901627, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/558/comments/116901627.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/558/_/diff#comment-116901627"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 558, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/558.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/558"}}, "title": "Accept relative path in <uri>"}, "content": {"raw": "So, there's a problem with this. Gazebo-classic currently accepts substituting `file://` for `GAZEBO_RESOURCE_PATH`. This is how `<uri>file://media/materials/scripts/gazebo.material</uri>` works, for example. So interpreting it as a relative path would break Gazebo compatibility. I also noticed several ROS packages use this pattern.\n\nSo I'm standing behind my original proposal, and now with some formal backing:\n\n* From [RFC 2396](https://tools.ietf.org/html/rfc2396):\n    * _\"Relative addressing of URI allows document trees to be partially independent of their location and access scheme.\"_ - that's what we want\n    * _\"Relative URI references are distinguished from absolute URI in that they do not begin with a scheme name.\"_ - that's what this PR supports\n    * _\"A relative reference beginning with a single slash character is termed an absolute-path reference\"_ - that's already supported by SDF\n* From [XML Schema 1.0](http://www.datypic.com/sc/xsd/t-xsd_anyURI.html)'s `xsd::anyURI` docs:\n    * _\"Relative URIs are specified as the difference from a base URI, such as ../prod.html.\"_\n\n---\n\n## Fun facts\n\n* Gazebo-classic has `materials/textures` hardcoded internally, which allows COLLADA files like [this](https://bitbucket.org/osrf/gazebo_models/src/e6d645674e8a99cb7955ce3b9a1fbe26c58c41f2/cardboard_box/meshes/cardboard_box.dae#lines-143) and OBJ files like [this](https://bitbucket.org/osrf/gazebo_models/src/e6d645674e8a99cb7955ce3b9a1fbe26c58c41f2/suv/meshes/suv.mtl#lines-29) to refer to their textures just by the filename without any path.\n\n* Both Gazebo-classic and Ignition support relative paths within COLLADA files like [this](https://bitbucket.org/osrf/gazebo_models/src/e6d645674e8a99cb7955ce3b9a1fbe26c58c41f2/hinged_door/meshes/door.dae#lines-949) and OBJ files like [this](https://bitbucket.org/osrf/gazebo_models/src/e6d645674e8a99cb7955ce3b9a1fbe26c58c41f2/cloverleaf_interchange/meshes/cloverleaf.mtl#lines-15).\n", "markup": "markdown", "html": "<p>So, there's a problem with this. Gazebo-classic currently accepts substituting <code>file://</code> for <code>GAZEBO_RESOURCE_PATH</code>. This is how <code>&lt;uri&gt;file://media/materials/scripts/gazebo.material&lt;/uri&gt;</code> works, for example. So interpreting it as a relative path would break Gazebo compatibility. I also noticed several ROS packages use this pattern.</p>\n<p>So I'm standing behind my original proposal, and now with some formal backing:</p>\n<ul>\n<li>From <a data-is-external-link=\"true\" href=\"https://tools.ietf.org/html/rfc2396\" rel=\"nofollow\">RFC 2396</a>:<ul>\n<li><em>\"Relative addressing of URI allows document trees to be partially independent of their location and access scheme.\"</em> - that's what we want</li>\n<li><em>\"Relative URI references are distinguished from absolute URI in that they do not begin with a scheme name.\"</em> - that's what this PR supports</li>\n<li><em>\"A relative reference beginning with a single slash character is termed an absolute-path reference\"</em> - that's already supported by SDF</li>\n</ul>\n</li>\n<li>From <a data-is-external-link=\"true\" href=\"http://www.datypic.com/sc/xsd/t-xsd_anyURI.html\" rel=\"nofollow\">XML Schema 1.0</a>'s <code>xsd::anyURI</code> docs:<ul>\n<li><em>\"Relative URIs are specified as the difference from a base URI, such as ../prod.html.\"</em></li>\n</ul>\n</li>\n</ul>\n<hr />\n<h2 id=\"markdown-header-fun-facts\">Fun facts</h2>\n<ul>\n<li>\n<p>Gazebo-classic has <code>materials/textures</code> hardcoded internally, which allows COLLADA files like <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo_models/src/e6d645674e8a99cb7955ce3b9a1fbe26c58c41f2/cardboard_box/meshes/cardboard_box.dae#lines-143\" rel=\"nofollow\">this</a> and OBJ files like <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo_models/src/e6d645674e8a99cb7955ce3b9a1fbe26c58c41f2/suv/meshes/suv.mtl#lines-29\" rel=\"nofollow\">this</a> to refer to their textures just by the filename without any path.</p>\n</li>\n<li>\n<p>Both Gazebo-classic and Ignition support relative paths within COLLADA files like <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo_models/src/e6d645674e8a99cb7955ce3b9a1fbe26c58c41f2/hinged_door/meshes/door.dae#lines-949\" rel=\"nofollow\">this</a> and OBJ files like <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo_models/src/e6d645674e8a99cb7955ce3b9a1fbe26c58c41f2/cloverleaf_interchange/meshes/cloverleaf.mtl#lines-15\" rel=\"nofollow\">this</a>.</p>\n</li>\n</ul>", "type": "rendered"}, "created_on": "2019-09-16T23:44:23.456860+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-09-16T23:44:23.465358+00:00", "type": "pullrequest_comment", "id": 117102220}