{"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/238/comments/11829338.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/diff/ocrave/sdformat:None..None?path=sdf%2F1.5%2Fgui.sdf"}, "html": {"href": "#!/osrf/sdformat/pull-requests/238/_/diff#comment-11829338"}}, "parent": {"id": 11814542, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/238/comments/11814542.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/238/_/diff#comment-11814542"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 238, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/238.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/238"}}, "title": "Additional elements for <track_visual>"}, "content": {"raw": "As far as I know, <track_visual> is quite different from the follow mode:\n\n* When <track_visual> is defined, it is mandatory to set a model name with the <name> element. The named model is then tracked at startup and it is not possible to escape this mode.\n* The <track_visual> element also has two subelements, <min_dist> and <max_dist>, which are defined but never used.\n* And, more importantly, with <track_visual>, the position of the camera is not oriented towards the tracked model, which makes it unusable with aircrafts (_inheritOrientation is set to false by gzclient). And, if there was an option to inherit orientation from the visual node, pitch and roll would also be affected which is what we make to sure to prevent with this pull request.\n\nThe follow mode in gazebo and <track_visual> seem to serve two different purposes, so I am not sure it is a good idea to merge them. The idea of <follow_model> was simply to allow the user to configure the follow mode in their SDF files or in the client at runtime. We do not find the <track_visual> element convenient because, once enabled, it cannot be turned off in gzclient, and the way the camera moves is not what we expect when tracking a flying object. It also feels more user-friendly to determine the position of the camera relatively to the tracked model or to the world in a new <xyz> element instead of relying on the pose of the camera itself which may be completely different at startup. It is also nice to be able to change the camera parameters in gzclient, to adapt the behaviour of the camera to whatever object we decide to track. It is for all those reasons that we chose to modify the follow mode instead of <track_visual>. We added a new element to make it apparent to the user that it does not have any effect on <track_visual>.\n\nIn case you decide to merge <follow_model> into <track_visual>, I think that the <name> element should at least become optional. It should also be possible to leave this mode with the escape key, and to reenter it like with the follow mode. The <min_dist> and <max_dist> elements could be removed altogether unless you plan to use them. And, new SDF elements should be added to control precisely the way the camera is supposed to move relatively to the model or to the world.", "markup": "markdown", "html": "<p>As far as I know, &lt;track_visual&gt; is quite different from the follow mode:</p>\n<ul>\n<li>When &lt;track_visual&gt; is defined, it is mandatory to set a model name with the &lt;name&gt; element. The named model is then tracked at startup and it is not possible to escape this mode.</li>\n<li>The &lt;track_visual&gt; element also has two subelements, &lt;min_dist&gt; and &lt;max_dist&gt;, which are defined but never used.</li>\n<li>And, more importantly, with &lt;track_visual&gt;, the position of the camera is not oriented towards the tracked model, which makes it unusable with aircrafts (_inheritOrientation is set to false by gzclient). And, if there was an option to inherit orientation from the visual node, pitch and roll would also be affected which is what we make to sure to prevent with this pull request.</li>\n</ul>\n<p>The follow mode in gazebo and &lt;track_visual&gt; seem to serve two different purposes, so I am not sure it is a good idea to merge them. The idea of &lt;follow_model&gt; was simply to allow the user to configure the follow mode in their SDF files or in the client at runtime. We do not find the &lt;track_visual&gt; element convenient because, once enabled, it cannot be turned off in gzclient, and the way the camera moves is not what we expect when tracking a flying object. It also feels more user-friendly to determine the position of the camera relatively to the tracked model or to the world in a new &lt;xyz&gt; element instead of relying on the pose of the camera itself which may be completely different at startup. It is also nice to be able to change the camera parameters in gzclient, to adapt the behaviour of the camera to whatever object we decide to track. It is for all those reasons that we chose to modify the follow mode instead of &lt;track_visual&gt;. We added a new element to make it apparent to the user that it does not have any effect on &lt;track_visual&gt;.</p>\n<p>In case you decide to merge &lt;follow_model&gt; into &lt;track_visual&gt;, I think that the &lt;name&gt; element should at least become optional. It should also be possible to leave this mode with the escape key, and to reenter it like with the follow mode. The &lt;min_dist&gt; and &lt;max_dist&gt; elements could be removed altogether unless you plan to use them. And, new SDF elements should be added to control precisely the way the camera is supposed to move relatively to the model or to the world.</p>", "type": "rendered"}, "created_on": "2015-11-16T13:07:33.976733+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "inline": {"to": null, "from": null, "outdated": false, "path": "sdf/1.5/gui.sdf"}, "updated_on": "2015-11-16T13:07:34.082177+00:00", "type": "pullrequest_comment", "id": 11829338}