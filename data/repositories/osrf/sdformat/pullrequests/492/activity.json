{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/87140662.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-87140662"}}, "parent": {"id": 87117875, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/87117875.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-87117875"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "content": {"raw": "> See [pull request #493](#!/osrf/sdformat/pull-requests/493/style-updates-to-pull-request-492)\n\nThanks a lot, sorry for the delay in responding to @chapulina \u2019s feedback . ", "markup": "markdown", "html": "<blockquote>\n<p>See <a data-is-external-link=\"true\" href=\"#!/osrf/sdformat/pull-requests/493/style-updates-to-pull-request-492\" rel=\"nofollow\">pull request #493</a></p>\n</blockquote>\n<p>Thanks a lot, sorry for the delay in responding to @chapulina \u2019s feedback . </p>", "type": "rendered"}, "created_on": "2019-01-04T22:57:50.500957+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2019-01-04T22:57:50.578001+00:00", "type": "pullrequest_comment", "id": 87140662}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"approval": {"date": "2019-01-04T17:28:27.734527+00:00", "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/87117875.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-87117875"}}, "parent": {"id": 87116847, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/87116847.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-87116847"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "content": {"raw": "See pull request #493", "markup": "markdown", "html": "<p>See <a href=\"#!/osrf/sdformat/pull-requests/493/style-updates-to-pull-request-492\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #493</a></p>", "type": "rendered"}, "created_on": "2019-01-04T17:25:33.081527+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2019-01-04T17:25:33.090858+00:00", "type": "pullrequest_comment", "id": 87117875}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) and other potential errors due to the use of `std::stringstream`.\r\n\r\n~~For uniforming the code, handling of double and float parameters have been switched to use~~ `std::stringstream` ~~as well.~~\r\n\r\nThere are two separated fixes:\r\n\r\n* Introduce a private helper `StringStreamClassicLocale` that is just `std::stringstream` with `imbue(std::locale::classic()` called in the constructor. Use of this helper ensures that the parsing is independent from the C\\+\\+ global locale set via `std::locale::global()`.\r\n* Move the `setlocale(LC_NUMERIC, \"C\");` from `Param::SetFromString` to `Param::ValueFromString`, so the case in which the `Param::ValueFromString` method was first called by the Param constructor is covered as well.\r\n\r\nIf necessary, it is possible to split this two fixes in two PRs.\r\n\r\nI would have preferred to switch all conversions to C\\+\\+ facilities, removing the existing modifications of the global C locale, that are error-prone as any thread in the process could call `std::locale(\"\")` between sdformat's `std::locale` call and the calls to `stod` and `stof`.\r\n\r\nUnfortunately it turns out that removing `std::stod` is not trivial, as `stod` supports reading hexadecimal floating point numbers \\([https://en.cppreference.com/w/cpp/string/basic\\_string/stof](https://en.cppreference.com/w/cpp/string/basic_string/stof)\\), that are not supported instead by `stringstream& operator>>(double& value);` . The situation on this is a bit confusing from a user point of view, because as far as I could find, sdformat specification does not specify which representations it supports for double and float numbers. XML-based formats typically stick to support only `xsd::double` \\(see [https://www.w3.org/TR/xmlschema-2/#double](https://www.w3.org/TR/xmlschema-2/#double) and [https://github.com/ros/urdfdom\\_headers/issues/41#issuecomment-345737929](https://github.com/ros/urdfdom_headers/issues/41#issuecomment-345737929)\\) that **does not** support hexadecimal doubles, and indeed this is what is documented in the XML Schema generated by sdformat. Furthermore, hexadecimal double are only supported in scalar values, while when reading vectors the only representations supported are the one supported by `stringstream& operator>>(double& value);` . It probably make sense to discuss this in a separate issue.", "title": "Fix locale problems of std::stringstream and of Param::ValueFromString", "destination": {"commit": {"hash": "d2436327aef2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/d2436327aef2.json"}, "html": {"href": "#!/osrf/sdformat/commits/d2436327aef2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "f9ad0a233794", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/f9ad0a233794"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/f9ad0a233794"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "MERGED", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2019-01-04T17:15:23.148234+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"approval": {"date": "2019-01-04T17:15:06.030181+00:00", "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/87116847.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-87116847"}}, "parent": {"id": 86904550, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/86904550.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-86904550"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "content": {"raw": "I'm going to approve, merge, and then submit a PR for the style changes.", "markup": "markdown", "html": "<p>I'm going to approve, merge, and then submit a PR for the style changes.</p>", "type": "rendered"}, "created_on": "2019-01-04T17:15:01.888963+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2019-01-04T17:15:01.915273+00:00", "type": "pullrequest_comment", "id": 87116847}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/86904550.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-86904550"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "content": {"raw": "Thanks for the fix, works for me! Ready to approve once the style fixes are in.", "markup": "markdown", "html": "<p>Thanks for the fix, works for me! Ready to approve once the style fixes are in.</p>", "type": "rendered"}, "created_on": "2019-01-02T18:32:00.325582+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-01-02T18:32:00.333822+00:00", "type": "pullrequest_comment", "id": 86904550}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/86904511.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-86904511"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "content": {"raw": "Style nitpick: `{` in a new line", "markup": "markdown", "html": "<p>Style nitpick: <code>{</code> in a new line</p>", "type": "rendered"}, "created_on": "2019-01-02T18:31:27.847718+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-02T18:31:27.853841+00:00", "type": "pullrequest_comment", "id": 86904511}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/86904497.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-86904497"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "content": {"raw": "CI:\n\n* Ubuntu: [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=sdformat-ci-pr_any-ubuntu_auto-amd64&build=116)](https://build.osrfoundation.org/job/sdformat-ci-pr_any-ubuntu_auto-amd64/116/) \n\ncppcheck errors (one of them is not from this PR)\n\n~~~\n[test/integration/locale_fix_cxx.cc:48]: (warning) Return value of function std::locale::global() is not used.\n[test/integration/locale_fix_cxx.cc:27]: (style) The function 'do_decimal_point' is never used.\n./src/Surface.cc:92:  Lines should be <= 80 characters long  [whitespace/line_length] [2]\n~~~\n\n* OSX: [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=sdformat-ci-pr_any-homebrew-amd64&build=362)](https://build.osrfoundation.org/job/sdformat-ci-pr_any-homebrew-amd64/362/) - there are a couple of test failures which seem to be already on `gz11`\n\n* Windows: [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=sdformat-ci-pr_any-windows7-amd64&build=525)](https://build.osrfoundation.org/job/sdformat-ci-pr_any-windows7-amd64/525/)", "markup": "markdown", "html": "<p>CI:</p>\n<ul>\n<li>Ubuntu: <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/sdformat-ci-pr_any-ubuntu_auto-amd64/116/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=sdformat-ci-pr_any-ubuntu_auto-amd64&amp;build=116\" /></a> </li>\n</ul>\n<p>cppcheck errors (one of them is not from this PR)</p>\n<div class=\"codehilite\"><pre><span></span>[test/integration/locale_fix_cxx.cc:48]: (warning) Return value of function std::locale::global() is not used.\n[test/integration/locale_fix_cxx.cc:27]: (style) The function &#39;do_decimal_point&#39; is never used.\n./src/Surface.cc:92:  Lines should be &lt;= 80 characters long  [whitespace/line_length] [2]\n</pre></div>\n\n\n<ul>\n<li>\n<p>OSX: <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/sdformat-ci-pr_any-homebrew-amd64/362/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=sdformat-ci-pr_any-homebrew-amd64&amp;build=362\" /></a> - there are a couple of test failures which seem to be already on <code>gz11</code></p>\n</li>\n<li>\n<p>Windows: <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/sdformat-ci-pr_any-windows7-amd64/525/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=sdformat-ci-pr_any-windows7-amd64&amp;build=525\" /></a></p>\n</li>\n</ul>", "type": "rendered"}, "created_on": "2019-01-02T18:31:13.773949+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-01-02T18:31:13.780226+00:00", "type": "pullrequest_comment", "id": 86904497}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/86780450.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-86780450"}}, "parent": {"id": 86778883, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/86778883.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-86778883"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "content": {"raw": "Problems fixed in the latest commit, and description of the PR edited accordingly. The PR  should be now ready for review.", "markup": "markdown", "html": "<p>Problems fixed in the latest commit, and description of the PR edited accordingly. The PR  should be now ready for review.</p>", "type": "rendered"}, "created_on": "2018-12-30T08:59:16.849628+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2018-12-30T08:59:16.915964+00:00", "type": "pullrequest_comment", "id": 86780450}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) and other potential errors due to the use of `std::stringstream`.\r\n\r\n~~For uniforming the code, handling of double and float parameters have been switched to use~~ `std::stringstream` ~~as well.~~\r\n\r\nThere are two separated fixes:\r\n\r\n* Introduce a private helper `StringStreamClassicLocale` that is just `std::stringstream` with `imbue(std::locale::classic()` called in the constructor. Use of this helper ensures that the parsing is independent from the C\\+\\+ global locale set via `std::locale::global()`.\r\n* Move the `setlocale(LC_NUMERIC, \"C\");` from `Param::SetFromString` to `Param::ValueFromString`, so the case in which the `Param::ValueFromString` method was first called by the Param constructor is covered as well.\r\n\r\nIf necessary, it is possible to split this two fixes in two PRs.\r\n\r\nI would have preferred to switch all conversions to C\\+\\+ facilities, removing the existing modifications of the global C locale, that are error-prone as any thread in the process could call `std::locale(\"\")` between sdformat's `std::locale` call and the calls to `stod` and `stof`.\r\n\r\nUnfortunately it turns out that removing `std::stod` is not trivial, as `stod` supports reading hexadecimal floating point numbers \\([https://en.cppreference.com/w/cpp/string/basic\\_string/stof](https://en.cppreference.com/w/cpp/string/basic_string/stof)\\), that are not supported instead by `stringstream& operator>>(double& value);` . The situation on this is a bit confusing from a user point of view, because as far as I could find, sdformat specification does not specify which representations it supports for double and float numbers. XML-based formats typically stick to support only `xsd::double` \\(see [https://www.w3.org/TR/xmlschema-2/#double](https://www.w3.org/TR/xmlschema-2/#double) and [https://github.com/ros/urdfdom\\_headers/issues/41#issuecomment-345737929](https://github.com/ros/urdfdom_headers/issues/41#issuecomment-345737929)\\) that **does not** support hexadecimal doubles, and indeed this is what is documented in the XML Schema generated by sdformat. Furthermore, hexadecimal double are only supported in scalar values, while when reading vectors the only representations supported are the one supported by `stringstream& operator>>(double& value);` . It probably make sense to discuss this in a separate issue.", "title": "Fix locale problems of std::stringstream and of Param::ValueFromString", "destination": {"commit": {"hash": "14df94b8096a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/14df94b8096a.json"}, "html": {"href": "#!/osrf/sdformat/commits/14df94b8096a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "f9ad0a233794", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/f9ad0a233794"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/f9ad0a233794"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "OPEN", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "date": "2018-12-30T08:58:31.870403+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) and other potential errors due to the use of `std::stringstream`.\r\n\r\n~~For uniforming the code, handling of double and float parameters have been switched to use~~ `std::stringstream` ~~as well.~~\r\n\r\nThere are two separated fixes:\r\n\r\n* Introduce a private helper `StringStreamClassicLocale` that is just `std::stringstream` with `imbue(std::locale::classic()` called in the constructor. Use of this helper ensures that the parsing is independent from the C\\+\\+ global locale set via `std::locale::global()`.\r\n* Move the `setlocale(LC_NUMERIC, \"C\");` from `Param::SetFromString` to `Param::ValueFromString`, so the case in which the `Param::ValueFromString` method was first called by the Param constructor is covered as well.\r\n\r\nIf necessary, it is possible to split this two fixes in two PRs.\r\n\r\nI would have preferred to switch all conversions to C\\+\\+ facilities, removing the existing modifications of the global C locale, that are error-prone as any thread in the process could call `std::locale(\"\")` between sdformat's `std::locale` call and the calls to `stod` and `stof`.\r\n\r\nUnfortunately it turns out that that this is not trivial, as `stod` supports reading hexadecimal floating point numbers \\([https://en.cppreference.com/w/cpp/string/basic\\_string/stof](https://en.cppreference.com/w/cpp/string/basic_string/stof)\\), that are not supported instead by `stringstream& operator>>(double& value);` . The situation on this is a bit confusing from a user point of view, because as far as I could find, sdformat specification does not specify which representations it supports for double and float numbers. XML-based formats typically stick to support only `xsd::double` \\(see [https://www.w3.org/TR/xmlschema-2/#double](https://www.w3.org/TR/xmlschema-2/#double) and [https://github.com/ros/urdfdom\\_headers/issues/41#issuecomment-345737929](https://github.com/ros/urdfdom_headers/issues/41#issuecomment-345737929)\\) that **does not** support hexadecimal doubles, and indeed this is what is documented in the XML Schema generated by sdformat. Furthermore, hexadecimal double are only supported in scalar values, while when reading vectors the only representations supported are the one supported by `stringstream& operator>>(double& value);` . It probably make sense to discuss this in a separate issue.", "title": "Fix locale problems of std::stringstream and of Param::ValueFromString", "destination": {"commit": {"hash": "14df94b8096a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/14df94b8096a.json"}, "html": {"href": "#!/osrf/sdformat/commits/14df94b8096a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "f9ad0a233794", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/f9ad0a233794"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/f9ad0a233794"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "OPEN", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "date": "2018-12-30T08:57:53.681412+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) and other potential errors due to the use of `std::stringstream`.\r\n\r\n~~For uniforming the code, handling of double and float parameters have been switched to use~~ `std::stringstream` ~~as well.~~\r\n\r\nThere are two separated fixes:\r\n\r\n* Introduce a private helper `StringStreamClassicLocale` that is just `std::stringstream` with `imbue(std::locale::classic()` called in the constructor. Use of this helper ensures that the parsing is independent from the C\\+\\+ global locale set via `std::locale::global()`.\r\n*  Move the `setlocale(LC_NUMERIC, \"C\");` from `Param::SetFromString` to `Param::ValueFromString`,  so the case in which the `Param::ValueFromString` method was first called by the Param constructor is covered as well.\r\n\r\nIf necessary, it is possible to split this two fixes in two  PRs. \r\n\r\nI would have preferred to switch all conversions to C\\+\\+ facilities, removing the existing modifications of the global C locale, that are error-prone as any thread in the process could  call `std::locale(\"\")` between sdformat's `std::locale` call and the calls to `stod` and `stof`. \r\n\r\n\u200c\r\n\r\nUnfortunately it turns  out that that this is not trivial, as `stod` supports reading hexadecimal floating point numbers \\([https://en.cppreference.com/w/cpp/string/basic\\_string/stof](https://en.cppreference.com/w/cpp/string/basic_string/stof)\\), that are not supported instead by `stringstream& operator>>(double& value);` . The situation on this is a bit confusing from a user point of view, because as far as I could find, sdformat specification does not specify which representations it supports for double and float numbers. XML-based formats typically stick to support only `xsd::double` \\(see [https://www.w3.org/TR/xmlschema-2/#double](https://www.w3.org/TR/xmlschema-2/#double) and [https://github.com/ros/urdfdom\\_headers/issues/41#issuecomment-345737929](https://github.com/ros/urdfdom_headers/issues/41#issuecomment-345737929)\\) that **does not** support hexadecimal doubles, and indeed this is what is documented in the XML Schema generated by sdformat. Furthermore, hexadecimal double are only supported in scalar values, while when reading vectors the only representations supported are the one supported by `stringstream& operator>>(double& value);` . It probably make sense to discuss this in a separate issue.", "title": "Fix locale problems of std::stringstream and of Param::ValueFromString", "destination": {"commit": {"hash": "14df94b8096a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/14df94b8096a.json"}, "html": {"href": "#!/osrf/sdformat/commits/14df94b8096a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "f9ad0a233794", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/f9ad0a233794"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/f9ad0a233794"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "OPEN", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "date": "2018-12-30T08:57:32.603307+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) .\r\n\r\nFor uniforming the code, handling of double and float parameters have been switched to use `std::stringstream` as well.", "title": "[WIP] Fix locale problems of std::stringstream", "destination": {"commit": {"hash": "14df94b8096a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/14df94b8096a.json"}, "html": {"href": "#!/osrf/sdformat/commits/14df94b8096a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "f9ad0a233794", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/f9ad0a233794"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/f9ad0a233794"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "OPEN", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "date": "2018-12-30T08:34:53.829659+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/86778848.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-86778848"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "content": {"raw": "~~I removed the~~ `std::setlocale` ~~call in~~ `bool Param::SetFromString(const std::string &_value)` ~~, as it is not necessary anymore now that we use properly imbued std::stringstream objects.   \n Strictly speaking this is a change of behavior of the library: the C locale is a global state of the process, and so if downstream codes assuming that the C locale is switched to~~ `\"C\"` ~~after a call, it may be broken by this change.  \n However, I do not think that it is possible to properly deprecate this behavior in a useful way, such that any code that relies on the C locale being switched to~~ `\"C\"` ~~could receive a warning or something like that. However, let me know if instead you prefer to restore the~~ `std::setlocale` ~~call.~~\n\nOutdated comment, see the rest of the PR.\n\nRelated issues in other projects:\n\n* [https://github.com/ros/urdfdom/issues/98](https://github.com/ros/urdfdom/issues/98)\n* [https://github.com/robotology/idyntree/issues/288](https://github.com/robotology/idyntree/issues/288)\n* [https://github.com/RobotLocomotion/drake/pull/10326](https://github.com/RobotLocomotion/drake/pull/10326)\n\n", "markup": "markdown", "html": "<p><del>I removed the</del> <code>std::setlocale</code> <del>call in</del> <code>bool Param::SetFromString(const std::string &amp;_value)</code> <del>, as it is not necessary anymore now that we use properly imbued std::stringstream objects. <br />\n Strictly speaking this is a change of behavior of the library: the C locale is a global state of the process, and so if downstream codes assuming that the C locale is switched to</del> <code>\"C\"</code> <del>after a call, it may be broken by this change.<br />\n However, I do not think that it is possible to properly deprecate this behavior in a useful way, such that any code that relies on the C locale being switched to</del> <code>\"C\"</code> <del>could receive a warning or something like that. However, let me know if instead you prefer to restore the</del> <code>std::setlocale</code> <del>call.</del></p>\n<p>Outdated comment, see the rest of the PR.</p>\n<p>Related issues in other projects:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/ros/urdfdom/issues/98\" rel=\"nofollow\">https://github.com/ros/urdfdom/issues/98</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/robotology/idyntree/issues/288\" rel=\"nofollow\">https://github.com/robotology/idyntree/issues/288</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/RobotLocomotion/drake/pull/10326\" rel=\"nofollow\">https://github.com/RobotLocomotion/drake/pull/10326</a></li>\n</ul>", "type": "rendered"}, "created_on": "2018-12-30T00:04:53.259644+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2018-12-30T08:29:11.587685+00:00", "type": "pullrequest_comment", "id": 86778848}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492/comments/86778883.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492/_/diff#comment-86778883"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}, "content": {"raw": "I just realized that there are some failures in UNIT\\_Param\\_TEST, please wait for the fixes before reviewing, thanks!", "markup": "markdown", "html": "<p>I just realized that there are some failures in UNIT_Param_TEST, please wait for the fixes before reviewing, thanks!</p>", "type": "rendered"}, "created_on": "2018-12-30T00:17:54.557777+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2018-12-30T08:28:45.402685+00:00", "type": "pullrequest_comment", "id": 86778883}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) .\r\n\r\nFor uniforming the code, handling of double and float parameters have been switched to use `std::stringstream` as well.", "title": "[WIP] Fix locale problems of std::stringstream", "destination": {"commit": {"hash": "14df94b8096a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/14df94b8096a.json"}, "html": {"href": "#!/osrf/sdformat/commits/14df94b8096a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "cff49aab7437", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/cff49aab7437"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/cff49aab7437"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "OPEN", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "date": "2018-12-30T00:18:35.349490+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) .\r\n\r\nFor uniforming the code, handling of double and float parameters have been switched to use `std::stringstream` as well.", "title": "[WIP] Fix locale problems of std::stringstream", "destination": {"commit": {"hash": "14df94b8096a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/14df94b8096a.json"}, "html": {"href": "#!/osrf/sdformat/commits/14df94b8096a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "5c5894dba92a", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/5c5894dba92a"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/5c5894dba92a"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "OPEN", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "date": "2018-12-30T00:17:00.108386+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) .\r\n\r\nFor  uniforming the code, handling of double and float parameters have been switched to use `std::stringstream` as well.", "title": "Fix locale problems of std::stringstream", "destination": {"commit": {"hash": "14df94b8096a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/14df94b8096a.json"}, "html": {"href": "#!/osrf/sdformat/commits/14df94b8096a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "5c5894dba92a", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/5c5894dba92a"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/5c5894dba92a"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "OPEN", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "date": "2018-12-29T23:57:04.731462+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) .\r\n\r\nFor  uniforming the code, handling of double and float parameters have been switched to use `std::stringstream` as well.", "title": "Fix locale problems of std::stringstream", "destination": {"commit": {"hash": "14df94b8096a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/14df94b8096a.json"}, "html": {"href": "#!/osrf/sdformat/commits/14df94b8096a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "cb62831f5657", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/cb62831f5657"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/cb62831f5657"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "OPEN", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "date": "2018-12-29T23:53:41.994895+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}, {"update": {"description": "Fix for the issue described in [#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if](#!/osrf/sdformat/issues/207/error-when-starting-ign-gazebo-if) .\r\n\r\nFor  uniforming the code, handling of double and float parameters have been switched to use `std::stringstream` as well.", "title": "Fix locale problems of std::stringstream", "destination": {"commit": {"hash": "14df94b8096a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/sdformat/commit/14df94b8096a.json"}, "html": {"href": "#!/osrf/sdformat/commits/14df94b8096a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "branch": {"name": "gz11"}}, "reason": "", "source": {"commit": {"hash": "cb62831f5657", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat/commit/cb62831f5657"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat/commits/cb62831f5657"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/sdformat"}, "html": {"href": "https://bitbucket.org/traversaro/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e8677ce0-8f62-4623-a535-f4140583deb5}ts=c_plus_plus"}}, "type": "repository", "name": "sdformat", "full_name": "traversaro/sdformat", "uuid": "{e8677ce0-8f62-4623-a535-f4140583deb5}"}, "branch": {"name": "fix_locale"}}, "state": "OPEN", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "date": "2018-12-29T23:53:41.964974+00:00"}, "pull_request": {"type": "pullrequest", "id": 492, "links": {"self": {"href": "data/repositories/osrf/sdformat/pullrequests/492.json"}, "html": {"href": "#!/osrf/sdformat/pull-requests/492"}}, "title": "Fix locale problems of std::stringstream and of Param::ValueFromString"}}]}