{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/57/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/57.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/57/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/57/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/57/converters-file-search-semantics-are"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/57/vote"}}, "reporter": {"display_name": "andy_somerville", "uuid": "{09fd5d4b-d90e-4416-9a6a-2e5cd638472c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B09fd5d4b-d90e-4416-9a6a-2e5cd638472c%7D"}, "html": {"href": "https://bitbucket.org/%7B09fd5d4b-d90e-4416-9a6a-2e5cd638472c%7D/"}, "avatar": {"href": "https://bitbucket.org/account/andy_somerville/avatar/"}}, "nickname": "andy_somerville", "type": "user", "account_id": null}, "title": "Converter's file search semantics are unclear and problematic", "component": null, "votes": 0, "watches": 1, "content": {"raw": "`Converter::Convert` appears to make unnecessary assumptions about the file structure which prevent use case where parent directory to version number is not \"sdformat\" which includes source builds which have not yet been installed where the parent directory is named \"sdf\".\r\n\r\nAdditionally `sdf::findFile` itself prepends \"sdformat\" when searching the SDF_SHARE_PATH and so searches will not match as they will end up prepended with \"sdformat/sdformat\"\r\n\r\nThis specific case prevents certain test cases from running correctly.\r\n\r\nSome clients may rely on this behavior so it may make sense to create fix which searches multiple paths decendent to SDF\r\n\r\nsdformat/src/Converter.cc\r\n```\r\n#!c++\r\nstd::string filename = sdf::findFile(  std::string(\"sdformat/\") \r\n    + _toVersion + \"/\" + origVersion + \".convert\");\r\n```\r\n", "markup": "markdown", "html": "<p><code>Converter::Convert</code> appears to make unnecessary assumptions about the file structure which prevent use case where parent directory to version number is not \"sdformat\" which includes source builds which have not yet been installed where the parent directory is named \"sdf\".</p>\n<p>Additionally <code>sdf::findFile</code> itself prepends \"sdformat\" when searching the SDF_SHARE_PATH and so searches will not match as they will end up prepended with \"sdformat/sdformat\"</p>\n<p>This specific case prevents certain test cases from running correctly.</p>\n<p>Some clients may rely on this behavior so it may make sense to create fix which searches multiple paths decendent to SDF</p>\n<p>sdformat/src/Converter.cc</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">filename</span> <span class=\"o\">=</span> <span class=\"n\">sdf</span><span class=\"o\">::</span><span class=\"n\">findFile</span><span class=\"p\">(</span>  <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">(</span><span class=\"s\">&quot;sdformat/&quot;</span><span class=\"p\">)</span> \n    <span class=\"o\">+</span> <span class=\"n\">_toVersion</span> <span class=\"o\">+</span> <span class=\"s\">&quot;/&quot;</span> <span class=\"o\">+</span> <span class=\"n\">origVersion</span> <span class=\"o\">+</span> <span class=\"s\">&quot;.convert&quot;</span><span class=\"p\">);</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2014-04-09T01:04:08.536821+00:00", "milestone": null, "updated_on": "2014-04-09T01:05:54.138440+00:00", "type": "issue", "id": 57}