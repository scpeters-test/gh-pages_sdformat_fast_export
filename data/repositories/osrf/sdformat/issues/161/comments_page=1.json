{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161/comments/38154771.json"}, "html": {"href": "#!/osrf/sdformat/issues/161#comment-38154771"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161.json"}}, "type": "issue", "id": 161, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "Output of Console class not working on Windows"}, "content": {"raw": "I think this problem is caused by this bit of code in Console.cc:\n\n```\n#ifndef _WIN32\n    *this->stream << \"\\033[1;\" << _color << \"m\" << _lbl << \" [\" <<\n      _file.substr(index , _file.size() - index) << \":\" << _line <<\n      \"]\\033[0m \";\n#else\n    *this->stream << _lbl << \" [\" <<\n      _file.substr(index , _file.size() - index) << \":\" << _line << \"] \";\n#endif\n```\n\nThat is, we definitely disable color escape sequences on Windows.  I'm not sure of the reasoning for that, or if color messages are expected to work on Windows.", "markup": "markdown", "html": "<p>I think this problem is caused by this bit of code in Console.cc:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">#ifndef _WIN32</span>\n    <span class=\"o\">*</span><span class=\"n\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">stream</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;</span><span class=\"se\">\\033</span><span class=\"s\">[1;&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">_color</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;m&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">_lbl</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; [&quot;</span> <span class=\"o\">&lt;&lt;</span>\n      <span class=\"n\">_file</span><span class=\"p\">.</span><span class=\"n\">substr</span><span class=\"p\">(</span><span class=\"n\">index</span> <span class=\"p\">,</span> <span class=\"n\">_file</span><span class=\"p\">.</span><span class=\"n\">size</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">index</span><span class=\"p\">)</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;:&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">_line</span> <span class=\"o\">&lt;&lt;</span>\n      <span class=\"s\">&quot;]</span><span class=\"se\">\\033</span><span class=\"s\">[0m &quot;</span><span class=\"p\">;</span>\n<span class=\"cp\">#else</span>\n    <span class=\"o\">*</span><span class=\"n\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">stream</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">_lbl</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; [&quot;</span> <span class=\"o\">&lt;&lt;</span>\n      <span class=\"n\">_file</span><span class=\"p\">.</span><span class=\"n\">substr</span><span class=\"p\">(</span><span class=\"n\">index</span> <span class=\"p\">,</span> <span class=\"n\">_file</span><span class=\"p\">.</span><span class=\"n\">size</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">index</span><span class=\"p\">)</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;:&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">_line</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;] &quot;</span><span class=\"p\">;</span>\n<span class=\"cp\">#endif</span>\n</pre></div>\n\n\n<p>That is, we definitely disable color escape sequences on Windows.  I'm not sure of the reasoning for that, or if color messages are expected to work on Windows.</p>", "type": "rendered"}, "created_on": "2017-07-11T12:45:25.513751+00:00", "user": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "updated_on": "2017-07-11T12:45:52.245615+00:00", "type": "issue_comment", "id": 38154771}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161/comments/38157456.json"}, "html": {"href": "#!/osrf/sdformat/issues/161#comment-38157456"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161.json"}}, "type": "issue", "id": 161, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "Output of Console class not working on Windows"}, "content": {"raw": "It was my understanding that color output on Windows 7 is not possible. Windows 10 does support color output.", "markup": "markdown", "html": "<p>It was my understanding that color output on Windows 7 is not possible. Windows 10 does support color output.</p>", "type": "rendered"}, "created_on": "2017-07-11T14:22:37.110959+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 38157456}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161/comments/38162139.json"}, "html": {"href": "#!/osrf/sdformat/issues/161#comment-38162139"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161.json"}}, "type": "issue", "id": 161, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "Output of Console class not working on Windows"}, "content": {"raw": "I probably didn't word it clearly, but I don't see any output at all for the color messages. Nothing appears. I see the `std::cerr` messages, but that's all.\n\n* https://build.osrfoundation.org/view/os_windows/job/sdformat-ci-default-windows7-amd64/75/console\n\n~~~\n45: Test timeout computed to be: 240\n45: [==========] Running 1 test from 1 test case.\n45: [----------] Global test environment set-up.\n45: [----------] 1 test from Console\n45: [ RUN      ] Console.Messages\n45: No HOME defined in the environment. Will not log.\n45: [       OK ] Console.Messages (1 ms)\n45: [----------] 1 test from Console (1 ms total)\n45: \n45: [----------] Global test environment tear-down\n45: [==========] 1 test from 1 test case ran. (1 ms total)\n45: [  PASSED  ] 1 test.\n45/62 Test #45: UNIT_Console_TEST ......................................   Passed    0.01 sec\n~~~", "markup": "markdown", "html": "<p>I probably didn't word it clearly, but I don't see any output at all for the color messages. Nothing appears. I see the <code>std::cerr</code> messages, but that's all.</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/view/os_windows/job/sdformat-ci-default-windows7-amd64/75/console\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/os_windows/job/sdformat-ci-default-windows7-amd64/75/console</a></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">timeout</span> <span class=\"n\">computed</span> <span class=\"n\">to</span> <span class=\"n\">be</span><span class=\"o\">:</span> <span class=\"mi\">240</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">[==========]</span> <span class=\"n\">Running</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span><span class=\"o\">.</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"kd\">set</span><span class=\"o\">-</span><span class=\"n\">up</span><span class=\"o\">.</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"n\">Console</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">[</span> <span class=\"n\">RUN</span>      <span class=\"o\">]</span> <span class=\"n\">Console</span><span class=\"o\">.</span><span class=\"na\">Messages</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">No</span> <span class=\"n\">HOME</span> <span class=\"n\">defined</span> <span class=\"k\">in</span> <span class=\"n\">the</span> <span class=\"n\">environment</span><span class=\"o\">.</span> <span class=\"n\">Will</span> <span class=\"n\">not</span> <span class=\"n\">log</span><span class=\"o\">.</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">[</span>       <span class=\"n\">OK</span> <span class=\"o\">]</span> <span class=\"n\">Console</span><span class=\"o\">.</span><span class=\"na\">Messages</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"n\">ms</span><span class=\"o\">)</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"n\">Console</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"n\">ms</span> <span class=\"n\">total</span><span class=\"o\">)</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> \n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"n\">tear</span><span class=\"o\">-</span><span class=\"n\">down</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">[==========]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span> <span class=\"n\">ran</span><span class=\"o\">.</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"n\">ms</span> <span class=\"n\">total</span><span class=\"o\">)</span>\n<span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">[</span>  <span class=\"n\">PASSED</span>  <span class=\"o\">]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span><span class=\"o\">.</span>\n<span class=\"mi\">45</span><span class=\"o\">/</span><span class=\"mi\">62</span> <span class=\"n\">Test</span> <span class=\"err\">#</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">UNIT_Console_TEST</span> <span class=\"o\">......................................</span>   <span class=\"n\">Passed</span>    <span class=\"mf\">0.01</span> <span class=\"n\">sec</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-07-11T17:47:42.320104+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 38162139}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161/comments/38162232.json"}, "html": {"href": "#!/osrf/sdformat/issues/161#comment-38162232"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161.json"}}, "type": "issue", "id": 161, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "Output of Console class not working on Windows"}, "content": {"raw": "Ah, gotcha.  OK, yeah.  That's because of this other bit of code in Console.cc:\n\n```\n/// \\todo Output disabled for windows, to allow tests to pass. We should\n/// disable output just for tests on windows.\n#ifndef _WIN32\nstatic bool g_quiet = false;\n#else\nstatic bool g_quiet = true;\n#endif\n```\n\nI'm not exactly sure what led to that code being introduced, but maybe we should try removing it and see what happens on Windows.", "markup": "markdown", "html": "<p>Ah, gotcha.  OK, yeah.  That's because of this other bit of code in Console.cc:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"c1\">/// \\todo Output disabled for windows, to allow tests to pass. We should</span>\n<span class=\"c1\">/// disable output just for tests on windows.</span>\n<span class=\"cp\">#ifndef _WIN32</span>\n<span class=\"k\">static</span> <span class=\"kt\">bool</span> <span class=\"n\">g_quiet</span> <span class=\"o\">=</span> <span class=\"nb\">false</span><span class=\"p\">;</span>\n<span class=\"cp\">#else</span>\n<span class=\"k\">static</span> <span class=\"kt\">bool</span> <span class=\"n\">g_quiet</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n<span class=\"cp\">#endif</span>\n</pre></div>\n\n\n<p>I'm not exactly sure what led to that code being introduced, but maybe we should try removing it and see what happens on Windows.</p>", "type": "rendered"}, "created_on": "2017-07-11T17:52:21.791354+00:00", "user": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "updated_on": null, "type": "issue_comment", "id": 38162232}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161/comments/38162352.json"}, "html": {"href": "#!/osrf/sdformat/issues/161#comment-38162352"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161.json"}}, "type": "issue", "id": 161, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "Output of Console class not working on Windows"}, "content": {"raw": "That was added in pull request #268, when tests weren't working at all in windows. Disabling output from the `Console` class fixed the tests but was a bit heavy-handed.", "markup": "markdown", "html": "<p>That was added in <a href=\"#!/osrf/sdformat/pull-requests/268/fix-windows-tests\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #268</a>, when tests weren't working at all in windows. Disabling output from the <code>Console</code> class fixed the tests but was a bit heavy-handed.</p>", "type": "rendered"}, "created_on": "2017-07-11T18:00:06.846888+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 38162352}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161/comments/38162365.json"}, "html": {"href": "#!/osrf/sdformat/issues/161#comment-38162365"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/161.json"}}, "type": "issue", "id": 161, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "Output of Console class not working on Windows"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2017-07-11T18:00:52.149766+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 38162365}], "page": 1, "size": 6}