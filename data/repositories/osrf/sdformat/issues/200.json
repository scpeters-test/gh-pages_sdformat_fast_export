{"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/200/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/200.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/200/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/200/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/200/support-multiple-frames-in-a-single-parent"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/200/vote"}}, "reporter": {"display_name": "Eric Cousineau", "uuid": "{71c9fc05-02c8-45e1-adfa-13c8ac3399dc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D"}, "html": {"href": "https://bitbucket.org/%7B71c9fc05-02c8-45e1-adfa-13c8ac3399dc%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557057:f3a199b9-5784-4964-9644-6ef224bc7dc1/28a4d748-0fd4-4038-bf3d-55a77eb73ede/128"}}, "nickname": "eacousineau", "type": "user", "account_id": "557057:f3a199b9-5784-4964-9644-6ef224bc7dc1"}, "title": "<frame/>: Support multiple frames in a single parent? Intended scope of frames? Use link names as frames?", "component": null, "votes": 2, "watches": 2, "content": {"raw": "Relates:\r\n\r\n* Issue #66\r\n* https://github.com/RobotLocomotion/drake/issues/9350\r\n\r\n(1) Since #237, the SDF specification states that `<frame/>` is `required=\"*\"`, which indicates that you can add any number of frames. However, perusing `test/integration/frame.cc`, I do see frames parsed, but I don't see multiple frames defined in a parent.\r\n\r\nIs the intent to support multiple frames in a parent? If so, could that be represented in the unittest?\r\n\r\n(2) Can I ask what the intended scope is for `<frame/>` tags?\r\nFrom the unittest, it looks like a frame from a `<link/>` can reference to a frame defined in a `<model/>`; is the reverse of that true? e.g. are the following things valid?\r\n```xml\r\n<model>\r\n  <frame name=\"link_mounting_point\">\r\n    <pose>tx ty tz rx ry rz</pose>\r\n  </frame>\r\n\r\n  <link name=\"link_1\">\r\n    <frame name=\"frame_1\">\r\n      <pose>tx ty tz rx ry rz</pose>\r\n    </frame>\r\n  </link>\r\n\r\n  <frame name=\"other_mounting_point\">\r\n    <!-- This one? -->\r\n    <pose frame=\"frame_1\">tx ty tz rx ry rz</pose>\r\n  </frame>\r\n</model>\r\n```\r\n\r\nIf so, can that also be incorporated into the unittest?\r\n\r\n(2.a) When you define a `<frame/>` inside of a `<link/>`, what happens if you do not specify the `frame` attribute for `<pose>`?\r\nIs the pose w.r.t. the parent element's base frame?\r\nFor this case:\r\n```xml\r\n<model>\r\n   <link name=\"my_link\">\r\n     <frame name=\"sub_frame\">\r\n        <pose>tx ty tz rx ry rz</pose>\r\n     </frame>\r\n   </link>\r\n</model>\r\n```\r\nIs `sub_frame` defined w.r.t. its parent, `/model/link[@name=\"my_link\"]`, or the model frame, `/model`?\r\n\r\n(3) Can I assume that I can refer to a link as a frame, such as the following?\r\n```xml\r\n<model>\r\n  <link name=\"my_link\"/>\r\n  <!-- Outside of \"my_link\" -->\r\n  <frame name=\"my_frame\">\r\n    <pose frame=\"my_link\">tx ty tz rx ry rz</pose>\r\n  </frame>\r\n</model>\r\n```\r\nIn Drake, I've found it useful to assume that when you add a link, you also add a frame by the same name (rather than manually duplicating it) so that you may query the body frame.\r\n\r\n(I guess you could do the same for `<joint/>` and other tags, but perhaps that is less useful?)\r\n\r\nExample commits supporting this in Drake:\r\n\r\n* [MultibodyTree / MultibodyPlant](https://github.com/RobotLocomotion/drake/pull/9351/commits/a74b43d22cb03bcb410a088b26a12f6187bb6bec#diff-e96623f5c8aa53dfc55491290b8603dcR132)\r\n* [RigidBodyTree](https://github.com/RobotLocomotion/drake/pull/8085/commits/028f6d03e40c3c5a41cf9731aeec2f38bf8dd981#diff-5ea3fc4421ecfc9aada2d9a91b402c95R3036)", "markup": "markdown", "html": "<p>Relates:</p>\n<ul>\n<li>Issue <a href=\"#!/osrf/sdformat/issues/66/use-pose-frames\" rel=\"nofollow\" title=\"Use pose frames\" class=\"ap-connect-link\"><s>#66</s></a></li>\n<li><a href=\"https://github.com/RobotLocomotion/drake/issues/9350\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/RobotLocomotion/drake/issues/9350</a></li>\n</ul>\n<p>(1) Since #237, the SDF specification states that <code>&lt;frame/&gt;</code> is <code>required=\"*\"</code>, which indicates that you can add any number of frames. However, perusing <code>test/integration/frame.cc</code>, I do see frames parsed, but I don't see multiple frames defined in a parent.</p>\n<p>Is the intent to support multiple frames in a parent? If so, could that be represented in the unittest?</p>\n<p>(2) Can I ask what the intended scope is for <code>&lt;frame/&gt;</code> tags?\nFrom the unittest, it looks like a frame from a <code>&lt;link/&gt;</code> can reference to a frame defined in a <code>&lt;model/&gt;</code>; is the reverse of that true? e.g. are the following things valid?</p>\n<div class=\"codehilite language-xml\"><pre><span></span><span class=\"nt\">&lt;model&gt;</span>\n  <span class=\"nt\">&lt;frame</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link_mounting_point&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;pose&gt;</span>tx ty tz rx ry rz<span class=\"nt\">&lt;/pose&gt;</span>\n  <span class=\"nt\">&lt;/frame&gt;</span>\n\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link_1&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;frame</span> <span class=\"na\">name=</span><span class=\"s\">&quot;frame_1&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;pose&gt;</span>tx ty tz rx ry rz<span class=\"nt\">&lt;/pose&gt;</span>\n    <span class=\"nt\">&lt;/frame&gt;</span>\n  <span class=\"nt\">&lt;/link&gt;</span>\n\n  <span class=\"nt\">&lt;frame</span> <span class=\"na\">name=</span><span class=\"s\">&quot;other_mounting_point&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!-- This one? --&gt;</span>\n    <span class=\"nt\">&lt;pose</span> <span class=\"na\">frame=</span><span class=\"s\">&quot;frame_1&quot;</span><span class=\"nt\">&gt;</span>tx ty tz rx ry rz<span class=\"nt\">&lt;/pose&gt;</span>\n  <span class=\"nt\">&lt;/frame&gt;</span>\n<span class=\"nt\">&lt;/model&gt;</span>\n</pre></div>\n\n\n<p>If so, can that also be incorporated into the unittest?</p>\n<p>(2.a) When you define a <code>&lt;frame/&gt;</code> inside of a <code>&lt;link/&gt;</code>, what happens if you do not specify the <code>frame</code> attribute for <code>&lt;pose&gt;</code>?\nIs the pose w.r.t. the parent element's base frame?\nFor this case:</p>\n<div class=\"codehilite language-xml\"><pre><span></span><span class=\"nt\">&lt;model&gt;</span>\n   <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;my_link&quot;</span><span class=\"nt\">&gt;</span>\n     <span class=\"nt\">&lt;frame</span> <span class=\"na\">name=</span><span class=\"s\">&quot;sub_frame&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;pose&gt;</span>tx ty tz rx ry rz<span class=\"nt\">&lt;/pose&gt;</span>\n     <span class=\"nt\">&lt;/frame&gt;</span>\n   <span class=\"nt\">&lt;/link&gt;</span>\n<span class=\"nt\">&lt;/model&gt;</span>\n</pre></div>\n\n\n<p>Is <code>sub_frame</code> defined w.r.t. its parent, <code>/model/link[@name=\"my_link\"]</code>, or the model frame, <code>/model</code>?</p>\n<p>(3) Can I assume that I can refer to a link as a frame, such as the following?</p>\n<div class=\"codehilite language-xml\"><pre><span></span><span class=\"nt\">&lt;model&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;my_link&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"c\">&lt;!-- Outside of &quot;my_link&quot; --&gt;</span>\n  <span class=\"nt\">&lt;frame</span> <span class=\"na\">name=</span><span class=\"s\">&quot;my_frame&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;pose</span> <span class=\"na\">frame=</span><span class=\"s\">&quot;my_link&quot;</span><span class=\"nt\">&gt;</span>tx ty tz rx ry rz<span class=\"nt\">&lt;/pose&gt;</span>\n  <span class=\"nt\">&lt;/frame&gt;</span>\n<span class=\"nt\">&lt;/model&gt;</span>\n</pre></div>\n\n\n<p>In Drake, I've found it useful to assume that when you add a link, you also add a frame by the same name (rather than manually duplicating it) so that you may query the body frame.</p>\n<p>(I guess you could do the same for <code>&lt;joint/&gt;</code> and other tags, but perhaps that is less useful?)</p>\n<p>Example commits supporting this in Drake:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/RobotLocomotion/drake/pull/9351/commits/a74b43d22cb03bcb410a088b26a12f6187bb6bec#diff-e96623f5c8aa53dfc55491290b8603dcR132\" rel=\"nofollow\">MultibodyTree / MultibodyPlant</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/RobotLocomotion/drake/pull/8085/commits/028f6d03e40c3c5a41cf9731aeec2f38bf8dd981#diff-5ea3fc4421ecfc9aada2d9a91b402c95R3036\" rel=\"nofollow\">RigidBodyTree</a></li>\n</ul>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-09-05T23:40:33.988499+00:00", "milestone": null, "updated_on": "2020-01-21T18:19:31.108659+00:00", "type": "issue", "id": 200}