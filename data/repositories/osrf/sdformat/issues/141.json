{"priority": "major", "kind": "proposal", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/141/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/141.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/141/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/141/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/141/embed-sdf-xml-files-into-library"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/141/vote"}}, "reporter": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "title": "Embed SDF XML files into library", "component": null, "votes": 2, "watches": 5, "content": {"raw": "I'm considering changing the sdformat library so that it directly embeds the SDF XML files (basically all of the contents of the sdf/ subdirectory) into resource strings in the library.  They would be separate XML files in the source repository, but at build time we would run an external program to make resource strings out of them, and then build that into the library.\r\n\r\nThe main benefit to doing so would be to remove any code within the library that goes looking through the filesystem to find these files.  This would make it faster, and remove a dependency on boost::filesystem.  It would also make it easier for the tests, and potentially easier to deploy the library in general, since you will now only need the .so .  It may also be slightly faster, though this is probably a minor benefit.\r\n\r\nThe potential downsides to doing so are removing visibility of the XML files from the end-user, but I'm not sure that is hugely useful anyway.  It also requires a rebuild of the library to \"upgrade\" the SDF XML files, but that seems pretty minor.\r\n\r\nAre there any other objections to this plan?", "markup": "markdown", "html": "<p>I'm considering changing the sdformat library so that it directly embeds the SDF XML files (basically all of the contents of the sdf/ subdirectory) into resource strings in the library.  They would be separate XML files in the source repository, but at build time we would run an external program to make resource strings out of them, and then build that into the library.</p>\n<p>The main benefit to doing so would be to remove any code within the library that goes looking through the filesystem to find these files.  This would make it faster, and remove a dependency on boost::filesystem.  It would also make it easier for the tests, and potentially easier to deploy the library in general, since you will now only need the .so .  It may also be slightly faster, though this is probably a minor benefit.</p>\n<p>The potential downsides to doing so are removing visibility of the XML files from the end-user, but I'm not sure that is hugely useful anyway.  It also requires a rebuild of the library to \"upgrade\" the SDF XML files, but that seems pretty minor.</p>\n<p>Are there any other objections to this plan?</p>", "type": "rendered"}, "assignee": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "state": "new", "version": null, "edited_on": null, "created_on": "2017-02-15T13:47:24.750591+00:00", "milestone": null, "updated_on": "2019-03-25T14:00:25.763140+00:00", "type": "issue", "id": 141}