{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/7/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/7.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/7/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/7/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/7/crash-when-parsing-urdf"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/7/vote"}}, "reporter": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "title": "Crash when parsing URDF", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I've built sdformat from default + gazebo from gazebo_1.9 + drcsim from rml.\r\n\r\nI get the following crash when trying to launch `atlas.launch`:\r\n\r\n~~~\r\n$ gdb --args gzserver atlas.world \r\nGNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2.1) 7.4-2012.04\r\nCopyright (C) 2012 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\r\nand \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-linux-gnu\".\r\nFor bug reporting instructions, please see:\r\n<http://bugs.launchpad.net/gdb-linaro/>...\r\nReading symbols from /home/gerkey/code/drc/install/bin/gzserver...done.\r\n(gdb) r\r\nStarting program: /home/gerkey/code/drc/install/bin/gzserver atlas.world\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n[New Thread 0x7fffe2399700 (LWP 7721)]\r\nGazebo multi-robot simulator, version 1.9.3\r\nCopyright (C) 2013 Open Source Robotics Foundation.\r\nReleased under the Apache 2 License.\r\nhttp://gazebosim.org\r\n\r\nterminate called after throwing an instance of 'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::bad_function_call> >'\r\n  what():  call to empty boost::function\r\n\r\nProgram received signal SIGABRT, Aborted.\r\n0x00007ffff478b425 in __GI_raise (sig=<optimized out>)\r\n    at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\r\n64\t../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\r\n(gdb) bt\r\n#0  0x00007ffff478b425 in __GI_raise (sig=<optimized out>)\r\n    at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\r\n#1  0x00007ffff478eb8b in __GI_abort () at abort.c:91\r\n#2  0x00007ffff4de169d in __gnu_cxx::__verbose_terminate_handler() ()\r\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#3  0x00007ffff4ddf846 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#4  0x00007ffff4ddf873 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#5  0x00007ffff4ddf96e in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#6  0x0000000000479<pre>e68 in boost::throw_exception<boost::bad_function_call> (e=...)\r\n    at /usr/include/boost/throw_exception.hpp:61\r\n#7  0x00007ffff582b08b in boost::function1<std::string, std::string const&>::operator() (\r\n    this=0x7ffff5ab1900, a0=...) at /usr/include/boost/function/function_template.hpp:1010\r\n#8  0x00007ffff582505a in sdf::findFile (_filename=..., _searchLocalPath=true, \r\n    _useCallback=true) at /home/gerkey/code/drc/sdformat/src/SDF.cc:116\r\n#9  0x00007ffff57dbd52 in sdf::readXml (_xml=0x7e1d40, _sdf=...)\r\n    at /home/gerkey/code/drc/sdformat/src/parser.cc:525\r\n#10 0x00007ffff57dd682 in sdf::readXml (_xml=0x7e53f0, _sdf=...)\r\n    at /home/gerkey/code/drc/sdformat/src/parser.cc:700\r\n#11 0x00007ffff57da2f0 in sdf::readDoc (_xmlDoc=0x7fffffffc2e0, _sdf=..., _source=...)\r\n    at /home/gerkey/code/drc/sdformat/src/parser.cc:348\r\n#12 0x00007ffff57d9546 in sdf::readFile (_filename=..., _sdf=...)\r\n    at /home/gerkey/code/drc/sdformat/src/parser.cc:257\r\n#13 0x00000000004713b2 in gazebo::Server::LoadFile (this=0x7211c0, _filename=..., _physics=...)\r\n    at /home/gerkey/code/drc/gazebo/gazebo/Server.cc:283\r\n#14 0x0000000000470637 in gazebo::Server::ParseArgs (this=0x7211c0, argc=2, argv=0x7fffffffcc48)\r\n    at /home/gerkey/code/drc/gazebo/gazebo/Server.cc:246\r\n#15 0x000000000046cf2a in main (argc=2, argv=0x7fffffffcc48)\r\n    at /home/gerkey/code/drc/gazebo/gazebo/server_main.cc:40\r\n(gdb) \r\n~~~\r\n\r\nLooks like somebody's calling `sdf::findFile()` with `_useCallback` set to `true` without having first called `sdf::setFindCallback()`.", "markup": "markdown", "html": "<p>I've built sdformat from default + gazebo from gazebo_1.9 + drcsim from rml.</p>\n<p>I get the following crash when trying to launch <code>atlas.launch</code>:</p>\n<div class=\"codehilite\"><pre><span></span>$ gdb --args gzserver atlas.world \nGNU gdb <span class=\"o\">(</span>Ubuntu/Linaro <span class=\"m\">7</span>.4-2012.04-0ubuntu2.1<span class=\"o\">)</span> <span class=\"m\">7</span>.4-2012.04\nCopyright <span class=\"o\">(</span>C<span class=\"o\">)</span> <span class=\"m\">2012</span> Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version <span class=\"m\">3</span> or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type <span class=\"s2\">&quot;show copying&quot;</span>\nand <span class=\"s2\">&quot;show warranty&quot;</span> <span class=\"k\">for</span> details.\nThis GDB was configured as <span class=\"s2\">&quot;x86_64-linux-gnu&quot;</span>.\nFor bug reporting instructions, please see:\n&lt;http://bugs.launchpad.net/gdb-linaro/&gt;...\nReading symbols from /home/gerkey/code/drc/install/bin/gzserver...done.\n<span class=\"o\">(</span>gdb<span class=\"o\">)</span> r\nStarting program: /home/gerkey/code/drc/install/bin/gzserver atlas.world\n<span class=\"o\">[</span>Thread debugging using libthread_db enabled<span class=\"o\">]</span>\nUsing host libthread_db library <span class=\"s2\">&quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;</span>.\n<span class=\"o\">[</span>New Thread 0x7fffe2399700 <span class=\"o\">(</span>LWP <span class=\"m\">7721</span><span class=\"o\">)]</span>\nGazebo multi-robot simulator, version <span class=\"m\">1</span>.9.3\nCopyright <span class=\"o\">(</span>C<span class=\"o\">)</span> <span class=\"m\">2013</span> Open Source Robotics Foundation.\nReleased under the Apache <span class=\"m\">2</span> License.\nhttp://gazebosim.org\n\nterminate called after throwing an instance of <span class=\"s1\">&#39;boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;boost::bad_function_call&gt; &gt;&#39;</span>\n  what<span class=\"o\">()</span>:  call to empty boost::function\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff478b425 in __GI_raise <span class=\"o\">(</span><span class=\"nv\">sig</span><span class=\"o\">=</span>&lt;optimized out&gt;<span class=\"o\">)</span>\n    at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n<span class=\"m\">64</span>  ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n<span class=\"o\">(</span>gdb<span class=\"o\">)</span> bt\n<span class=\"c1\">#0  0x00007ffff478b425 in __GI_raise (sig=&lt;optimized out&gt;)</span>\n    at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n<span class=\"c1\">#1  0x00007ffff478eb8b in __GI_abort () at abort.c:91</span>\n<span class=\"c1\">#2  0x00007ffff4de169d in __gnu_cxx::__verbose_terminate_handler() ()</span>\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n<span class=\"c1\">#3  0x00007ffff4ddf846 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6</span>\n<span class=\"c1\">#4  0x00007ffff4ddf873 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6</span>\n<span class=\"c1\">#5  0x00007ffff4ddf96e in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6</span>\n<span class=\"c1\">#6  0x0000000000479&lt;pre&gt;e68 in boost::throw_exception&lt;boost::bad_function_call&gt; (e=...)</span>\n    at /usr/include/boost/throw_exception.hpp:61\n<span class=\"c1\">#7  0x00007ffff582b08b in boost::function1&lt;std::string, std::string const&amp;&gt;::operator() (</span>\n    <span class=\"nv\">this</span><span class=\"o\">=</span>0x7ffff5ab1900, <span class=\"nv\">a0</span><span class=\"o\">=</span>...<span class=\"o\">)</span> at /usr/include/boost/function/function_template.hpp:1010\n<span class=\"c1\">#8  0x00007ffff582505a in sdf::findFile (_filename=..., _searchLocalPath=true, </span>\n    <span class=\"nv\">_useCallback</span><span class=\"o\">=</span><span class=\"nb\">true</span><span class=\"o\">)</span> at /home/gerkey/code/drc/sdformat/src/SDF.cc:116\n<span class=\"c1\">#9  0x00007ffff57dbd52 in sdf::readXml (_xml=0x7e1d40, _sdf=...)</span>\n    at /home/gerkey/code/drc/sdformat/src/parser.cc:525\n<span class=\"c1\">#10 0x00007ffff57dd682 in sdf::readXml (_xml=0x7e53f0, _sdf=...)</span>\n    at /home/gerkey/code/drc/sdformat/src/parser.cc:700\n<span class=\"c1\">#11 0x00007ffff57da2f0 in sdf::readDoc (_xmlDoc=0x7fffffffc2e0, _sdf=..., _source=...)</span>\n    at /home/gerkey/code/drc/sdformat/src/parser.cc:348\n<span class=\"c1\">#12 0x00007ffff57d9546 in sdf::readFile (_filename=..., _sdf=...)</span>\n    at /home/gerkey/code/drc/sdformat/src/parser.cc:257\n<span class=\"c1\">#13 0x00000000004713b2 in gazebo::Server::LoadFile (this=0x7211c0, _filename=..., _physics=...)</span>\n    at /home/gerkey/code/drc/gazebo/gazebo/Server.cc:283\n<span class=\"c1\">#14 0x0000000000470637 in gazebo::Server::ParseArgs (this=0x7211c0, argc=2, argv=0x7fffffffcc48)</span>\n    at /home/gerkey/code/drc/gazebo/gazebo/Server.cc:246\n<span class=\"c1\">#15 0x000000000046cf2a in main (argc=2, argv=0x7fffffffcc48)</span>\n    at /home/gerkey/code/drc/gazebo/gazebo/server_main.cc:40\n<span class=\"o\">(</span>gdb<span class=\"o\">)</span> \n</pre></div>\n\n\n<p>Looks like somebody's calling <code>sdf::findFile()</code> with <code>_useCallback</code> set to <code>true</code> without having first called <code>sdf::setFindCallback()</code>.</p>", "type": "rendered"}, "assignee": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2013-07-09T02:41:13.578269+00:00", "milestone": null, "updated_on": "2013-07-09T17:47:25.137530+00:00", "type": "issue", "id": 7}