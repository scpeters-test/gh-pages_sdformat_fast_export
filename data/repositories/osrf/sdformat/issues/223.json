{"priority": "blocker", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/223/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/223.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/223/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/223/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/223/sdformat-fails-to-build"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/223/vote"}}, "reporter": {"display_name": "acxz", "uuid": "{9dedb9bd-d101-4691-882b-c20ed6bbe205}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9dedb9bd-d101-4691-882b-c20ed6bbe205%7D"}, "html": {"href": "https://bitbucket.org/%7B9dedb9bd-d101-4691-882b-c20ed6bbe205%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cc8ac43174d2a0e4b04d3de/3ad0ca54-a1a2-4073-930a-eed4a566829d/128"}}, "nickname": "avcxz", "type": "user", "account_id": "5cc8ac43174d2a0e4b04d3de"}, "title": "sdformat fails to build", "component": null, "votes": 0, "watches": 1, "content": {"raw": "# Prerequisites\r\n\r\n\\[ \\] Put an X between the brackets on this line if you have done all of the following:\r\n\r\n* Checked the Q&A board for common solutions: [http://answers.gazebosim.org](http://answers.gazebosim.org)\r\n* Checked that your issue isn't already filed.\r\n* Checked that there is not already an Ignition package that provides the described functionality: https://ignitionrobotics.org/libs\r\n\r\nI have only checked the second point, since I believe 3 is not true and 1 will not be informative.\r\n\r\n# Description\r\n\r\nsdformat-6 is failing to compile for me. I am trying to install gazebo-10 and it requires version 6 of sdformat. Here is the error I receive:\r\n\r\n```\r\nTraceback (most recent call last):\r\n<internal:gem_prelude>:4:in `<internal:gem_prelude>': undefined method `gem' for main:Object (NoMethodError)\r\n    1: from <internal:gem_prelude>:3:in `<internal:gem_prelude>'\r\n<internal:gem_prelude>:6:in `rescue in <internal:gem_prelude>': uninitialized constant Gem::LoadError (NameError)\r\nmake[2]: *** [sdf/1.6/CMakeFiles/schema1_6.dir/build.make:115: sdf/1.6/actor.xsd] Error 1\r\nmake[1]: *** [CMakeFiles/Makefile2:1996: sdf/1.6/CMakeFiles/schema1_6.dir/all] Error 2\r\nmake: *** [Makefile:141: all] Error 2\r\n```\r\n\r\n# Steps to Reproduce\r\n\r\n1. Clone the latest sdformat version 6. [d4d9796](#!/osrf/sdformat/commits/d4d9796600b9) or get the relevant download from the 6.2 tag.\r\n2. Run the build process as shown \\[here\\]\\([http://gazebosim.org/tutorials?tut=install\\_dependencies\\_from\\_source&cat=install](http://gazebosim.org/tutorials?tut=install_dependencies_from_source&cat=install)\\)\r\n\r\n**Expected behavior:**\r\n\r\nThe build should complete successfully.\r\n\r\n**Actual behavior:**\r\n\r\nThe build fails with the following error.\r\n\r\n```\r\nTraceback (most recent call last):\r\n<internal:gem_prelude>:4:in `<internal:gem_prelude>': undefined method `gem' for main:Object (NoMethodError)\r\n    1: from <internal:gem_prelude>:3:in `<internal:gem_prelude>'\r\n<internal:gem_prelude>:6:in `rescue in <internal:gem_prelude>': uninitialized constant Gem::LoadError (NameError)\r\nmake[2]: *** [sdf/1.6/CMakeFiles/schema1_6.dir/build.make:115: sdf/1.6/actor.xsd] Error 1\r\nmake[1]: *** [CMakeFiles/Makefile2:1996: sdf/1.6/CMakeFiles/schema1_6.dir/all] Error 2\r\nmake: *** [Makefile:141: all] Error 2\r\n```\r\n\r\n\u200c\r\n\r\n**Reproduces how often:**\r\n\r\nEvery time I try to build sdformat-6.\r\n\r\n# Versions\r\n\r\nOS: ArchLinux\r\n\r\ncmake: v3.15.5\r\n\r\ngcc: v9.2.0\r\n\r\nsdformat: v6.2\r\n\r\nruby: v2.6.5 \\(this seems like a likely culprit to me since gem stuff is related to ruby and Ubuntu 18.04 offers ruby 2.5.1 which presumably works\\)\r\n\r\nI do not think the versions of the other dependencies are useful to this issue.\r\n\r\n# Additional Information\r\n\r\nAssigned blocker priority since this is preventing the install of gazebo and ros-melodic-desktop-full on ArchLinux. Would love to have this issue resolved ASAP.\r\n\r\nI went ahead and checked out the master branch to see if the issue comes up in future releases. Using the latest master \\([e66c789](#!/osrf/sdformat/commits/e66c789100b4644a799a602cc29928ec1b594794) as of posting\\) I still encounter the same issue.\r\n\r\nThinking a bit more about the issue, maybe the issue lies with gtest. Archlinux uses version 1.8.1, but sdformat uses its own packaged gtest. Is there a way for me to build sdformat using the system wide package of gtest instead of the prepackaged version of gtest provided by sdformat?", "markup": "markdown", "html": "<h1 id=\"markdown-header-prerequisites\">Prerequisites</h1>\n<p>[ ] Put an X between the brackets on this line if you have done all of the following:</p>\n<ul>\n<li>Checked the Q&amp;A board for common solutions: <a data-is-external-link=\"true\" href=\"http://answers.gazebosim.org\" rel=\"nofollow\">http://answers.gazebosim.org</a></li>\n<li>Checked that your issue isn't already filed.</li>\n<li>Checked that there is not already an Ignition package that provides the described functionality: <a href=\"https://ignitionrobotics.org/libs\" rel=\"nofollow\" class=\"ap-connect-link\">https://ignitionrobotics.org/libs</a></li>\n</ul>\n<p>I have only checked the second point, since I believe 3 is not true and 1 will not be informative.</p>\n<h1 id=\"markdown-header-description\">Description</h1>\n<p>sdformat-6 is failing to compile for me. I am trying to install gazebo-10 and it requires version 6 of sdformat. Here is the error I receive:</p>\n<div class=\"codehilite\"><pre><span></span>Traceback (most recent call last):\n&lt;internal:gem_prelude&gt;:4:in `&lt;internal:gem_prelude&gt;&#39;: undefined method `gem&#39; for main:Object (NoMethodError)\n    1: from &lt;internal:gem_prelude&gt;:3:in `&lt;internal:gem_prelude&gt;&#39;\n&lt;internal:gem_prelude&gt;:6:in `rescue in &lt;internal:gem_prelude&gt;&#39;: uninitialized constant Gem::LoadError (NameError)\nmake[2]: *** [sdf/1.6/CMakeFiles/schema1_6.dir/build.make:115: sdf/1.6/actor.xsd] Error 1\nmake[1]: *** [CMakeFiles/Makefile2:1996: sdf/1.6/CMakeFiles/schema1_6.dir/all] Error 2\nmake: *** [Makefile:141: all] Error 2\n</pre></div>\n\n\n<h1 id=\"markdown-header-steps-to-reproduce\">Steps to Reproduce</h1>\n<ol>\n<li>Clone the latest sdformat version 6. <a data-is-external-link=\"true\" href=\"#!/osrf/sdformat/commits/d4d9796600b9\" rel=\"nofollow\">d4d9796</a> or get the relevant download from the 6.2 tag.</li>\n<li>Run the build process as shown [here](<a data-is-external-link=\"true\" href=\"http://gazebosim.org/tutorials?tut=install_dependencies_from_source&amp;cat=install\" rel=\"nofollow\">http://gazebosim.org/tutorials?tut=install_dependencies_from_source&amp;cat=install</a>)</li>\n</ol>\n<p><strong>Expected behavior:</strong></p>\n<p>The build should complete successfully.</p>\n<p><strong>Actual behavior:</strong></p>\n<p>The build fails with the following error.</p>\n<div class=\"codehilite\"><pre><span></span>Traceback (most recent call last):\n&lt;internal:gem_prelude&gt;:4:in `&lt;internal:gem_prelude&gt;&#39;: undefined method `gem&#39; for main:Object (NoMethodError)\n    1: from &lt;internal:gem_prelude&gt;:3:in `&lt;internal:gem_prelude&gt;&#39;\n&lt;internal:gem_prelude&gt;:6:in `rescue in &lt;internal:gem_prelude&gt;&#39;: uninitialized constant Gem::LoadError (NameError)\nmake[2]: *** [sdf/1.6/CMakeFiles/schema1_6.dir/build.make:115: sdf/1.6/actor.xsd] Error 1\nmake[1]: *** [CMakeFiles/Makefile2:1996: sdf/1.6/CMakeFiles/schema1_6.dir/all] Error 2\nmake: *** [Makefile:141: all] Error 2\n</pre></div>\n\n\n<p>\u200c</p>\n<p><strong>Reproduces how often:</strong></p>\n<p>Every time I try to build sdformat-6.</p>\n<h1 id=\"markdown-header-versions\">Versions</h1>\n<p>OS: ArchLinux</p>\n<p>cmake: v3.15.5</p>\n<p>gcc: v9.2.0</p>\n<p>sdformat: v6.2</p>\n<p>ruby: v2.6.5 (this seems like a likely culprit to me since gem stuff is related to ruby and Ubuntu 18.04 offers ruby 2.5.1 which presumably works)</p>\n<p>I do not think the versions of the other dependencies are useful to this issue.</p>\n<h1 id=\"markdown-header-additional-information\">Additional Information</h1>\n<p>Assigned blocker priority since this is preventing the install of gazebo and ros-melodic-desktop-full on ArchLinux. Would love to have this issue resolved ASAP.</p>\n<p>I went ahead and checked out the master branch to see if the issue comes up in future releases. Using the latest master (<a data-is-external-link=\"true\" href=\"#!/osrf/sdformat/commits/e66c789100b4644a799a602cc29928ec1b594794\" rel=\"nofollow\">e66c789</a> as of posting) I still encounter the same issue.</p>\n<p>Thinking a bit more about the issue, maybe the issue lies with gtest. Archlinux uses version 1.8.1, but sdformat uses its own packaged gtest. Is there a way for me to build sdformat using the system wide package of gtest instead of the prepackaged version of gtest provided by sdformat?</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-11-16T19:54:22.132590+00:00", "milestone": null, "updated_on": "2019-11-26T05:36:31.817435+00:00", "type": "issue", "id": 223}