{"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/156/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/156.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/156/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/156/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/156/add-element-getelementcount"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/156/vote"}}, "reporter": {"display_name": "Martin Pecka", "uuid": "{41691c43-4ae0-49ba-ba45-3c36439f5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d1ad32a09564f856909994613fdbc37cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMP-1.png"}}, "nickname": "peci1", "type": "user", "account_id": "557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1"}, "title": "Add Element::GetElementCount()", "component": null, "votes": 1, "watches": 2, "content": {"raw": "The `Element` class is missing method `GetElementCount`, and probably also `IsEmpty`.\r\n\r\nThe first one should just return `this->dataPtr->elements.size()`, the latter could probably return true if the element has no attributes and no child elements.\r\n\r\nAdding at least the `GetElementCount` method would complete the API, where `GetAttributeCount` and `GetElementDescriptionCount` already exist.\r\n\r\nWithout this method, it is cumbersome to verify whether an element has any child elements. This is what I've come up with (it contains a completely useless object creation, which may get expensive):\r\n\r\n    auto isEmpty = element->GetFirstElement() != sdf::ElementPtr();\r\n\r\nThe cumbersomeness of this approach is elevated by the fact that `GetFirstElement` has no documentation at all, so there's no place that'd promise that `GetFirstElement` will always return a pointer to an empty element and not e.g. `nullptr`.", "markup": "markdown", "html": "<p>The <code>Element</code> class is missing method <code>GetElementCount</code>, and probably also <code>IsEmpty</code>.</p>\n<p>The first one should just return <code>this-&gt;dataPtr-&gt;elements.size()</code>, the latter could probably return true if the element has no attributes and no child elements.</p>\n<p>Adding at least the <code>GetElementCount</code> method would complete the API, where <code>GetAttributeCount</code> and <code>GetElementDescriptionCount</code> already exist.</p>\n<p>Without this method, it is cumbersome to verify whether an element has any child elements. This is what I've come up with (it contains a completely useless object creation, which may get expensive):</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">auto</span> <span class=\"nt\">isEmpty</span> <span class=\"o\">=</span> <span class=\"nt\">element-</span><span class=\"o\">&gt;</span><span class=\"nt\">GetFirstElement</span><span class=\"o\">()</span> <span class=\"o\">!=</span> <span class=\"nt\">sdf</span><span class=\"p\">::</span><span class=\"nd\">ElementPtr</span><span class=\"o\">();</span>\n</pre></div>\n\n\n<p>The cumbersomeness of this approach is elevated by the fact that <code>GetFirstElement</code> has no documentation at all, so there's no place that'd promise that <code>GetFirstElement</code> will always return a pointer to an empty element and not e.g. <code>nullptr</code>.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-05-09T15:04:14.163165+00:00", "milestone": null, "updated_on": "2017-05-09T15:04:14.163165+00:00", "type": "issue", "id": 156}