{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/214/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/214.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/214/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/214/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/214/urdf-to-sdf-parser-does-not-allow"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/214/vote"}}, "reporter": {"display_name": "Auguste Bourgois", "uuid": "{69e75446-c532-4da6-ad0a-07e54115e07e}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B69e75446-c532-4da6-ad0a-07e54115e07e%7D"}, "html": {"href": "https://bitbucket.org/%7B69e75446-c532-4da6-ad0a-07e54115e07e%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5c9d0e64a54a69118b3226c6/6962844c-90a7-4b96-8cc0-0ca8346bcd7e/128"}}, "nickname": "AugusteBourgois", "type": "user", "account_id": "5c9d0e64a54a69118b3226c6"}, "title": "URDF to SDF parser does not allow attachment of light to links", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Hello,\r\n\r\n# Prerequisites\r\n* [X] Checked the Q&A board for common solutions: http://answers.gazebosim.org\r\n* [X] Checked that your issue isn't already filed.\r\n* [X] Checked that there is not already an Ignition package that provides the described functionality: https://ignitionrobotics.org/libs\r\n\r\n# Description \r\n\r\nI am trying to use the FlashLightPlugin from Gazebo to attach a light to the link of a robot. Unfortunately, it doesn't work, and the reason might be the following :\r\nWhen converting a URDF file to SDF, whether manually using the command `gz sdf --print file.urdf > file.sdf` or automatically when launching gazebo, the light components attached to links are not parsed and do not appear in the resulting SDF file.\r\n\r\n# Steps to Reproduce\r\n\r\n1. Create a simple URDF file (See test.urdf)\r\n2. Convert the file to SDF using `gz sdf --print file.urdf > file.sdf` (See file.sdf)\r\n3. The <light> component has disappeared during the conversion from URDF to SDF.\r\n\r\n**Expected behavior:**  \r\n\r\nThe light component should be in the resulting SDF file.\r\n\r\n**Actual behavior:**\r\n\r\nThe light component is not in the resulting SDF file.\r\n\r\n**Reproduces how often:** \r\n\r\nEvery time I tried.\r\n\r\n# Versions\r\n\r\nGazebo 9, Ubuntu 16.04, ROS Kinetic, SDF 1.6\r\n\r\n# Additional Information\r\n\r\nThe problem comes from the URDF parser used to convert URDF files into SDF files. It only looks for <collision>, <visual> and <inertial> elements in a <link>.\r\nA way of avoiding that could be to just copy-n-paste the <light> element directly in the right place of the resulting SDF file.\r\nAnother way, which seems a bit longer, could be to parse the <light> element just like any other element, and recreate it in the right place in the resulting SDF file.\r\n\r\nI guess this \"bug\" could be considered as a feature request, so I apologize in advance in that case.\r\n\r\nIf necessary, I could take part in the development of this bugfix/feature, even though I don't really know where to start.", "markup": "markdown", "html": "<p>Hello,</p>\n<h1 id=\"markdown-header-prerequisites\">Prerequisites</h1>\n<ul>\n<li>[X] Checked the Q&amp;A board for common solutions: <a href=\"http://answers.gazebosim.org\" rel=\"nofollow\" class=\"ap-connect-link\">http://answers.gazebosim.org</a></li>\n<li>[X] Checked that your issue isn't already filed.</li>\n<li>[X] Checked that there is not already an Ignition package that provides the described functionality: <a href=\"https://ignitionrobotics.org/libs\" rel=\"nofollow\" class=\"ap-connect-link\">https://ignitionrobotics.org/libs</a></li>\n</ul>\n<h1 id=\"markdown-header-description\">Description</h1>\n<p>I am trying to use the FlashLightPlugin from Gazebo to attach a light to the link of a robot. Unfortunately, it doesn't work, and the reason might be the following :\nWhen converting a URDF file to SDF, whether manually using the command <code>gz sdf --print file.urdf &gt; file.sdf</code> or automatically when launching gazebo, the light components attached to links are not parsed and do not appear in the resulting SDF file.</p>\n<h1 id=\"markdown-header-steps-to-reproduce\">Steps to Reproduce</h1>\n<ol>\n<li>Create a simple URDF file (See test.urdf)</li>\n<li>Convert the file to SDF using <code>gz sdf --print file.urdf &gt; file.sdf</code> (See file.sdf)</li>\n<li>The &lt;light&gt; component has disappeared during the conversion from URDF to SDF.</li>\n</ol>\n<p><strong>Expected behavior:</strong>  </p>\n<p>The light component should be in the resulting SDF file.</p>\n<p><strong>Actual behavior:</strong></p>\n<p>The light component is not in the resulting SDF file.</p>\n<p><strong>Reproduces how often:</strong> </p>\n<p>Every time I tried.</p>\n<h1 id=\"markdown-header-versions\">Versions</h1>\n<p>Gazebo 9, Ubuntu 16.04, ROS Kinetic, SDF 1.6</p>\n<h1 id=\"markdown-header-additional-information\">Additional Information</h1>\n<p>The problem comes from the URDF parser used to convert URDF files into SDF files. It only looks for &lt;collision&gt;, &lt;visual&gt; and &lt;inertial&gt; elements in a &lt;link&gt;.\nA way of avoiding that could be to just copy-n-paste the &lt;light&gt; element directly in the right place of the resulting SDF file.\nAnother way, which seems a bit longer, could be to parse the &lt;light&gt; element just like any other element, and recreate it in the right place in the resulting SDF file.</p>\n<p>I guess this \"bug\" could be considered as a feature request, so I apologize in advance in that case.</p>\n<p>If necessary, I could take part in the development of this bugfix/feature, even though I don't really know where to start.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-03-29T12:45:13.048992+00:00", "milestone": null, "updated_on": "2019-03-29T18:25:14.271223+00:00", "type": "issue", "id": 214}