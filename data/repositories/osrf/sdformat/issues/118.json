{"priority": "minor", "kind": "proposal", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/118/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/118.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/118/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/118/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/118/rfc-convert-xmlschemarb-to-c"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/118/vote"}}, "reporter": {"display_name": "Rich Mattes", "uuid": "{1ef6f3dd-b8db-412b-94e9-e430e7aafd23}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ef6f3dd-b8db-412b-94e9-e430e7aafd23%7D"}, "html": {"href": "https://bitbucket.org/%7B1ef6f3dd-b8db-412b-94e9-e430e7aafd23%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d431baafeedf5d8921cb50a3c9902e16d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRM-0.png"}}, "nickname": "richmattes", "type": "user", "account_id": "557058:a38935e3-9a08-40d9-917a-ff19973e58df"}, "title": "RFC: Convert xmlschema.rb to c++", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I had some spare time a few months ago and managed to convert xmlschema.rb to c++ using tinyxml.  I was wondering if there's any interest from you guys in supporting such a switch.\r\n\r\nThe tinyxml-based C++ xmlschema is basically a line-for-line port of the existing ruby script to C++.  It provides the following:\r\n\r\nBenefits:\r\n\r\n* No build-time dependency on ruby (might be nice for Windows)\r\n* Runs faster than the ruby schema generator\r\n\r\nDrawbacks:\r\n\r\n* Lose dynamic features ruby provides\r\n* Whitespace in CDATA (descriptions) isn't preserved when converting from .sdf files\r\n\r\nThe lossy treatment of whitespace seems to be a [well-known](http://stackoverflow.com/questions/11450442/multiple-whitespaces-removed-from-xml-when-they-should-not-be) attribute of tinyxml, and they recommend that tinyxml2 should be used instead (in general, and also because of the whitespace handling.)\r\n\r\nI ended up making a second version of xmlschema using tinyxml2, and was able to get identical output to the ruby scripts.  It wasn't terribly difficult to go from tinyxml->tinyxml2, but using a different version of tinyxml than sdformat uses seemed to be kind of silly, and I didn't have enough time to try to port sdformat to tinyxml2.\r\n\r\nIf there's interest in either or both versions of the code I'll clean it up and create PRs, otherwise you can go ahead and close this bug.", "markup": "markdown", "html": "<p>I had some spare time a few months ago and managed to convert xmlschema.rb to c++ using tinyxml.  I was wondering if there's any interest from you guys in supporting such a switch.</p>\n<p>The tinyxml-based C++ xmlschema is basically a line-for-line port of the existing ruby script to C++.  It provides the following:</p>\n<p>Benefits:</p>\n<ul>\n<li>No build-time dependency on ruby (might be nice for Windows)</li>\n<li>Runs faster than the ruby schema generator</li>\n</ul>\n<p>Drawbacks:</p>\n<ul>\n<li>Lose dynamic features ruby provides</li>\n<li>Whitespace in CDATA (descriptions) isn't preserved when converting from .sdf files</li>\n</ul>\n<p>The lossy treatment of whitespace seems to be a <a data-is-external-link=\"true\" href=\"http://stackoverflow.com/questions/11450442/multiple-whitespaces-removed-from-xml-when-they-should-not-be\" rel=\"nofollow\">well-known</a> attribute of tinyxml, and they recommend that tinyxml2 should be used instead (in general, and also because of the whitespace handling.)</p>\n<p>I ended up making a second version of xmlschema using tinyxml2, and was able to get identical output to the ruby scripts.  It wasn't terribly difficult to go from tinyxml-&gt;tinyxml2, but using a different version of tinyxml than sdformat uses seemed to be kind of silly, and I didn't have enough time to try to port sdformat to tinyxml2.</p>\n<p>If there's interest in either or both versions of the code I'll clean it up and create PRs, otherwise you can go ahead and close this bug.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2016-04-03T23:09:07.603777+00:00", "milestone": null, "updated_on": "2016-04-06T00:06:35.982049+00:00", "type": "issue", "id": 118}