{"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/214/comments/51398090.json"}, "html": {"href": "#!/osrf/sdformat/issues/214#comment-51398090"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/214.json"}}, "type": "issue", "id": 214, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "URDF to SDF parser does not allow attachment of light to links"}, "content": {"raw": "Thanks for reporting the issue. I think the proper way to specify gazebo specific tags to a link is using `<gazebo reference=\"link_name\">`. And the plugin needs to be under `<robot>` instead of `<link>`. So I modified your example and it seems to work for me. Can you give it a try?\n```\n<?xml version=\"1.0\" ?>\n<!-- =================================================================================== -->\n<!-- |    This document was autogenerated by xacro                                     | -->\n<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->\n<!-- =================================================================================== -->\n<robot name=\"test_light_robot\" xmlns:xacro=\"http://www.ros.org/wiki/xacro\">\n  <!-- Base Link -->\n  <link name=\"robot\">\n    <collision>\n      <geometry>\n        <box size=\"1 1 1\"/>\n      </geometry>\n    </collision>\n    <visual>\n      <geometry>\n        <box size=\"1 1 1\"/>\n      </geometry>\n    </visual>\n    <inertial>\n      <mass value=\"1\"/>\n      <inertia ixx=\"1\" ixy=\"0.0\" ixz=\"0.0\" iyy=\"1\" iyz=\"0.0\" izz=\"1\"/>\n    </inertial>\n  </link>\n  <joint name=\"j_robot_light_link\" type=\"revolute\">\n    <parent link=\"robot\"/>\n    <child link=\"light_link\"/>\n    <limit effort=\"0\" lower=\"0\" upper=\"0\" velocity=\"0\"/>\n    <origin rpy=\"0 0 0\" xyz=\"0 0 1.5\"/>\n  </joint>\n  <!-- Light link -->\n  <link name=\"light_link\">\n    <collision>\n      <origin rpy=\"0 1.57079632679 0\" xyz=\"0 0 0\"/>\n      <geometry>\n        <cylinder length=\"0.15\" radius=\"0.025\"/>\n      </geometry>\n    </collision>\n    <visual>\n      <origin rpy=\"0 1.57079632679 0\" xyz=\"0 0 0\"/>\n      <geometry>\n        <cylinder length=\"0.15\" radius=\"0.025\"/>\n      </geometry>\n    </visual>\n    <inertial>\n      <mass value=\"0.0001\"/>\n      <inertia ixx=\"0.0001\" ixy=\"0.0\" ixz=\"0.0\" iyy=\"0.0001\" iyz=\"0.0\" izz=\"0.0001\"/>\n    </inertial>\n  </link>\n  <!-- Light -->\n  <gazebo reference=\"light_link\">\n    <light name=\"light\" type=\"spot\">\n      <pose>1 0 0 0 0 0</pose>\n      <diffuse>1 1 1 1</diffuse>\n      <specular>1 1 1 1</specular>\n      <attenuation>\n        <range>20</range>\n        <linear>0.05</linear>\n        <constant>0.05</constant>\n        <quadratic>0.01</quadratic>\n      </attenuation>\n      <direction>1 0 0</direction>\n      <spot>\n        <inner_angle>0.25</inner_angle>\n        <outer_angle>1.0</outer_angle>\n        <falloff>1.0</falloff>\n      </spot>\n    </light>\n  </gazebo>\n  <!-- Flashlight plugin -->\n  <gazebo>\n    <plugin filename=\"libUnderwaterLightPlugin.so\" name=\"light\">\n      <serviceName>light_control</serviceName>\n      <enable>true</enable>\n      <light>\n        <id>light_link/light</id>\n        <duration>1</duration>\n        <interval>0</interval>\n      </light>\n    </plugin>\n  </gazebo>\n</robot>\n```", "markup": "markdown", "html": "<p>Thanks for reporting the issue. I think the proper way to specify gazebo specific tags to a link is using <code>&lt;gazebo reference=\"link_name\"&gt;</code>. And the plugin needs to be under <code>&lt;robot&gt;</code> instead of <code>&lt;link&gt;</code>. So I modified your example and it seems to work for me. Can you give it a try?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>\n<span class=\"c\">&lt;!-- =================================================================================== --&gt;</span>\n<span class=\"c\">&lt;!-- |    This document was autogenerated by xacro                                     | --&gt;</span>\n<span class=\"c\">&lt;!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | --&gt;</span>\n<span class=\"c\">&lt;!-- =================================================================================== --&gt;</span>\n<span class=\"nt\">&lt;robot</span> <span class=\"na\">name=</span><span class=\"s\">&quot;test_light_robot&quot;</span> <span class=\"na\">xmlns:xacro=</span><span class=\"s\">&quot;http://www.ros.org/wiki/xacro&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"c\">&lt;!-- Base Link --&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;robot&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;collision&gt;</span>\n      <span class=\"nt\">&lt;geometry&gt;</span>\n        <span class=\"nt\">&lt;box</span> <span class=\"na\">size=</span><span class=\"s\">&quot;1 1 1&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/geometry&gt;</span>\n    <span class=\"nt\">&lt;/collision&gt;</span>\n    <span class=\"nt\">&lt;visual&gt;</span>\n      <span class=\"nt\">&lt;geometry&gt;</span>\n        <span class=\"nt\">&lt;box</span> <span class=\"na\">size=</span><span class=\"s\">&quot;1 1 1&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/geometry&gt;</span>\n    <span class=\"nt\">&lt;/visual&gt;</span>\n    <span class=\"nt\">&lt;inertial&gt;</span>\n      <span class=\"nt\">&lt;mass</span> <span class=\"na\">value=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;inertia</span> <span class=\"na\">ixx=</span><span class=\"s\">&quot;1&quot;</span> <span class=\"na\">ixy=</span><span class=\"s\">&quot;0.0&quot;</span> <span class=\"na\">ixz=</span><span class=\"s\">&quot;0.0&quot;</span> <span class=\"na\">iyy=</span><span class=\"s\">&quot;1&quot;</span> <span class=\"na\">iyz=</span><span class=\"s\">&quot;0.0&quot;</span> <span class=\"na\">izz=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/inertial&gt;</span>\n  <span class=\"nt\">&lt;/link&gt;</span>\n  <span class=\"nt\">&lt;joint</span> <span class=\"na\">name=</span><span class=\"s\">&quot;j_robot_light_link&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;revolute&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;parent</span> <span class=\"na\">link=</span><span class=\"s\">&quot;robot&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;child</span> <span class=\"na\">link=</span><span class=\"s\">&quot;light_link&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;limit</span> <span class=\"na\">effort=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">lower=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">upper=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">velocity=</span><span class=\"s\">&quot;0&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;origin</span> <span class=\"na\">rpy=</span><span class=\"s\">&quot;0 0 0&quot;</span> <span class=\"na\">xyz=</span><span class=\"s\">&quot;0 0 1.5&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/joint&gt;</span>\n  <span class=\"c\">&lt;!-- Light link --&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;light_link&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;collision&gt;</span>\n      <span class=\"nt\">&lt;origin</span> <span class=\"na\">rpy=</span><span class=\"s\">&quot;0 1.57079632679 0&quot;</span> <span class=\"na\">xyz=</span><span class=\"s\">&quot;0 0 0&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;geometry&gt;</span>\n        <span class=\"nt\">&lt;cylinder</span> <span class=\"na\">length=</span><span class=\"s\">&quot;0.15&quot;</span> <span class=\"na\">radius=</span><span class=\"s\">&quot;0.025&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/geometry&gt;</span>\n    <span class=\"nt\">&lt;/collision&gt;</span>\n    <span class=\"nt\">&lt;visual&gt;</span>\n      <span class=\"nt\">&lt;origin</span> <span class=\"na\">rpy=</span><span class=\"s\">&quot;0 1.57079632679 0&quot;</span> <span class=\"na\">xyz=</span><span class=\"s\">&quot;0 0 0&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;geometry&gt;</span>\n        <span class=\"nt\">&lt;cylinder</span> <span class=\"na\">length=</span><span class=\"s\">&quot;0.15&quot;</span> <span class=\"na\">radius=</span><span class=\"s\">&quot;0.025&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/geometry&gt;</span>\n    <span class=\"nt\">&lt;/visual&gt;</span>\n    <span class=\"nt\">&lt;inertial&gt;</span>\n      <span class=\"nt\">&lt;mass</span> <span class=\"na\">value=</span><span class=\"s\">&quot;0.0001&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;inertia</span> <span class=\"na\">ixx=</span><span class=\"s\">&quot;0.0001&quot;</span> <span class=\"na\">ixy=</span><span class=\"s\">&quot;0.0&quot;</span> <span class=\"na\">ixz=</span><span class=\"s\">&quot;0.0&quot;</span> <span class=\"na\">iyy=</span><span class=\"s\">&quot;0.0001&quot;</span> <span class=\"na\">iyz=</span><span class=\"s\">&quot;0.0&quot;</span> <span class=\"na\">izz=</span><span class=\"s\">&quot;0.0001&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/inertial&gt;</span>\n  <span class=\"nt\">&lt;/link&gt;</span>\n  <span class=\"c\">&lt;!-- Light --&gt;</span>\n  <span class=\"nt\">&lt;gazebo</span> <span class=\"na\">reference=</span><span class=\"s\">&quot;light_link&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;light</span> <span class=\"na\">name=</span><span class=\"s\">&quot;light&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;spot&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;pose&gt;</span>1 0 0 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;diffuse&gt;</span>1 1 1 1<span class=\"nt\">&lt;/diffuse&gt;</span>\n      <span class=\"nt\">&lt;specular&gt;</span>1 1 1 1<span class=\"nt\">&lt;/specular&gt;</span>\n      <span class=\"nt\">&lt;attenuation&gt;</span>\n        <span class=\"nt\">&lt;range&gt;</span>20<span class=\"nt\">&lt;/range&gt;</span>\n        <span class=\"nt\">&lt;linear&gt;</span>0.05<span class=\"nt\">&lt;/linear&gt;</span>\n        <span class=\"nt\">&lt;constant&gt;</span>0.05<span class=\"nt\">&lt;/constant&gt;</span>\n        <span class=\"nt\">&lt;quadratic&gt;</span>0.01<span class=\"nt\">&lt;/quadratic&gt;</span>\n      <span class=\"nt\">&lt;/attenuation&gt;</span>\n      <span class=\"nt\">&lt;direction&gt;</span>1 0 0<span class=\"nt\">&lt;/direction&gt;</span>\n      <span class=\"nt\">&lt;spot&gt;</span>\n        <span class=\"nt\">&lt;inner_angle&gt;</span>0.25<span class=\"nt\">&lt;/inner_angle&gt;</span>\n        <span class=\"nt\">&lt;outer_angle&gt;</span>1.0<span class=\"nt\">&lt;/outer_angle&gt;</span>\n        <span class=\"nt\">&lt;falloff&gt;</span>1.0<span class=\"nt\">&lt;/falloff&gt;</span>\n      <span class=\"nt\">&lt;/spot&gt;</span>\n    <span class=\"nt\">&lt;/light&gt;</span>\n  <span class=\"nt\">&lt;/gazebo&gt;</span>\n  <span class=\"c\">&lt;!-- Flashlight plugin --&gt;</span>\n  <span class=\"nt\">&lt;gazebo&gt;</span>\n    <span class=\"nt\">&lt;plugin</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libUnderwaterLightPlugin.so&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;light&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;serviceName&gt;</span>light_control<span class=\"nt\">&lt;/serviceName&gt;</span>\n      <span class=\"nt\">&lt;enable&gt;</span>true<span class=\"nt\">&lt;/enable&gt;</span>\n      <span class=\"nt\">&lt;light&gt;</span>\n        <span class=\"nt\">&lt;id&gt;</span>light_link/light<span class=\"nt\">&lt;/id&gt;</span>\n        <span class=\"nt\">&lt;duration&gt;</span>1<span class=\"nt\">&lt;/duration&gt;</span>\n        <span class=\"nt\">&lt;interval&gt;</span>0<span class=\"nt\">&lt;/interval&gt;</span>\n      <span class=\"nt\">&lt;/light&gt;</span>\n    <span class=\"nt\">&lt;/plugin&gt;</span>\n  <span class=\"nt\">&lt;/gazebo&gt;</span>\n<span class=\"nt\">&lt;/robot&gt;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2019-03-29T15:13:48.243605+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": null, "type": "issue_comment", "id": 51398090}