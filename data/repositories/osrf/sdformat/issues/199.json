{"priority": "major", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/199/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/199.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/199/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/199/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/199/urdf-to-sdf-conversion-ignores-links"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/199/vote"}}, "reporter": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "title": "URDF to SDF conversion ignores links without inertia", "component": null, "votes": 0, "watches": 1, "content": {"raw": "For example, this:\r\n\r\n~~~\r\n<?xml version=\"1.0\" ?>\r\n<robot name=\"always_ignored\">\r\n  <link name=\"link\">\r\n    <visual>\r\n      <geometry>\r\n        <sphere radius=\"1.0\"/>\r\n      </geometry>\r\n    </visual>\r\n  </link>\r\n</robot>\r\n~~~\r\n\r\nResults in:\r\n\r\n~~~\r\n$ gz sdf -p /tmp/urdf_ball.urdf \r\n<sdf version='1.6'>\r\n  <model name='always_ignored'/>\r\n</sdf>\r\n~~~\r\n\r\nBut when inertia is added, the link is not ignored:\r\n\r\n~~~\r\n<?xml version=\"1.0\" ?>\r\n<robot name=\"always_ignored\">\r\n  <link name=\"link\">\r\n    <visual>\r\n      <geometry>\r\n        <sphere radius=\"1.0\"/>\r\n      </geometry>\r\n    </visual>\r\n    <inertial>\r\n      <mass value=\"1\"/>\r\n      <inertia ixx=\"1\" ixy=\"0.0\" ixz=\"0.0\" iyy=\"1\" iyz=\"0.0\" izz=\"1\"/>\r\n    </inertial>\r\n  </link>\r\n</robot>\r\n~~~\r\n\r\n~~~\r\n$ gz sdf -p /tmp/urdf_ball.urdf \r\n<sdf version='1.6'>\r\n  <model name='always_ignored'>\r\n    <link name='link'>\r\n      <pose frame=''>0 0 0 0 -0 0</pose>\r\n      <inertial>\r\n        <pose frame=''>0 0 0 0 -0 0</pose>\r\n        <mass>1</mass>\r\n        <inertia>\r\n          <ixx>1</ixx>\r\n          <ixy>0</ixy>\r\n          <ixz>0</ixz>\r\n          <iyy>1</iyy>\r\n          <iyz>0</iyz>\r\n          <izz>1</izz>\r\n        </inertia>\r\n      </inertial>\r\n      <visual name='link_visual'>\r\n        <pose frame=''>0 0 0 0 -0 0</pose>\r\n        <geometry>\r\n          <sphere>\r\n            <radius>1</radius>\r\n          </sphere>\r\n        </geometry>\r\n      </visual>\r\n    </link>\r\n  </model>\r\n</sdf>\r\n~~~\r\n\r\n---\r\n\r\nIt could be argued that:\r\n\r\n* it is good practice to add inertia for simulation\r\n* URDF will rarely be used to describe static objects, where inertia is ignored\r\n\r\nBut I'd expect a URDF link without an inertia element to be converted to an SDF link without an inertia element, which is valid SDF.\r\n\r\nThis can become very confusing for someone trying to convert URDF files from the [beginner tutorials](http://wiki.ros.org/urdf/Tutorials/Building%20a%20Visual%20Robot%20Model%20with%20URDF%20from%20Scratch) to SDF and getting an empty model - *based on a true story*.", "markup": "markdown", "html": "<p>For example, this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>\n<span class=\"nt\">&lt;robot</span> <span class=\"na\">name=</span><span class=\"s\">&quot;always_ignored&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;visual&gt;</span>\n      <span class=\"nt\">&lt;geometry&gt;</span>\n        <span class=\"nt\">&lt;sphere</span> <span class=\"na\">radius=</span><span class=\"s\">&quot;1.0&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/geometry&gt;</span>\n    <span class=\"nt\">&lt;/visual&gt;</span>\n  <span class=\"nt\">&lt;/link&gt;</span>\n<span class=\"nt\">&lt;/robot&gt;</span>\n</pre></div>\n\n\n<p>Results in:</p>\n<div class=\"codehilite\"><pre><span></span>$ gz sdf -p /tmp/urdf_ball.urdf \n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&#39;1.6&#39;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&#39;always_ignored&#39;</span><span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/sdf&gt;</span>\n</pre></div>\n\n\n<p>But when inertia is added, the link is not ignored:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>\n<span class=\"nt\">&lt;robot</span> <span class=\"na\">name=</span><span class=\"s\">&quot;always_ignored&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;visual&gt;</span>\n      <span class=\"nt\">&lt;geometry&gt;</span>\n        <span class=\"nt\">&lt;sphere</span> <span class=\"na\">radius=</span><span class=\"s\">&quot;1.0&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/geometry&gt;</span>\n    <span class=\"nt\">&lt;/visual&gt;</span>\n    <span class=\"nt\">&lt;inertial&gt;</span>\n      <span class=\"nt\">&lt;mass</span> <span class=\"na\">value=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;inertia</span> <span class=\"na\">ixx=</span><span class=\"s\">&quot;1&quot;</span> <span class=\"na\">ixy=</span><span class=\"s\">&quot;0.0&quot;</span> <span class=\"na\">ixz=</span><span class=\"s\">&quot;0.0&quot;</span> <span class=\"na\">iyy=</span><span class=\"s\">&quot;1&quot;</span> <span class=\"na\">iyz=</span><span class=\"s\">&quot;0.0&quot;</span> <span class=\"na\">izz=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/inertial&gt;</span>\n  <span class=\"nt\">&lt;/link&gt;</span>\n<span class=\"nt\">&lt;/robot&gt;</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>$ gz sdf -p /tmp/urdf_ball.urdf \n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&#39;1.6&#39;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&#39;always_ignored&#39;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&#39;link&#39;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;pose</span> <span class=\"na\">frame=</span><span class=\"s\">&#39;&#39;</span><span class=\"nt\">&gt;</span>0 0 0 0 -0 0<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;inertial&gt;</span>\n        <span class=\"nt\">&lt;pose</span> <span class=\"na\">frame=</span><span class=\"s\">&#39;&#39;</span><span class=\"nt\">&gt;</span>0 0 0 0 -0 0<span class=\"nt\">&lt;/pose&gt;</span>\n        <span class=\"nt\">&lt;mass&gt;</span>1<span class=\"nt\">&lt;/mass&gt;</span>\n        <span class=\"nt\">&lt;inertia&gt;</span>\n          <span class=\"nt\">&lt;ixx&gt;</span>1<span class=\"nt\">&lt;/ixx&gt;</span>\n          <span class=\"nt\">&lt;ixy&gt;</span>0<span class=\"nt\">&lt;/ixy&gt;</span>\n          <span class=\"nt\">&lt;ixz&gt;</span>0<span class=\"nt\">&lt;/ixz&gt;</span>\n          <span class=\"nt\">&lt;iyy&gt;</span>1<span class=\"nt\">&lt;/iyy&gt;</span>\n          <span class=\"nt\">&lt;iyz&gt;</span>0<span class=\"nt\">&lt;/iyz&gt;</span>\n          <span class=\"nt\">&lt;izz&gt;</span>1<span class=\"nt\">&lt;/izz&gt;</span>\n        <span class=\"nt\">&lt;/inertia&gt;</span>\n      <span class=\"nt\">&lt;/inertial&gt;</span>\n      <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&#39;link_visual&#39;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;pose</span> <span class=\"na\">frame=</span><span class=\"s\">&#39;&#39;</span><span class=\"nt\">&gt;</span>0 0 0 0 -0 0<span class=\"nt\">&lt;/pose&gt;</span>\n        <span class=\"nt\">&lt;geometry&gt;</span>\n          <span class=\"nt\">&lt;sphere&gt;</span>\n            <span class=\"nt\">&lt;radius&gt;</span>1<span class=\"nt\">&lt;/radius&gt;</span>\n          <span class=\"nt\">&lt;/sphere&gt;</span>\n        <span class=\"nt\">&lt;/geometry&gt;</span>\n      <span class=\"nt\">&lt;/visual&gt;</span>\n    <span class=\"nt\">&lt;/link&gt;</span>\n  <span class=\"nt\">&lt;/model&gt;</span>\n<span class=\"nt\">&lt;/sdf&gt;</span>\n</pre></div>\n\n\n<hr />\n<p>It could be argued that:</p>\n<ul>\n<li>it is good practice to add inertia for simulation</li>\n<li>URDF will rarely be used to describe static objects, where inertia is ignored</li>\n</ul>\n<p>But I'd expect a URDF link without an inertia element to be converted to an SDF link without an inertia element, which is valid SDF.</p>\n<p>This can become very confusing for someone trying to convert URDF files from the <a data-is-external-link=\"true\" href=\"http://wiki.ros.org/urdf/Tutorials/Building%20a%20Visual%20Robot%20Model%20with%20URDF%20from%20Scratch\" rel=\"nofollow\">beginner tutorials</a> to SDF and getting an empty model - <em>based on a true story</em>.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2018-09-05T18:17:51.921693+00:00", "milestone": null, "updated_on": "2020-02-10T10:58:30.367720+00:00", "type": "issue", "id": 199}