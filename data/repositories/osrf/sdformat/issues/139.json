{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "links": {"attachments": {"href": "data/repositories/osrf/sdformat/issues/139/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/sdformat/issues/139.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/139/watch"}, "comments": {"href": "data/repositories/osrf/sdformat/issues/139/comments_page=1.json"}, "html": {"href": "#!/osrf/sdformat/issues/139/boost-linkage-compilation-error"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/sdformat/issues/139/vote"}}, "reporter": {"display_name": "Illia Sheremet", "uuid": "{d50475a6-a9ca-484f-822b-d4ecafae873d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd50475a6-a9ca-484f-822b-d4ecafae873d%7D"}, "html": {"href": "https://bitbucket.org/%7Bd50475a6-a9ca-484f-822b-d4ecafae873d%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:708eecb0-cceb-47fd-b9c7-1d445c35f76d/92ef996e-a99a-4208-a473-65a301055028/128"}}, "nickname": "Illia Sheremet", "type": "user", "account_id": "557058:708eecb0-cceb-47fd-b9c7-1d445c35f76d"}, "title": "Boost linkage compilation error", "component": null, "votes": 1, "watches": 3, "content": {"raw": "I can't compile any 4.1 + versions of the code due to boost linkage error:\r\n\r\nlibsdformat.so.4.1.0: undefined reference to boost::re_detail_106100::put_mem_block(void*)\r\n...\r\nlibsdformat.so.4.1.0: undefined reference to `boost::re_detail_106100::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::construct_init(boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)'\r\n\r\nalthough the library is present and the flags are set correctly.\r\nHere is the output of ``make VERBOSE=1``\r\n\r\n```\r\n#!c++\r\n\r\n\r\ncd sdformat/build/test/integration && /usr/bin/cmake -E cmake_link_script CMakeFiles/INTEGRATION_audio.dir/link.txt --verbose=1\r\n/usr/bin/c++    -g -O2 -msse4.2 -msse4.1 -mssse3 -msse3 -mfpmath=sse -msse -msse2  -std=c++11 -fvisibility=hidden -lboost_regex -lboost_iostreams -Waddress -Warray-bounds -Wcomment -Wformat -Wnonnull -Wparentheses -Wreorder -Wreturn-type -Wsequence-point -Wsign-compare -Wstrict-aliasing -Wstrict-overflow=1 -Wswitch -Wtrigraphs -Wuninitialized -Wunused-function -Wunused-label -Wunused-value -Wunused-variable -Wvolatile-register-var -Wextra -Wno-long-long -Wno-unused-value -Wno-unused-value -Wno-unused-value -Wno-unused-value -Wfloat-equal -Wshadow -Winit-self -Wswitch-default -Wmissing-include-dirs -pedantic -Wno-pragmas -Wc++11-compat  -g -O2 -msse4.2 -msse4.1 -mssse3 -msse3 -mfpmath=sse -msse -msse2     CMakeFiles/INTEGRATION_audio.dir/audio.cc.o  -o INTEGRATION_audio  -L/sdformat/build/src  -L/sdformat/build/test -rdynamic -Wl,-Bstatic -lgtest -lgtest_main -Wl,-Bdynamic ../../src/libsdformat.so.4.1.0 -lpthread -ltinyxml -lignition-math2 -lboost_system -lboost_filesystem -lboost_program_options -lboost_regex -lboost_iostreams -ltinyxml -lignition-math2 -Wl,-rpath, sdformat/build/src:/sdformat/build/test\r\n```\r\n\r\n\r\nfrom which you can see that all the flags are set correctly. Here is the output of cmake boost version:\r\nBoost version: 1.61.0", "markup": "markdown", "html": "<p>I can't compile any 4.1 + versions of the code due to boost linkage error:</p>\n<p>libsdformat.so.4.1.0: undefined reference to boost::re_detail_106100::put_mem_block(void<em>)\n...\nlibsdformat.so.4.1.0: undefined reference to `boost::re_detail_106100::perl_matcher&lt;<strong>gnu_cxx::</strong>normal_iterator&lt;char const</em>, std::string&gt;, std::allocator&lt;boost::sub_match&lt;<strong>gnu_cxx::</strong>normal_iterator&lt;char const*, std::string&gt; &gt; &gt;, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::construct_init(boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, boost::regex_constants::_match_flags)'</p>\n<p>although the library is present and the flags are set correctly.\nHere is the output of <code>make VERBOSE=1</code></p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">cd</span> <span class=\"n\">sdformat</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">integration</span> <span class=\"o\">&amp;&amp;</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">cmake</span> <span class=\"o\">-</span><span class=\"n\">E</span> <span class=\"n\">cmake_link_script</span> <span class=\"n\">CMakeFiles</span><span class=\"o\">/</span><span class=\"n\">INTEGRATION_audio</span><span class=\"p\">.</span><span class=\"n\">dir</span><span class=\"o\">/</span><span class=\"n\">link</span><span class=\"p\">.</span><span class=\"n\">txt</span> <span class=\"o\">--</span><span class=\"n\">verbose</span><span class=\"o\">=</span><span class=\"mi\">1</span>\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">++</span>    <span class=\"o\">-</span><span class=\"n\">g</span> <span class=\"o\">-</span><span class=\"n\">O2</span> <span class=\"o\">-</span><span class=\"n\">msse4</span><span class=\"mf\">.2</span> <span class=\"o\">-</span><span class=\"n\">msse4</span><span class=\"mf\">.1</span> <span class=\"o\">-</span><span class=\"n\">mssse3</span> <span class=\"o\">-</span><span class=\"n\">msse3</span> <span class=\"o\">-</span><span class=\"n\">mfpmath</span><span class=\"o\">=</span><span class=\"n\">sse</span> <span class=\"o\">-</span><span class=\"n\">msse</span> <span class=\"o\">-</span><span class=\"n\">msse2</span>  <span class=\"o\">-</span><span class=\"n\">std</span><span class=\"o\">=</span><span class=\"n\">c</span><span class=\"o\">++</span><span class=\"mi\">11</span> <span class=\"o\">-</span><span class=\"n\">fvisibility</span><span class=\"o\">=</span><span class=\"n\">hidden</span> <span class=\"o\">-</span><span class=\"n\">lboost_regex</span> <span class=\"o\">-</span><span class=\"n\">lboost_iostreams</span> <span class=\"o\">-</span><span class=\"n\">Waddress</span> <span class=\"o\">-</span><span class=\"n\">Warray</span><span class=\"o\">-</span><span class=\"n\">bounds</span> <span class=\"o\">-</span><span class=\"n\">Wcomment</span> <span class=\"o\">-</span><span class=\"n\">Wformat</span> <span class=\"o\">-</span><span class=\"n\">Wnonnull</span> <span class=\"o\">-</span><span class=\"n\">Wparentheses</span> <span class=\"o\">-</span><span class=\"n\">Wreorder</span> <span class=\"o\">-</span><span class=\"n\">Wreturn</span><span class=\"o\">-</span><span class=\"n\">type</span> <span class=\"o\">-</span><span class=\"n\">Wsequence</span><span class=\"o\">-</span><span class=\"n\">point</span> <span class=\"o\">-</span><span class=\"n\">Wsign</span><span class=\"o\">-</span><span class=\"n\">compare</span> <span class=\"o\">-</span><span class=\"n\">Wstrict</span><span class=\"o\">-</span><span class=\"n\">aliasing</span> <span class=\"o\">-</span><span class=\"n\">Wstrict</span><span class=\"o\">-</span><span class=\"n\">overflow</span><span class=\"o\">=</span><span class=\"mi\">1</span> <span class=\"o\">-</span><span class=\"n\">Wswitch</span> <span class=\"o\">-</span><span class=\"n\">Wtrigraphs</span> <span class=\"o\">-</span><span class=\"n\">Wuninitialized</span> <span class=\"o\">-</span><span class=\"n\">Wunused</span><span class=\"o\">-</span><span class=\"n\">function</span> <span class=\"o\">-</span><span class=\"n\">Wunused</span><span class=\"o\">-</span><span class=\"n\">label</span> <span class=\"o\">-</span><span class=\"n\">Wunused</span><span class=\"o\">-</span><span class=\"n\">value</span> <span class=\"o\">-</span><span class=\"n\">Wunused</span><span class=\"o\">-</span><span class=\"n\">variable</span> <span class=\"o\">-</span><span class=\"n\">Wvolatile</span><span class=\"o\">-</span><span class=\"k\">register</span><span class=\"o\">-</span><span class=\"n\">var</span> <span class=\"o\">-</span><span class=\"n\">Wextra</span> <span class=\"o\">-</span><span class=\"n\">Wno</span><span class=\"o\">-</span><span class=\"kt\">long</span><span class=\"o\">-</span><span class=\"kt\">long</span> <span class=\"o\">-</span><span class=\"n\">Wno</span><span class=\"o\">-</span><span class=\"n\">unused</span><span class=\"o\">-</span><span class=\"n\">value</span> <span class=\"o\">-</span><span class=\"n\">Wno</span><span class=\"o\">-</span><span class=\"n\">unused</span><span class=\"o\">-</span><span class=\"n\">value</span> <span class=\"o\">-</span><span class=\"n\">Wno</span><span class=\"o\">-</span><span class=\"n\">unused</span><span class=\"o\">-</span><span class=\"n\">value</span> <span class=\"o\">-</span><span class=\"n\">Wno</span><span class=\"o\">-</span><span class=\"n\">unused</span><span class=\"o\">-</span><span class=\"n\">value</span> <span class=\"o\">-</span><span class=\"n\">Wfloat</span><span class=\"o\">-</span><span class=\"n\">equal</span> <span class=\"o\">-</span><span class=\"n\">Wshadow</span> <span class=\"o\">-</span><span class=\"n\">Winit</span><span class=\"o\">-</span><span class=\"n\">self</span> <span class=\"o\">-</span><span class=\"n\">Wswitch</span><span class=\"o\">-</span><span class=\"k\">default</span> <span class=\"o\">-</span><span class=\"n\">Wmissing</span><span class=\"o\">-</span><span class=\"n\">include</span><span class=\"o\">-</span><span class=\"n\">dirs</span> <span class=\"o\">-</span><span class=\"n\">pedantic</span> <span class=\"o\">-</span><span class=\"n\">Wno</span><span class=\"o\">-</span><span class=\"n\">pragmas</span> <span class=\"o\">-</span><span class=\"n\">Wc</span><span class=\"o\">++</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"n\">compat</span>  <span class=\"o\">-</span><span class=\"n\">g</span> <span class=\"o\">-</span><span class=\"n\">O2</span> <span class=\"o\">-</span><span class=\"n\">msse4</span><span class=\"mf\">.2</span> <span class=\"o\">-</span><span class=\"n\">msse4</span><span class=\"mf\">.1</span> <span class=\"o\">-</span><span class=\"n\">mssse3</span> <span class=\"o\">-</span><span class=\"n\">msse3</span> <span class=\"o\">-</span><span class=\"n\">mfpmath</span><span class=\"o\">=</span><span class=\"n\">sse</span> <span class=\"o\">-</span><span class=\"n\">msse</span> <span class=\"o\">-</span><span class=\"n\">msse2</span>     <span class=\"n\">CMakeFiles</span><span class=\"o\">/</span><span class=\"n\">INTEGRATION_audio</span><span class=\"p\">.</span><span class=\"n\">dir</span><span class=\"o\">/</span><span class=\"n\">audio</span><span class=\"p\">.</span><span class=\"n\">cc</span><span class=\"p\">.</span><span class=\"n\">o</span>  <span class=\"o\">-</span><span class=\"n\">o</span> <span class=\"n\">INTEGRATION_audio</span>  <span class=\"o\">-</span><span class=\"n\">L</span><span class=\"o\">/</span><span class=\"n\">sdformat</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">src</span>  <span class=\"o\">-</span><span class=\"n\">L</span><span class=\"o\">/</span><span class=\"n\">sdformat</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">test</span> <span class=\"o\">-</span><span class=\"n\">rdynamic</span> <span class=\"o\">-</span><span class=\"n\">Wl</span><span class=\"p\">,</span><span class=\"o\">-</span><span class=\"n\">Bstatic</span> <span class=\"o\">-</span><span class=\"n\">lgtest</span> <span class=\"o\">-</span><span class=\"n\">lgtest_main</span> <span class=\"o\">-</span><span class=\"n\">Wl</span><span class=\"p\">,</span><span class=\"o\">-</span><span class=\"n\">Bdynamic</span> <span class=\"p\">..</span><span class=\"o\">/</span><span class=\"p\">..</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">libsdformat</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.4.1.0</span> <span class=\"o\">-</span><span class=\"n\">lpthread</span> <span class=\"o\">-</span><span class=\"n\">ltinyxml</span> <span class=\"o\">-</span><span class=\"n\">lignition</span><span class=\"o\">-</span><span class=\"n\">math2</span> <span class=\"o\">-</span><span class=\"n\">lboost_system</span> <span class=\"o\">-</span><span class=\"n\">lboost_filesystem</span> <span class=\"o\">-</span><span class=\"n\">lboost_program_options</span> <span class=\"o\">-</span><span class=\"n\">lboost_regex</span> <span class=\"o\">-</span><span class=\"n\">lboost_iostreams</span> <span class=\"o\">-</span><span class=\"n\">ltinyxml</span> <span class=\"o\">-</span><span class=\"n\">lignition</span><span class=\"o\">-</span><span class=\"n\">math2</span> <span class=\"o\">-</span><span class=\"n\">Wl</span><span class=\"p\">,</span><span class=\"o\">-</span><span class=\"n\">rpath</span><span class=\"p\">,</span> <span class=\"n\">sdformat</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"nl\">src</span><span class=\"p\">:</span><span class=\"o\">/</span><span class=\"n\">sdformat</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">test</span>\n</pre></div>\n\n\n<p>from which you can see that all the flags are set correctly. Here is the output of cmake boost version:\nBoost version: 1.61.0</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-02-10T13:38:16.250840+00:00", "milestone": null, "updated_on": "2017-04-11T16:06:29.652804+00:00", "type": "issue", "id": 139}