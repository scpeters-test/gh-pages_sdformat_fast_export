{"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/60/comments/14533364.json"}, "html": {"href": "#!/osrf/sdformat/issues/60#comment-14533364"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/60.json"}}, "type": "issue", "id": 60, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "Error when starting gazebo if LC_NUMERIC in not set to C."}, "content": {"raw": "The test case mentioned by @_jrivero_ also doesn't fail for me. I think it passes because the issue is not that all inputs containing decimals will fail for some locales. If that were the case, I wouldn't have been able to insert models or do almost anything with Gazebo, but in fact, I've been living with `LC_NUMERIC=pt_BR.UTF-8` until now just fine. Each time I opened gazebo I'd get only the same 2 errors described above:\n\n~~~\nError [Param.cc:181] Unable to set value [1,0471975511965976] for key[horizontal_fov]\nError [Param.cc:181] Unable to set value [0,100000001] for key[near]\n~~~\n\nThat didn't bother me and I was using Gazebo normally. It wasn't until recently that I started getting more errors like this ([gazebo issue 1397](https://bitbucket.org/osrf/gazebo/issue/1397/sdf-param-error-unable-to-set-value-for)). Now if I open Gazebo while `LC_NUMERIC=pt_BR.UTF-8`:\n\n~~~\nError [Param.cc:181] Unable to set value [1,0471975511965976] for key[horizontal_fov]\nError [Param.cc:181] Unable to set value [0,100000001] for key[near]\nError [Param.cc:181] Unable to set value [0,899999976] for key[constant]\nError [Param.cc:181] Unable to set value [0,00999999978] for key[linear]\nError [Param.cc:181] Unable to set value [0,00100000005] for key[quadratic]\n~~~\n\nAnd if I insert a sphere from the GUI toolbar, for example:\n\n~~~\nError [Param.cc:181] Unable to set value [0,5] for key[radius]\nError [Param.cc:181] Unable to set value [0,5] for key[radius]\n~~~\n\nSo I think that rather than a general problem with decimals on SDF, this is a matter of Gazebo generating bad input at very specific places. In fact, changing [this line](https://bitbucket.org/osrf/gazebo/src/28fa35543886f3a03eb0b413e23629f5b18ff958/gazebo/rendering/Camera.cc?at=default#cl-649) from\n\n~~~\nthis->sdf->GetElement(\"horizontal_fov\")->Set(_angle.Radian());\n~~~\n\nto\n\n~~~\nthis->sdf->GetElement(\"horizontal_fov\")->Set(_angle);\n~~~\n\neliminates the error related to `horizontal_fov`. Not sure what's going on...", "markup": "markdown", "html": "<p>The test case mentioned by @<em>jrivero</em> also doesn't fail for me. I think it passes because the issue is not that all inputs containing decimals will fail for some locales. If that were the case, I wouldn't have been able to insert models or do almost anything with Gazebo, but in fact, I've been living with <code>LC_NUMERIC=pt_BR.UTF-8</code> until now just fine. Each time I opened gazebo I'd get only the same 2 errors described above:</p>\n<div class=\"codehilite\"><pre><span></span>Error [Param.cc:181] Unable to set value [1,0471975511965976] for key[horizontal_fov]\nError [Param.cc:181] Unable to set value [0,100000001] for key[near]\n</pre></div>\n\n\n<p>That didn't bother me and I was using Gazebo normally. It wasn't until recently that I started getting more errors like this (<a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo/issue/1397/sdf-param-error-unable-to-set-value-for\" rel=\"nofollow\">gazebo issue 1397</a>). Now if I open Gazebo while <code>LC_NUMERIC=pt_BR.UTF-8</code>:</p>\n<div class=\"codehilite\"><pre><span></span>Error [Param.cc:181] Unable to set value [1,0471975511965976] for key[horizontal_fov]\nError [Param.cc:181] Unable to set value [0,100000001] for key[near]\nError [Param.cc:181] Unable to set value [0,899999976] for key[constant]\nError [Param.cc:181] Unable to set value [0,00999999978] for key[linear]\nError [Param.cc:181] Unable to set value [0,00100000005] for key[quadratic]\n</pre></div>\n\n\n<p>And if I insert a sphere from the GUI toolbar, for example:</p>\n<div class=\"codehilite\"><pre><span></span>Error [Param.cc:181] Unable to set value [0,5] for key[radius]\nError [Param.cc:181] Unable to set value [0,5] for key[radius]\n</pre></div>\n\n\n<p>So I think that rather than a general problem with decimals on SDF, this is a matter of Gazebo generating bad input at very specific places. In fact, changing <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo/src/28fa35543886f3a03eb0b413e23629f5b18ff958/gazebo/rendering/Camera.cc?at=default#cl-649\" rel=\"nofollow\">this line</a> from</p>\n<div class=\"codehilite\"><pre><span></span>this-&gt;sdf-&gt;GetElement(&quot;horizontal_fov&quot;)-&gt;Set(_angle.Radian());\n</pre></div>\n\n\n<p>to</p>\n<div class=\"codehilite\"><pre><span></span>this-&gt;sdf-&gt;GetElement(&quot;horizontal_fov&quot;)-&gt;Set(_angle);\n</pre></div>\n\n\n<p>eliminates the error related to <code>horizontal_fov</code>. Not sure what's going on...</p>", "type": "rendered"}, "created_on": "2014-12-29T22:11:27.202735+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2014-12-29T22:12:42.496886+00:00", "type": "issue_comment", "id": 14533364}