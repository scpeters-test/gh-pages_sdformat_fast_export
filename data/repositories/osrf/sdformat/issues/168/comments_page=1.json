{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/168/comments/40209838.json"}, "html": {"href": "#!/osrf/sdformat/issues/168#comment-40209838"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/168.json"}}, "type": "issue", "id": 168, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "sdformat pushes visual plugin comments inside `<sdf></sdf>` tags"}, "content": {"raw": "## Some context\n\nBefore Gazebo 7, visual plugins behaved differently from the rest of the plugins; instead of passing the contents of `<plugin>` to the plugin, Gazebo would pass it inside `<plugin><sdf>`. This was done by Gazebo, not SDFormat.\n\nThis was fixed on Gazebo 7, see [this](https://bitbucket.org/osrf/gazebo/commits/fe9f03a) commit. To keep backwards compatibility, Gazebo 7 still pushes the contents to `<plugin><sdf>`, but it also repeats the contents under `<plugin>`.\n\nThe backwards compatible behaviour was removed on Gazebo 8, so any plugins which relied on `<plugin><sdf>` must be updated to get the contents directly from `<plugin>`.\n\n## Your issue\n\nIn any case, it's likely that the issue you're seeing is not caused by the extra `<sdf>` tag. It would help if you provided the version of Gazebo and SDFormat you're using, and an SDF file which reproduces the problem.", "markup": "markdown", "html": "<h2 id=\"markdown-header-some-context\">Some context</h2>\n<p>Before Gazebo 7, visual plugins behaved differently from the rest of the plugins; instead of passing the contents of <code>&lt;plugin&gt;</code> to the plugin, Gazebo would pass it inside <code>&lt;plugin&gt;&lt;sdf&gt;</code>. This was done by Gazebo, not SDFormat.</p>\n<p>This was fixed on Gazebo 7, see <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo/commits/fe9f03a\" rel=\"nofollow\">this</a> commit. To keep backwards compatibility, Gazebo 7 still pushes the contents to <code>&lt;plugin&gt;&lt;sdf&gt;</code>, but it also repeats the contents under <code>&lt;plugin&gt;</code>.</p>\n<p>The backwards compatible behaviour was removed on Gazebo 8, so any plugins which relied on <code>&lt;plugin&gt;&lt;sdf&gt;</code> must be updated to get the contents directly from <code>&lt;plugin&gt;</code>.</p>\n<h2 id=\"markdown-header-your-issue\">Your issue</h2>\n<p>In any case, it's likely that the issue you're seeing is not caused by the extra <code>&lt;sdf&gt;</code> tag. It would help if you provided the version of Gazebo and SDFormat you're using, and an SDF file which reproduces the problem.</p>", "type": "rendered"}, "created_on": "2017-09-29T21:55:54.946374+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 40209838}, {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/168/comments/40226133.json"}, "html": {"href": "#!/osrf/sdformat/issues/168#comment-40226133"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/sdformat/issues/168.json"}}, "type": "issue", "id": 168, "repository": {"links": {"self": {"href": "data/repositories/osrf/sdformat.json"}, "html": {"href": "#!/osrf/sdformat"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6d52f9f-b070-41c0-807c-94af07ea375b}ts=1606789"}}, "type": "repository", "name": "sdformat", "full_name": "osrf/sdformat", "uuid": "{b6d52f9f-b070-41c0-807c-94af07ea375b}"}, "title": "sdformat pushes visual plugin comments inside `<sdf></sdf>` tags"}, "content": {"raw": "Thanks for the context @chapulina!\n\nI'm using the following versions:\n\n* Gazebo: We're using Gazebo tag gazebo7_7.0.0 compiled from source from here: https://bitbucket.org/osrf/gazebo/downloads/?tab=tags\n* Sdformat: 4.0.0-1ubuntu2\n* Ubuntu 16.04 LTS + ROS Kinetic\n\nHere's a small example sdf:\n```\n<?xml version=\"1.0\" ?>\n<sdf version=\"1.6\" >\n  <model name=\"block\">\n    <pose>0 0 0 0 0 0</pose>\n    <link name=\"block_link\">\n      <gravity>0</gravity>\n      <inertial>\n        <mass>0.001</mass>\n        <inertia>\n          <ixx>0.001</ixx>\n          <ixy>0.0</ixy>\n          <ixz>0.0</ixz>\n          <iyy>0.001</iyy>\n          <iyz>0.0</iyz>\n          <izz>0.001</izz>\n        </inertia>\n      </inertial>\n      <visual name=\"visual\">\n        <geometry>\n          <box>\n            <size>1 1 1</size>\n          </box>\n        </geometry>\n        <plugin filename=\"libgazebo_ros_video.so\" name=\"gazebo_ros_video_controller\">\n          <width>320</width>\n        </plugin>\n      </visual>\n    </link>\n  </model>\n</sdf>\n```\n\n```\nroslaunch gazebo_ros empty_world.launch\nrosrun gazebo_ros spawn_model -file example.sdf -sdf -z 1 -model test\n```\n\nThe complete output from the roslaunch command:\n```\n... logging to /home/piyushk/.ros/log/c09649c2-a6f8-11e7-a4a6-0242ac110002/roslaunch-2bbc92b1103d-1076.log\nChecking log directory for disk usage. This may take awhile.\nPress Ctrl-C to interrupt\nDone checking log file disk usage. Usage is <1GB.\n\nstarted roslaunch server http://2bbc92b1103d:43745/\n\nSUMMARY\n========\n\nPARAMETERS\n * /rosdistro: kinetic\n * /rosversion: 1.12.7\n * /use_sim_time: True\n\nNODES\n  /\n    gazebo (gazebo_ros/gzserver)\n    gazebo_gui (gazebo_ros/gzclient)\n\nauto-starting new master\nprocess[master]: started with pid [1087]\nROS_MASTER_URI=http://localhost:11311\n\nsetting /run_id to c09649c2-a6f8-11e7-a4a6-0242ac110002\nprocess[rosout-1]: started with pid [1100]\nstarted core service [/rosout]\nprocess[gazebo-2]: started with pid [1106]\nprocess[gazebo_gui-3]: started with pid [1129]\n[ INFO] [1506897298.434298144]: Finished loading Gazebo ROS API Plugin.\n[ INFO] [1506897298.435533232]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...\n[ INFO] [1506897299.602410828, 0.022000000]: waitForService: Service [/gazebo/set_physics_properties] is now available.\n[ INFO] [1506897299.650948904, 0.068000000]: Physics dynamic reconfigure ready.\nWarning [parser.cc:437] Converting a deprecated SDF source[data-string].\n[ WARN] [1506897760.900270469]: GazeboRosVideo Plugin (ns = /) missing <topicName>, defaults to \"image_raw\".\n[ WARN] [1506897760.900332918]: GazeboRosVideo Plugin (ns = /) missing <height>, defaults to 240.\n[ INFO] [1506897760.917234310]: GazeboRosVideo (gzclient, ns = /) has started\n```", "markup": "markdown", "html": "<p>Thanks for the context @chapulina!</p>\n<p>I'm using the following versions:</p>\n<ul>\n<li>Gazebo: We're using Gazebo tag gazebo7_7.0.0 compiled from source from here: <a href=\"https://bitbucket.org/osrf/gazebo/downloads/?tab=tags\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/osrf/gazebo/downloads/?tab=tags</a></li>\n<li>Sdformat: 4.0.0-1ubuntu2</li>\n<li>Ubuntu 16.04 LTS + ROS Kinetic</li>\n</ul>\n<p>Here's a small example sdf:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>\n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.6&quot;</span> <span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&quot;block&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;pose&gt;</span>0 0 0 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n    <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;block_link&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;gravity&gt;</span>0<span class=\"nt\">&lt;/gravity&gt;</span>\n      <span class=\"nt\">&lt;inertial&gt;</span>\n        <span class=\"nt\">&lt;mass&gt;</span>0.001<span class=\"nt\">&lt;/mass&gt;</span>\n        <span class=\"nt\">&lt;inertia&gt;</span>\n          <span class=\"nt\">&lt;ixx&gt;</span>0.001<span class=\"nt\">&lt;/ixx&gt;</span>\n          <span class=\"nt\">&lt;ixy&gt;</span>0.0<span class=\"nt\">&lt;/ixy&gt;</span>\n          <span class=\"nt\">&lt;ixz&gt;</span>0.0<span class=\"nt\">&lt;/ixz&gt;</span>\n          <span class=\"nt\">&lt;iyy&gt;</span>0.001<span class=\"nt\">&lt;/iyy&gt;</span>\n          <span class=\"nt\">&lt;iyz&gt;</span>0.0<span class=\"nt\">&lt;/iyz&gt;</span>\n          <span class=\"nt\">&lt;izz&gt;</span>0.001<span class=\"nt\">&lt;/izz&gt;</span>\n        <span class=\"nt\">&lt;/inertia&gt;</span>\n      <span class=\"nt\">&lt;/inertial&gt;</span>\n      <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;geometry&gt;</span>\n          <span class=\"nt\">&lt;box&gt;</span>\n            <span class=\"nt\">&lt;size&gt;</span>1 1 1<span class=\"nt\">&lt;/size&gt;</span>\n          <span class=\"nt\">&lt;/box&gt;</span>\n        <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;plugin</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libgazebo_ros_video.so&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;gazebo_ros_video_controller&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;width&gt;</span>320<span class=\"nt\">&lt;/width&gt;</span>\n        <span class=\"nt\">&lt;/plugin&gt;</span>\n      <span class=\"nt\">&lt;/visual&gt;</span>\n    <span class=\"nt\">&lt;/link&gt;</span>\n  <span class=\"nt\">&lt;/model&gt;</span>\n<span class=\"nt\">&lt;/sdf&gt;</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>roslaunch gazebo_ros empty_world.launch\nrosrun gazebo_ros spawn_model -file example.sdf -sdf -z 1 -model test\n</pre></div>\n\n\n<p>The complete output from the roslaunch command:</p>\n<div class=\"codehilite\"><pre><span></span>... logging to /home/piyushk/.ros/log/c09649c2-a6f8-11e7-a4a6-0242ac110002/roslaunch-2bbc92b1103d-1076.log\nChecking log directory for disk usage. This may take awhile.\nPress Ctrl-C to interrupt\nDone checking log file disk usage. Usage is &lt;1GB.\n\nstarted roslaunch server http://2bbc92b1103d:43745/\n\nSUMMARY\n========\n\nPARAMETERS\n * /rosdistro: kinetic\n * /rosversion: 1.12.7\n * /use_sim_time: True\n\nNODES\n  /\n    gazebo (gazebo_ros/gzserver)\n    gazebo_gui (gazebo_ros/gzclient)\n\nauto-starting new master\nprocess[master]: started with pid [1087]\nROS_MASTER_URI=http://localhost:11311\n\nsetting /run_id to c09649c2-a6f8-11e7-a4a6-0242ac110002\nprocess[rosout-1]: started with pid [1100]\nstarted core service [/rosout]\nprocess[gazebo-2]: started with pid [1106]\nprocess[gazebo_gui-3]: started with pid [1129]\n[ INFO] [1506897298.434298144]: Finished loading Gazebo ROS API Plugin.\n[ INFO] [1506897298.435533232]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...\n[ INFO] [1506897299.602410828, 0.022000000]: waitForService: Service [/gazebo/set_physics_properties] is now available.\n[ INFO] [1506897299.650948904, 0.068000000]: Physics dynamic reconfigure ready.\nWarning [parser.cc:437] Converting a deprecated SDF source[data-string].\n[ WARN] [1506897760.900270469]: GazeboRosVideo Plugin (ns = /) missing &lt;topicName&gt;, defaults to &quot;image_raw&quot;.\n[ WARN] [1506897760.900332918]: GazeboRosVideo Plugin (ns = /) missing &lt;height&gt;, defaults to 240.\n[ INFO] [1506897760.917234310]: GazeboRosVideo (gzclient, ns = /) has started\n</pre></div>", "type": "rendered"}, "created_on": "2017-10-01T22:53:47.355025+00:00", "user": {"display_name": "Piyush Khandelwal", "uuid": "{0aafe920-14b3-4b46-927d-421c6f4e90f2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0aafe920-14b3-4b46-927d-421c6f4e90f2%7D"}, "html": {"href": "https://bitbucket.org/%7B0aafe920-14b3-4b46-927d-421c6f4e90f2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/4c0a1652789850a7953553e6d883eb06d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPK-1.png"}}, "nickname": "piyushk", "type": "user", "account_id": "557058:f6cfe420-cf98-45d4-b1ff-8a554ca13fd0"}, "updated_on": "2017-10-01T22:58:46.961484+00:00", "type": "issue_comment", "id": 40226133}], "page": 1, "size": 2}